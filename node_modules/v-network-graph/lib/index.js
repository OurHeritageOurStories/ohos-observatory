var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__pow=Math.pow,__defNormalProp=(e,t,n)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))__hasOwnProp.call(t,n)&&__defNormalProp(e,n,t[n]);if(__getOwnPropSymbols)for(var n of __getOwnPropSymbols(t))__propIsEnum.call(t,n)&&__defNormalProp(e,n,t[n]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__async=(e,t,n)=>new Promise(((o,r)=>{var i=e=>{try{s(n.next(e))}catch(t){r(t)}},a=e=>{try{s(n.throw(e))}catch(t){r(t)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,a);s((n=n.apply(e,t)).next())}));!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["v-network-graph"]={},e.Vue)}(this,(function(e,t){"use strict";const n=["paths","nodes","focusring","edges","base","grid","background","root"];function o(e){return t.isReactive(e)?e:t.reactive(e)}function r(e,t="Parameter"){if(null==e)throw new Error(`${t} is null`);return e}const i=Symbol("containers");function a(){const e=r(t.inject(i),"containers");return{container:e.container,svg:e.svg,viewport:e.viewport,svgPanZoom:e.svgPanZoom}}class s{static value(e,t){return e instanceof Function?e(t):e}static values(e,t){return 0===Object.values(e).filter((e=>e instanceof Function)).length?e:Object.fromEntries(Object.entries(e).map((([e,n])=>[e,n instanceof Function?n(t):n])))}}var l=(e=>(e.CENTER="center",e.NORTH="north",e.NORTH_EAST="north-east",e.EAST="east",e.SOUTH_EAST="south-east",e.SOUTH="south",e.SOUTH_WEST="south-west",e.WEST="west",e.NORTH_WEST="north-west",e))(l||{});function c(e){const t={};return Object.assign(t,e(t))}function u(e,t,n){const o=s.values(t.normal,e);return"circle"==o.type?{width:2*o.radius*n,height:2*o.radius*n}:{width:o.width*n,height:o.height*n}}function d(e,t,n,o){const r=Math.abs(e.x-n.x)<t.width/2+o.width/2,i=Math.abs(e.y-n.y)<t.height/2+o.height/2;return r&&i}function v(e,t){let n=0;return n=1===t||void 0===e||"none"===e?null!=e?e:0:"string"==typeof e?e.split(/\s+/).map((e=>parseInt(e)*t)).filter((e=>!isNaN(e))).join(" "):e*t,n&&"0"!==n?n:void 0}function p(e){let t=0;if(void 0===e||"none"===e)t=0;else if("string"==typeof e){const n=e.split(/\s+/).map((e=>parseInt(e))).filter((e=>!isNaN(e)));t=n.length%2==0?n.reduce(((e,t)=>e+t),0):2*n.reduce(((e,t)=>e+t),0)}else t=2*e;return t}var h="object"==typeof global&&global&&global.Object===Object&&global,f="object"==typeof self&&self&&self.Object===Object&&self,m=h||f||Function("return this")(),g=/\s/;var b=/^\s+/;function y(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&g.test(e.charAt(t)););return t}(e)+1).replace(b,""):e}function w(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var k=m.Symbol,E=Object.prototype,x=E.hasOwnProperty,P=E.toString,S=k?k.toStringTag:void 0;var M=Object.prototype.toString;var O=k?k.toStringTag:void 0;function _(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":O&&O in Object(e)?function(e){var t=x.call(e,S),n=e[S];try{e[S]=void 0;var o=!0}catch(i){}var r=P.call(e);return o&&(t?e[S]=n:delete e[S]),r}(e):function(e){return M.call(e)}(e)}function C(e){return null!=e&&"object"==typeof e}function z(e){return"symbol"==typeof e||C(e)&&"[object Symbol]"==_(e)}var B=/^[-+]0x[0-9a-f]+$/i,j=/^0b[01]+$/i,T=/^0o[0-7]+$/i,I=parseInt;function N(e){if("number"==typeof e)return e;if(z(e))return NaN;if(w(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=w(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=y(e);var n=j.test(e);return n||T.test(e)?I(e.slice(2),n?2:8):B.test(e)?NaN:+e}var Z=1/0;function A(e){var t=function(e){return e?(e=N(e))===Z||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}var L=Array.isArray,D=k?k.prototype:void 0,V=D?D.toString:void 0;function $(e){if("string"==typeof e)return e;if(L(e))return function(e,t){for(var n=-1,o=null==e?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}(e,$)+"";if(z(e))return V?V.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function q(e){return null==e?"":$(e)}var R=m.isFinite,W=Math.min;var F,H=(F=Math["round"],function(e,t){if(e=N(e),(t=null==t?0:W(A(t),292))&&R(e)){var n=(q(e)+"e").split("e");return+((n=(q(F(n[0]+"e"+(+n[1]+t)))+"e").split("e"))[0]+"e"+(+n[1]-t))}return F(e)});class G{activate(e){const{layouts:n,nodes:o,configs:r,emitter:i,scale:a,svgPanZoom:s}=e,l=e=>{for(const[t,o]of Object.entries(e)){const e=this.getOrCreateNodePosition(n,t);this.setNodePosition(e,o)}},c=e=>{const t=e.filter((e=>!(e in n))),i=s.getViewArea(),l=a.value;for(const a of t){const e=u(o.value[a],r.node,l),t=__spreadValues({},i.center);for(;;){let s=!1;for(const[i,c]of Object.entries(n)){if(a===i)continue;const n=o.value[i];if(!n)continue;if(s=d(t,e,c,u(n,r.node,l)),s)break}if(!s)break;t.x+=e.width+20*l,t.x+e.width/2>i.box.right&&(t.x=i.center.x,t.y+=e.height+20*l)}const s=this.getOrCreateNodePosition(n,a);this.setNodePosition(s,t)}};c(Object.keys(o.value));const v=t.watch((()=>Object.keys(o.value)),c);i.on("node:dragstart",l),i.on("node:pointermove",l),i.on("node:dragend",l),this.onDeactivate=()=>{v(),i.off("node:dragstart",l),i.off("node:pointermove",l),i.off("node:dragend",l)}}deactivate(){this.onDeactivate&&this.onDeactivate()}setNodePosition(e,t){e.value.x=H(t.x,3),e.value.y=H(t.y,3)}getOrCreateNodePosition(e,n){const o=t.toRef(e,n);return o.value||(o.value={x:0,y:0}),o}}function X(e,t){return e===t||e!=e&&t!=t}function U(e,t){for(var n=e.length;n--;)if(X(e[n][0],t))return n;return-1}var Y=Array.prototype.splice;function K(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}K.prototype.clear=function(){this.__data__=[],this.size=0},K.prototype.delete=function(e){var t=this.__data__,n=U(t,e);return!(n<0)&&(n==t.length-1?t.pop():Y.call(t,n,1),--this.size,!0)},K.prototype.get=function(e){var t=this.__data__,n=U(t,e);return n<0?void 0:t[n][1]},K.prototype.has=function(e){return U(this.__data__,e)>-1},K.prototype.set=function(e,t){var n=this.__data__,o=U(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};function Q(e){if(!w(e))return!1;var t=_(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var J,ee=m["__core-js_shared__"],te=(J=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||""))?"Symbol(src)_1."+J:"";var ne=Function.prototype.toString;function oe(e){if(null!=e){try{return ne.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var re=/^\[object .+?Constructor\]$/,ie=Function.prototype,ae=Object.prototype,se=ie.toString,le=ae.hasOwnProperty,ce=RegExp("^"+se.call(le).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ue(e){return!(!w(e)||function(e){return!!te&&te in e}(e))&&(Q(e)?ce:re).test(oe(e))}function de(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ue(n)?n:void 0}var ve=de(m,"Map"),pe=de(Object,"create");var he=Object.prototype.hasOwnProperty;var fe=Object.prototype.hasOwnProperty;function me(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function ge(e,t){var n,o,r=e.__data__;return("string"==(o=typeof(n=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function be(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}me.prototype.clear=function(){this.__data__=pe?pe(null):{},this.size=0},me.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},me.prototype.get=function(e){var t=this.__data__;if(pe){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return he.call(t,e)?t[e]:void 0},me.prototype.has=function(e){var t=this.__data__;return pe?void 0!==t[e]:fe.call(t,e)},me.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=pe&&void 0===t?"__lodash_hash_undefined__":t,this},be.prototype.clear=function(){this.size=0,this.__data__={hash:new me,map:new(ve||K),string:new me}},be.prototype.delete=function(e){var t=ge(this,e).delete(e);return this.size-=t?1:0,t},be.prototype.get=function(e){return ge(this,e).get(e)},be.prototype.has=function(e){return ge(this,e).has(e)},be.prototype.set=function(e,t){var n=ge(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};function ye(e){var t=this.__data__=new K(e);this.size=t.size}ye.prototype.clear=function(){this.__data__=new K,this.size=0},ye.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ye.prototype.get=function(e){return this.__data__.get(e)},ye.prototype.has=function(e){return this.__data__.has(e)},ye.prototype.set=function(e,t){var n=this.__data__;if(n instanceof K){var o=n.__data__;if(!ve||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new be(o)}return n.set(e,t),this.size=n.size,this};var we=function(){try{var e=de(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),ke=we;function Ee(e,t,n){"__proto__"==t&&ke?ke(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function xe(e,t,n){(void 0!==n&&!X(e[t],n)||void 0===n&&!(t in e))&&Ee(e,t,n)}var Pe,Se=function(e,t,n){for(var o=-1,r=Object(e),i=n(e),a=i.length;a--;){var s=i[Pe?a:++o];if(!1===t(r[s],s,r))break}return e},Me="object"==typeof e&&e&&!e.nodeType&&e,Oe=Me&&"object"==typeof module&&module&&!module.nodeType&&module,_e=Oe&&Oe.exports===Me?m.Buffer:void 0,Ce=_e?_e.allocUnsafe:void 0;var ze=m.Uint8Array;function Be(e,t){var n,o,r=t?(n=e.buffer,o=new n.constructor(n.byteLength),new ze(o).set(new ze(n)),o):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var je=Object.create,Te=function(){function e(){}return function(t){if(!w(t))return{};if(je)return je(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Ie(e,t){return function(n){return e(t(n))}}var Ne=Ie(Object.getPrototypeOf,Object),Ze=Object.prototype;function Ae(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ze)}function Le(e){return C(e)&&"[object Arguments]"==_(e)}var De=Object.prototype,Ve=De.hasOwnProperty,$e=De.propertyIsEnumerable,qe=Le(function(){return arguments}())?Le:function(e){return C(e)&&Ve.call(e,"callee")&&!$e.call(e,"callee")},Re=qe;function We(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Fe(e){return null!=e&&We(e.length)&&!Q(e)}var He="object"==typeof e&&e&&!e.nodeType&&e,Ge=He&&"object"==typeof module&&module&&!module.nodeType&&module,Xe=Ge&&Ge.exports===He?m.Buffer:void 0,Ue=(Xe?Xe.isBuffer:void 0)||function(){return!1},Ye=Function.prototype,Ke=Object.prototype,Qe=Ye.toString,Je=Ke.hasOwnProperty,et=Qe.call(Object);var tt={};tt["[object Float32Array]"]=tt["[object Float64Array]"]=tt["[object Int8Array]"]=tt["[object Int16Array]"]=tt["[object Int32Array]"]=tt["[object Uint8Array]"]=tt["[object Uint8ClampedArray]"]=tt["[object Uint16Array]"]=tt["[object Uint32Array]"]=!0,tt["[object Arguments]"]=tt["[object Array]"]=tt["[object ArrayBuffer]"]=tt["[object Boolean]"]=tt["[object DataView]"]=tt["[object Date]"]=tt["[object Error]"]=tt["[object Function]"]=tt["[object Map]"]=tt["[object Number]"]=tt["[object Object]"]=tt["[object RegExp]"]=tt["[object Set]"]=tt["[object String]"]=tt["[object WeakMap]"]=!1;var nt="object"==typeof e&&e&&!e.nodeType&&e,ot=nt&&"object"==typeof module&&module&&!module.nodeType&&module,rt=ot&&ot.exports===nt&&h.process,it=function(){try{var e=ot&&ot.require&&ot.require("util").types;return e||rt&&rt.binding&&rt.binding("util")}catch(t){}}(),at=it&&it.isTypedArray,st=at?function(e){return function(t){return e(t)}}(at):function(e){return C(e)&&We(e.length)&&!!tt[_(e)]},lt=st;function ct(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ut=Object.prototype.hasOwnProperty;function dt(e,t,n){var o=e[t];ut.call(e,t)&&X(o,n)&&(void 0!==n||t in e)||Ee(e,t,n)}var vt=/^(?:0|[1-9]\d*)$/;function pt(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&vt.test(e))&&e>-1&&e%1==0&&e<t}var ht=Object.prototype.hasOwnProperty;function ft(e,t){var n=L(e),o=!n&&Re(e),r=!n&&!o&&Ue(e),i=!n&&!o&&!r&&lt(e),a=n||o||r||i,s=a?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],l=s.length;for(var c in e)!t&&!ht.call(e,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||pt(c,l))||s.push(c);return s}var mt=Object.prototype.hasOwnProperty;function gt(e){if(!w(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Ae(e),n=[];for(var o in e)("constructor"!=o||!t&&mt.call(e,o))&&n.push(o);return n}function bt(e){return Fe(e)?ft(e,!0):gt(e)}function yt(e){return function(e,t,n,o){var r=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=o?o(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),r?Ee(n,s,l):dt(n,s,l)}return n}(e,bt(e))}function wt(e,t,n,o,r,i,a){var s=ct(e,n),l=ct(t,n),c=a.get(l);if(c)xe(e,n,c);else{var u,d=i?i(s,l,n+"",e,t,a):void 0,v=void 0===d;if(v){var p=L(l),h=!p&&Ue(l),f=!p&&!h&&lt(l);d=l,p||h||f?L(s)?d=s:C(u=s)&&Fe(u)?d=function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}(s):h?(v=!1,d=function(e,t){if(t)return e.slice();var n=e.length,o=Ce?Ce(n):new e.constructor(n);return e.copy(o),o}(l,!0)):f?(v=!1,d=Be(l,!0)):d=[]:function(e){if(!C(e)||"[object Object]"!=_(e))return!1;var t=Ne(e);if(null===t)return!0;var n=Je.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Qe.call(n)==et}(l)||Re(l)?(d=s,Re(s)?d=yt(s):w(s)&&!Q(s)||(d=function(e){return"function"!=typeof e.constructor||Ae(e)?{}:Te(Ne(e))}(l))):v=!1}v&&(a.set(l,d),r(d,l,o,i,a),a.delete(l)),xe(e,n,d)}}function kt(e,t,n,o,r){e!==t&&Se(t,(function(i,a){if(r||(r=new ye),w(i))wt(e,t,a,n,kt,o,r);else{var s=o?o(ct(e,a),i,a+"",e,t,r):void 0;void 0===s&&(s=i),xe(e,a,s)}}),bt)}function Et(e){return e}function xt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Pt=Math.max;var St=ke?function(e,t){return ke(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Et,Mt=St,Ot=Date.now;var _t=function(e){var t=0,n=0;return function(){var o=Ot(),r=16-(o-n);if(n=o,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Mt),Ct=_t;function zt(e,t){return Ct(function(e,t,n){return t=Pt(void 0===t?e.length-1:t,0),function(){for(var o=arguments,r=-1,i=Pt(o.length-t,0),a=Array(i);++r<i;)a[r]=o[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=o[r];return s[t]=n(a),xt(e,this,s)}}(e,t,Et),e+"")}function Bt(e,t,n){if(!w(n))return!1;var o=typeof t;return!!("number"==o?Fe(n)&&pt(t,n.length):"string"==o&&t in n)&&X(n[t],e)}var jt,Tt=(jt=function(e,t,n){kt(e,t,n)},zt((function(e,t){var n=-1,o=t.length,r=o>1?t[o-1]:void 0,i=o>2?t[2]:void 0;for(r=jt.length>3&&"function"==typeof r?(o--,r):void 0,i&&Bt(t[0],t[1],i)&&(r=o<3?void 0:r,o=1),e=Object(e);++n<o;){var a=t[n];a&&jt(e,a,n,r)}return e})));function It(){return{view:{scalingObjects:!1,panEnabled:!0,zoomEnabled:!0,minZoomLevel:.1,maxZoomLevel:64,doubleClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,autoPanAndZoomOnLoad:"center-content",autoPanOnResize:!0,layoutHandler:new G,onSvgPanZoomInitialized:void 0,grid:{visible:!1,interval:10,thickIncrements:5,line:{color:"#e0e0e0",width:1,dasharray:1},thick:{color:"#cccccc",width:1,dasharray:0}}},node:c((e=>({normal:{type:"circle",radius:16,width:32,height:32,borderRadius:4,color:"#4466cc",strokeWidth:0,strokeColor:"#000000",strokeDasharray:0},hover:{type:t=>s.value(e.normal.type,t),radius:t=>{var n;return(null!=(n=s.value(e.normal.radius,t))?n:0)+2},width:t=>{var n;return(null!=(n=s.value(e.normal.width,t))?n:0)+2},height:t=>{var n;return(null!=(n=s.value(e.normal.height,t))?n:0)+2},borderRadius:t=>{var n;return null!=(n=s.value(e.normal.borderRadius,t))?n:0},strokeWidth:t=>s.value(e.normal.strokeWidth,t),strokeColor:t=>s.value(e.normal.strokeColor,t),strokeDasharray:t=>s.value(e.normal.strokeDasharray,t),color:"#3355bb"},selected:void 0,draggable:!0,selectable:!1,label:{visible:!0,fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,direction:l.SOUTH,text:"name"},focusring:{visible:!0,width:4,padding:3,color:"#eebb00"},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0}))),edge:c((e=>({normal:{width:2,color:"#4466cc",dasharray:0,linecap:"butt",animate:!1,animationSpeed:50},hover:{width:t=>s.value(e.normal.width,t)+1,color:"#3355bb",dasharray:t=>s.value(e.normal.dasharray,t),linecap:t=>s.value(e.normal.linecap,t),animate:t=>s.value(e.normal.animate,t),animationSpeed:t=>s.value(e.normal.animationSpeed,t)},selected:{width:t=>s.value(e.normal.width,t)+1,color:"#dd8800",dasharray:t=>{const n=s.value(e.normal.width,t);return`${1.5*n} ${2*n}`},linecap:t=>s.value(e.normal.linecap,t),animate:t=>s.value(e.normal.animate,t),animationSpeed:t=>s.value(e.normal.animationSpeed,t)},selectable:!1,gap:3,type:"straight",marker:{source:{type:"none",width:5,height:5,margin:-1,units:"strokeWidth",color:null},target:{type:"none",width:5,height:5,margin:-1,units:"strokeWidth",color:null}},margin:null,summarize:(e,t)=>"curve"!=t.edge.type&&null,summarized:{label:{fontSize:10,lineHeight:1,color:"#4466cc"},shape:{type:"rect",radius:6,width:12,height:12,borderRadius:3,color:"#ffffff",strokeWidth:1,strokeColor:"#4466cc",strokeDasharray:void 0},stroke:{width:5,color:"#4466cc",dasharray:void 0,linecap:void 0,animate:!1,animationSpeed:50}},keepOrder:"clock",label:{fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,padding:4},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0}}))),path:c((e=>({visible:!1,clickable:!1,hoverable:!1,curveInNode:!1,end:"centerOfNode",margin:0,path:t.reactive({width:6,color:e=>{const t=["#d5000088","#c5116288","#aa00ff88","#6200ea88","#304ffe88","#2962ff88","#0091ea88","#00b8d488","#00bfa588","#00c85388","#64dd1788","#aeea0088","#ffd60088","#ffab0088","#ff6d0088","#dd2c0088"],n=e.edges.map((e=>e.split("").reduce(((e,t)=>(e=(e<<5)-e+t.charCodeAt(0))&e),0))).reduce(((e,t)=>e+t),0);return t[Math.abs(n)%t.length]},dasharray:void 0,linecap:"round",linejoin:"round",animate:!1,animationSpeed:50}),normal:{width:t=>s.value(e.path.width,t),color:t=>s.value(e.path.color,t),dasharray:t=>s.value(e.path.dasharray,t),linecap:t=>s.value(e.path.linecap,t),linejoin:t=>s.value(e.path.linejoin,t),animate:t=>s.value(e.path.animate,t),animationSpeed:t=>s.value(e.path.animationSpeed,t)},hover:{width:t=>s.value(e.normal.width,t)+2,color:t=>s.value(e.normal.color,t),dasharray:t=>s.value(e.normal.dasharray,t),linecap:t=>s.value(e.normal.linecap,t),linejoin:t=>s.value(e.normal.linejoin,t),animate:t=>s.value(e.normal.animate,t),animationSpeed:t=>s.value(e.normal.animationSpeed,t)},selected:{width:t=>s.value(e.normal.width,t)+2,color:t=>s.value(e.normal.color,t),dasharray:"6 12",linecap:t=>s.value(e.normal.linecap,t),linejoin:t=>s.value(e.normal.linejoin,t),animate:t=>s.value(e.normal.animate,t),animationSpeed:t=>s.value(e.normal.animationSpeed,t)},selectable:!1,zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0})))}}const Nt=Symbol("style");function Zt(e){return r(t.inject(Nt),`Configs(${e})`)[e]}function At(){return Zt("node")}function Lt(){return Zt("edge")}function Dt(){return Zt("path")}let Vt=1;function $t(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new be;++t<n;)this.add(e[t])}function qt(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}$t.prototype.add=$t.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},$t.prototype.has=function(e){return this.__data__.has(e)};function Rt(e,t,n,o,r,i){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,v=!0,p=2&n?new $t:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var h=e[d],f=t[d];if(o)var m=a?o(f,h,d,t,e,i):o(h,f,d,e,t,i);if(void 0!==m){if(m)continue;v=!1;break}if(p){if(!qt(t,(function(e,t){if(a=t,!p.has(a)&&(h===e||r(h,e,n,o,i)))return p.push(t);var a}))){v=!1;break}}else if(h!==f&&!r(h,f,n,o,i)){v=!1;break}}return i.delete(e),i.delete(t),v}function Wt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,o){n[++t]=[o,e]})),n}function Ft(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Ht=k?k.prototype:void 0,Gt=Ht?Ht.valueOf:void 0;var Xt=Object.prototype.propertyIsEnumerable,Ut=Object.getOwnPropertySymbols,Yt=Ut?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,o=null==e?0:e.length,r=0,i=[];++n<o;){var a=e[n];t(a,n,e)&&(i[r++]=a)}return i}(Ut(e),(function(t){return Xt.call(e,t)})))}:function(){return[]},Kt=Ie(Object.keys,Object),Qt=Object.prototype.hasOwnProperty;function Jt(e){return Fe(e)?ft(e):function(e){if(!Ae(e))return Kt(e);var t=[];for(var n in Object(e))Qt.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}function en(e){return function(e,t,n){var o=t(e);return L(e)?o:function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}(o,n(e))}(e,Jt,Yt)}var tn=Object.prototype.hasOwnProperty;var nn=de(m,"DataView"),on=de(m,"Promise"),rn=de(m,"Set"),an=de(m,"WeakMap"),sn="[object Map]",ln="[object Promise]",cn="[object Set]",un="[object WeakMap]",dn="[object DataView]",vn=oe(nn),pn=oe(ve),hn=oe(on),fn=oe(rn),mn=oe(an),gn=_;(nn&&gn(new nn(new ArrayBuffer(1)))!=dn||ve&&gn(new ve)!=sn||on&&gn(on.resolve())!=ln||rn&&gn(new rn)!=cn||an&&gn(new an)!=un)&&(gn=function(e){var t=_(e),n="[object Object]"==t?e.constructor:void 0,o=n?oe(n):"";if(o)switch(o){case vn:return dn;case pn:return sn;case hn:return ln;case fn:return cn;case mn:return un}return t});var bn=gn,yn="[object Arguments]",wn="[object Array]",kn="[object Object]",En=Object.prototype.hasOwnProperty;function xn(e,t,n,o,r,i){var a=L(e),s=L(t),l=a?wn:bn(e),c=s?wn:bn(t),u=(l=l==yn?kn:l)==kn,d=(c=c==yn?kn:c)==kn,v=l==c;if(v&&Ue(e)){if(!Ue(t))return!1;a=!0,u=!1}if(v&&!u)return i||(i=new ye),a||lt(e)?Rt(e,t,n,o,r,i):function(e,t,n,o,r,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new ze(e),new ze(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return X(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Wt;case"[object Set]":var l=1&o;if(s||(s=Ft),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;o|=2,a.set(e,t);var u=Rt(s(e),s(t),o,r,i,a);return a.delete(e),u;case"[object Symbol]":if(Gt)return Gt.call(e)==Gt.call(t)}return!1}(e,t,l,n,o,r,i);if(!(1&n)){var p=u&&En.call(e,"__wrapped__"),h=d&&En.call(t,"__wrapped__");if(p||h){var f=p?e.value():e,m=h?t.value():t;return i||(i=new ye),r(f,m,n,o,i)}}return!!v&&(i||(i=new ye),function(e,t,n,o,r,i){var a=1&n,s=en(e),l=s.length;if(l!=en(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:tn.call(t,u)))return!1}var d=i.get(e),v=i.get(t);if(d&&v)return d==t&&v==e;var p=!0;i.set(e,t),i.set(t,e);for(var h=a;++c<l;){var f=e[u=s[c]],m=t[u];if(o)var g=a?o(m,f,u,t,e,i):o(f,m,u,e,t,i);if(!(void 0===g?f===m||r(f,m,n,o,i):g)){p=!1;break}h||(h="constructor"==u)}if(p&&!h){var b=e.constructor,y=t.constructor;b==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,n,o,r,i))}function Pn(e,t,n,o,r){return e===t||(null==e||null==t||!C(e)&&!C(t)?e!=e&&t!=t:xn(e,t,n,o,Pn,r))}function Sn(e,t){return Pn(e,t)}function Mn(e){return Object.entries(e)}function On(e,t){const n=new Set(Object.keys(e));Mn(t).forEach((([t,o])=>{Sn(e[t],o)||(e[t]=o),n.delete(t)})),n.forEach((t=>delete e[t]))}function _n(e,n,r){const i=o({edgeLayoutPoints:{},edgeGroups:{},summarizedEdges:{}});return t.watchEffect((()=>{const{edgeLayoutPoints:t,edgeGroups:o}=function(e,t,n){const o={},r={},i={};for(const[s,l]of Object.entries(n)){if(!(l.source in t)||!(l.target in t))continue;const e=[l.source,l.target].sort().join("<=>"),n=i[e]||{};n[s]=l,i[e]=n}const a=e.edge.gap instanceof Function?e.edge.gap:(t,n)=>e.edge.gap;for(const[l,c]of Object.entries(i)){const t=Object.keys(c).length;if(0==t)continue;const n=a(c,e),[i,u]=Object.entries(c)[0];if(1===t)o[i]={edge:u,pointInGroup:0,groupWidth:0},r[l]={edges:c,groupWidth:0,summarize:!1};else{let t=0;const i=Object.entries(c).map((([t,n])=>{let o=s.value(e.edge.normal.width,n);return isNaN(+o)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",t,o),o=1),o/2})),a=Object.entries(c).map((([e,o],r)=>(r>0&&(t+=i[r-1]+n+i[r]),[e,o,t]))),u=t;a.forEach((([e,t,n])=>{o[e]={edge:t,pointInGroup:n,groupWidth:u}})),r[l]={edges:c,groupWidth:u,summarize:!1}}}return{edgeLayoutPoints:o,edgeGroups:r}}(r,e.value,n.value);On(i.edgeLayoutPoints,t),On(i.edgeGroups,o)})),t.watchEffect((()=>{const t={};for(const[n,{edges:o,groupWidth:a}]of Object.entries(i.edgeGroups)){let s=!1;if(0==a)s=!1;else if(r.edge.summarize instanceof Function){const t=r.edge.summarize(o,r);s=null===t?Cn(e.value,o,r,a):t}else s=!!r.edge.summarize&&Cn(e.value,o,r,a);i.edgeGroups[n].summarize=s,s&&Object.keys(o).forEach((e=>t[e]=!0))}On(i.summarizedEdges,t)})),i}function Cn(e,t,n,o){if(1===Object.entries(t).length)return!1;return o>Math.min(...Object.values(t).flatMap((t=>[e[t.source],e[t.target]])).filter((e=>e)).map((e=>{const t=s.values(n.node.normal,e);return"circle"===t.type?2*t.radius:Math.min(t.width,t.height)})))}function zn(e,t,n,o,r,i,a){var s,l,c,u,d,v,p,h;let f,m,g,b;return e.source<e.target?[f,m,g,b]=Bn(null!=(s=null==t?void 0:t.x)?s:0,null!=(l=null==t?void 0:t.y)?l:0,null!=(c=null==n?void 0:n.x)?c:0,null!=(u=null==n?void 0:n.y)?u:0,o,r,i,a):[g,b,f,m]=Bn(null!=(d=null==n?void 0:n.x)?d:0,null!=(v=null==n?void 0:n.y)?v:0,null!=(p=null==t?void 0:t.x)?p:0,null!=(h=null==t?void 0:t.y)?h:0,o,r,i,a),{p1:{x:f,y:m},p2:{x:g,y:b}}}function Bn(e,t,n,o,r,i,a,s){const l=n-e,c=o-t;let u=(i/2-a)*r;if(0!==u&&"clock"!==s){const r=Math.atan2(o-t,n-e);if("vertical"===s){const e=Math.PI/2;(r<-e||r>=e)&&(u*=-1)}else"horizontal"===s&&r<0&&(u*=-1)}if(0===l){const r=c<0?-1:1;return[e+u*r,t,n+u*r,o]}if(0===c){const r=l<0?1:-1;return[e,t+u*r,n,o+u*r]}{const r=-1/(c/l);c<0&&(u=-u);const i=u/Math.sqrt(1+Math.pow(r,2));return[e+i,t+i*r,n+i,o+i*r]}}function jn(e,t,n){return n||(n={x:0,y:0}),n.x=e.x+t.x,n.y=e.y+t.y,n}function Tn(e,t,n){return n||(n={x:0,y:0}),n.x=e.x-t.x,n.y=e.y-t.y,n}function In(e,t,n){return n||(n={x:0,y:0}),n.x=e.x*t.x,n.y=e.y*t.y,n}function Nn(e,t,n){return n||(n={x:0,y:0}),n.x=e.x*t,n.y=e.y*t,n}function Zn(e,t,n){return n||(n={x:0,y:0}),n.x=e.x/t.x,n.y=e.y/t.y,n}function An(e,t){return e.x*t.x+e.y*t.y}function Ln(e,t){return e.x*t.y-e.y*t.x}function Dn(e){return e.x*e.x+e.y*e.y}function Vn(e){return Math.sqrt(Dn(e))}function $n(e,t){const n=e.x-t.x,o=e.y-t.y;return n*n+o*o}function qn(e,t){return Math.sqrt($n(e,t))}function Rn(e,t){t||(t={x:0,y:0});const n=Vn(e);return 0===n?(t.x=1,t.y=0):Zn(e,{x:n,y:n},t),t}function Wn(e,t,n){n||(n={x:0,y:0});const o=e.x*Math.cos(t)-e.y*Math.sin(t),r=e.x*Math.sin(t)+e.y*Math.cos(t);return n.x=o,n.y=r,n}const Fn=180/Math.PI;function Hn(e){return Math.atan2(e.y,e.x)}function Gn(e){return Hn(e)*Fn}var Xn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",add:jn,subtract:Tn,multiply:In,multiplyScalar:Nn,divide:Zn,dot:An,cross:Ln,lengthSquared:Dn,length:Vn,distanceSquared:$n,distance:qn,normalize:Rn,rotate:Wn,angle:Hn,angleDegree:Gn});class Un{static fromArray(e){return new Un(e[0]||0,e[1]||0)}static fromObject(e){return new Un(e.x,e.y)}constructor(e,t){this.x=e,this.y=t}add(e){return jn(this,e,this)}subtract(e){return Tn(this,e,this)}multiply(e){return In(this,e,this)}multiplyScalar(e){return Nn(this,e,this)}divide(e){return Zn(this,e,this)}dot(e){return An(this,e)}cross(e){return Ln(this,e)}lengthSquared(){return Dn(this)}length(){return Vn(this)}distanceSquared(e){return $n(this,e)}distance(e){return qn(this,e)}normalize(){return Rn(this,this)}angle(){return Hn(this)}angleDegree(){return Gn(this)}rotate(e){return Wn(this,e,this)}isEqualTo(e){return this.x===e.x&&this.y===e.y}clone(){return new Un(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toArray(){return[this.x,this.y]}}var Yn=__spreadValues({Vector2D:Un},Xn);class Kn{constructor(e,t,n){this.source=e,this.target=t,this.v=n}static fromLinePosition(e){const t=Un.fromObject(e.p1),n=Un.fromObject(e.p2);return new Kn(t,n,Qn(t,n))}static fromPositions(e,t){const n=Un.fromObject(e),o=Un.fromObject(t);return new Kn(n,o,Qn(n,o))}static fromVectors(e,t){return new Kn(e,t,Qn(e,t))}}function Qn(e,t){return t.clone().subtract(e)}function Jn(e,t){return{p1:e,p2:t}}function eo(e,t,n){return function(e,t,n){const o=e.v.clone().normalize(),r=e.source.clone().add(o.clone().multiplyScalar(t)),i=e.target.clone().subtract(o.clone().multiplyScalar(n));let a=r.toObject(),s=i.toObject();const l=Qn(r,i);if(e.v.angle()*l.angle()<0){const e=new Un((a.x+s.x)/2,(a.y+s.y)/2),t=e.clone().add(o.multiplyScalar(.5));a=e.toObject(),s=t.toObject()}return{p1:a,p2:s}}(Kn.fromLinePosition(e),t,n)}function to(e){const t=e.v.clone().normalize().rotate(Math.PI/2);return Kn.fromVectors(e.target,e.target.clone().add(t))}function no(e,t){const n=t.v.clone().normalize(),o=t.source,r=Yn.subtract(e,o),i=n.dot(r);return o.clone().add(n.multiplyScalar(i))}function oo(e,t,n,o){if(!(Yn.lengthSquared(Yn.subtract(t,n))-o*o<=Math.pow(1,-10)))return null;const r=Kn.fromVectors(e,t),i=no(n,r),a=Yn.length(Yn.subtract(i,n));if(o<a)return null;if(o===a)return i;const s=Math.sqrt(__pow(o,2)-__pow(a,2)),l=r.v.normalize().multiplyScalar(s);return i.subtract(l)}function ro(e,t){const n=Yn.subtract(t.source,e.source),o=e.v,r=t.v,i=Yn.cross(n,o)/Yn.cross(o,r);return t.source.clone().add(r.clone().multiplyScalar(i))}function io(e,t,n,o,r){const i=e,a=n.clone().subtract(i),s=a.length(),l=t+o;if(l<s)return null;const c=Math.abs(t-o);if(s<c)return null;if(s===l){const n=a.clone().normalize();return e.clone().add(n.multiplyScalar(t))}if(s===c){const n=a.clone().normalize(),r=t>o;return e.clone().add(n.multiplyScalar(r?t:-t))}const u=t,d=o,v=u*((__pow(s,2)+__pow(u,2)-__pow(d,2))/(2*s*u)),p=Math.sqrt(__pow(u,2)-__pow(v,2)),h=a.clone().normalize(),f=new Un(-h.y,h.x),m=h.clone().multiplyScalar(v),g=f.clone().multiplyScalar(p),b=e.clone().add(m).add(g),y=e.clone().add(m).subtract(g);return b.distance(r)<y.distance(r)?b:y}function ao(e,t,n,o){const r=Kn.fromPositions(e,t),i=(n.width+n.strokeWidth)/2*o,a=(n.height+n.strokeWidth)/2*o,s=n.borderRadius>0?(n.borderRadius+n.strokeWidth/2)*o:0,l=(r.v.angle()-Math.PI/2)%Math.PI,c=Math.PI/2-l%Math.PI,u=a*Math.abs(Math.tan(l)),d=i*Math.abs(Math.tan(c)),v=u<=i-s;if(v||d<=a-s||0===s)return v?Math.sqrt(__pow(a,2)+__pow(u,2)):Math.sqrt(__pow(i,2)+__pow(d,2));{const e=t.x-i+s,n=t.y-a+s,o=t.x+i-s,l=t.y+a-s,c=[new Un(e,n),new Un(o,n),new Un(o,l),new Un(e,l)][Math.floor((r.v.angleDegree()+360)%360/90)],u=oo(r.source,no(c,r),c,s);return u?Qn(u,r.target).length():Qn(c,r.target).length()+s}}function so(e,t,n,o,r){const i=Kn.fromLinePosition(e),a=i.v.clone().normalize(),s=0===o?i.source:i.source.clone().add(a.clone().multiplyScalar(o*r)),l=0===o?i.target:i.target.clone().subtract(a.clone().multiplyScalar(o*r)),c=(t.width/2+n)*r,u=new Un(-a.y,a.x).multiplyScalar(c);let d=Yn.subtract(s,u),v=Yn.add(s,u),p=Yn.subtract(l,u),h=Yn.add(l,u);const f=i.v.angleDegree();return(f<-90||f>=90)&&([d,v]=[v,d],[p,h]=[h,p]),{source:{above:d,below:v},target:{above:p,below:h}}}function lo(e,t,n){const{x:o,y:r}=e,i=o-t.x,a=r-t.y;return{x:i*Math.cos(n)-a*Math.sin(n)+t.x,y:i*Math.sin(n)+a*Math.cos(n)+t.y}}function co(e){return e>0?-(2*Math.PI-e):2*Math.PI+e}function uo(e,t,n,o){const r=[],i=Kn.fromVectors(t,e),a=Kn.fromVectors(t,n);let s=vo(i,a);o*s<0&&(s=co(s));const l=Un.fromObject(lo(e,t,-s/2)),c=Kn.fromVectors(t,l),u=to(c),d=vo(i,c);let v=to(i);if(Math.abs(d)<Math.PI/2){const e=ro(v,u);r.push(e)}else{const e=Un.fromObject(lo(l,t,d/2)),n=to(Kn.fromVectors(t,Un.fromObject(e))),o=ro(v,n),i=ro(n,u);r.push(o,e,i)}r.push(l);const p=vo(a,c);if(v=to(a),Math.abs(p)<Math.PI/2){const e=ro(v,u);r.push(e)}else{const e=Un.fromObject(lo(l,t,p/2)),n=to(Kn.fromVectors(t,Un.fromObject(e))),o=ro(u,n),i=ro(n,v);r.push(o,e,i)}return r}function vo(e,t){return Math.atan2(e.v.y*t.v.x-e.v.x*t.v.y,e.v.x*t.v.x+e.v.y*t.v.y)}function po(e){const{markers:t,referenceCount:n}=e;function o(e){e&&function(e){var o;const r=null!=(o=n[e])?o:0;r&&(r-1==0?(delete t[e],delete n[e]):n[e]=r-1)}(e)}return{makeMarker:function(e,r,i,a,s){if("none"===e.type)return void o(i);if("custom"===e.type)return o(i),e.customId;const l=function(e,t,n){var o;return __spreadProps(__spreadValues({},e),{color:null!=(o=e.color)?o:n,isSource:t})}(e,r,a),c=function(e,t){const n=(i=e.color,void 0===typeof btoa?Buffer.from(i).toString("base64").replaceAll("=",""):btoa(i).replaceAll("=","")),o=e.isSource?"L":"R",r="strokeWidth"===e.units?"rel":"abs";var i;return`marker_${t}_${e.type}_${e.width}_${e.height}_${e.margin}_${n}_${o}_${r}`}(l,s);return c===i||(o(i),function(e,o){var r;const i=null!=(r=n[e])?r:0;n[e]=i+1,i||(t[e]=o)}(c,l)),c},clearMarker:o}}function ho(e,n,o,r,i,a,s){const l=t.reactive({});t.watch((()=>new Set(Object.keys(e.value))),((t,s)=>{s||(s=new Set([]));for(const o of t)s.has(o)||fo(e,l,o,!1,n,i);for(const e of s)t.has(e)||(o.delete(e),r.delete(e),null==a||a(e,l[e]),delete l[e])}),{immediate:!0}),t.watch((()=>[...o]),((e,t)=>{const n=t?e.filter((e=>!t.includes(e))):e,o=t?t.filter((t=>!e.includes(t))):[];n.forEach((e=>{const t=l[e];t&&!t.selected&&(t.selected=!0)})),o.forEach((e=>{const t=l[e];t&&t.selected&&(t.selected=!1)}))}),{immediate:!0}),t.watch((()=>[...r]),((e,t)=>{const n=e.filter((e=>!t.includes(e))),o=t.filter((t=>!e.includes(t)));n.forEach((e=>{const t=l[e];t&&!t.hovered&&(t.hovered=!0)})),o.forEach((e=>{const t=l[e];t&&t.hovered&&(t.hovered=!1)}))}));const c=t.computed((()=>{const e=s?s():Object.values(l);return n.zOrder.enabled?function(e,t,n,o){return t.bringToFrontOnHover&&t.bringToFrontOnSelected?e.sort(((e,t)=>{const r=n.has(e.id);if(r!=n.has(t.id))return r?1:-1;const i=o.has(e.id);return i!=o.has(t.id)?i?1:-1:e.zIndex-t.zIndex})):t.bringToFrontOnHover?e.sort(((e,t)=>{const o=n.has(e.id);return o!=n.has(t.id)?o?1:-1:e.zIndex-t.zIndex})):t.bringToFrontOnSelected?e.sort(((e,t)=>{const n=o.has(e.id);return n!=o.has(t.id)?n?1:-1:e.zIndex-t.zIndex})):e.sort(((e,t)=>e.zIndex-t.zIndex))}(e,n.zOrder,r,o):e}));return{states:l,zOrderedList:c}}function fo(e,n,o,r,i,a){const l={id:o,selected:r,hovered:!1,selectable:t.computed((()=>e.value[o]?s.value(i.selectable,e.value[o]):t.unref(l.selectable))),zIndex:t.computed((()=>e.value[o]?s.value(i.zOrder.zIndex,e.value[o]):t.unref(l.zIndex)))};n[o]=l,a(e,o,n[o])}function mo(e,t,n){return{objects:e,selected:t,hovered:n}}const go=Symbol("states"),bo={type:"none",width:0,height:0,margin:0,units:"strokeWidth",color:null};function yo(e,n,o,r,i,a,l){const c=t.reactive({}),{states:u,zOrderedList:d}=ho(e.objects,r.node,e.selected,e.hovered,((e,n,o)=>{!function(e,n,o,r){o.shape=t.computed((()=>e.value[n]?function(e,t,n,o){return n&&o.hover?s.values(o.hover,e):Eo(e,t,o)}(e.value[n],o.selected,o.hovered,r):t.unref(o.shape))),o.staticShape=t.computed((()=>e.value[n]?Eo(e.value[n],o.selected,r):t.unref(o.staticShape))),o.label=t.computed((()=>e.value[n]?s.values(r.label,e.value[n]):t.unref(o.label))),o.labelText=t.computed((()=>{var i,a;return r.label.text instanceof Function?t.unref(o.label).text:e.value[n]?null!=(a=null==(i=e.value[n])?void 0:i[t.unref(o.label).text])?a:"":t.unref(o.labelText)})),o.draggable=t.computed((()=>e.value[n]?s.value(r.draggable,e.value[n]):t.unref(o.draggable)))}(e,n,o,r.node)}),((e,t)=>{delete i.nodes[e]})),v=Vt++,p=_n(e.objects,n.objects,r),h=t.ref([]),{states:f,zOrderedList:m}=ho(n.objects,r.edge,n.selected,n.hovered,((e,n,o)=>{!function(e,n,o,r,i,a,l,c,u,d){const{makeMarker:v,clearMarker:p}=po(i);Object.assign(o,{origin:{p1:{x:0,y:0},p2:{x:0,y:0}},labelPosition:{p1:{x:0,y:0},p2:{x:0,y:0}},position:{p1:{x:0,y:0},p2:{x:0,y:0}}});const h=t.computed((()=>{const t=e.value[n],i=function(e,t,n,o){return t?s.values(o.selected,e):n&&o.hover?s.values(o.hover,e):s.values(o.normal,e)}(t,o.selected,o.hovered,r);isNaN(+i.width)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",n,i.width),i.width=1),void 0!==i.color&&null!==i.color||(console.warn("[v-network-graph] Edge color is invalid value. id=[%s] value=[%s]",n,i.color),i.color="#000000");let a=s.value(r.normal.width,t);isNaN(+a)&&(a=1);return{stroke:i,normalWidth:a,source:xo(s.values(r.marker.source,[t,i])),target:xo(s.values(r.marker.target,[t,i]))}}));o.line=h;const f=t.toRef(l.edgeLayoutPoints,n),m=t.toRef(l.summarizedEdges,n),g=t.watchEffect((()=>{var t,i,s;const l=e.value[n];if(!l)return;const d=c[null==l?void 0:l.source],v=c[null==l?void 0:l.target],p=null==(t=a[null==l?void 0:l.source])?void 0:t.staticShape,g=null==(i=a[null==l?void 0:l.target])?void 0:i.staticShape;if(!(d&&v&&p&&g))return;const b=function(e,t,n,o,r,i){return e?t?zn(e.edge,n,o,r,0,0,i):zn(e.edge,n,o,r,e.groupWidth,e.pointInGroup,i):{p1:{x:0,y:0},p2:{x:0,y:0}}}(f.value,null!=(s=m.value)&&s,d,v,u.value,r.keepOrder),[y,w]=function(e,t,n,o){let r,i;return r="circle"===n.type?n.radius+n.strokeWidth/2:ao(t,e,n,1),i="circle"===o.type?o.radius+o.strokeWidth/2:ao(e,t,o,1),[r,i]}(d,v,p,g),k=u.value;o.labelPosition=eo(b,y*k,w*k);let E=0,x=0;const P=h.value;if("none"!==P.source.type){const e=P.source;E=e.margin+e.width,"strokeWidth"===e.units&&(E*=P.normalWidth)}if("none"!==P.target.type){const e=P.target;x=e.margin+e.width,"strokeWidth"===e.units&&(x*=P.normalWidth)}null===r.margin||void 0===r.margin?"none"===P.source.type&&"none"===P.target.type||(E+=y,x+=w):(E+=r.margin+y,x+=r.margin+w);if("straight"===r.type)o.origin=b,o.curve=void 0,o.position=0===E&&0===x?o.origin:eo(o.origin,E*k,x*k);else{o.origin=Jn(d,v);const e=f.value?f.value.groupWidth/2-f.value.pointInGroup:0,[t,n]=function(e,t,n,o,r){const i=Kn.fromLinePosition(e),a=Kn.fromLinePosition(t),s=function(e){return new Un((e.p1.x+e.p2.x)/2,(e.p1.y+e.p2.y)/2)}(t),[l,c]=function(e,t,n){const o=e.x,r=e.y,i=t.x,a=t.y,s=n.x,l=n.y,c=o-i,u=r-a,d=s-i,v=l-a,p=(v*(c*(o+i)+u*(r+a))-u*(d*(s+i)+v*(l+a)))/(2*c*v-2*u*d),h=(-d*(c*(o+i)+u*(r+a))+c*(d*(s+i)+v*(l+a)))/(2*c*v-2*u*d),f=Math.sqrt(Math.pow(o-p,2)+Math.pow(r-h,2));return[new Un(p,h),f]}(i.source,i.target,s);let u,d;if(0===n)return u=0===o&&0===r?e:eo(e,o,r),[u,d];const v=Kn.fromVectors(l,s),p=vo(Kn.fromVectors(l,i.source),v);if(0===o&&0===r)u=e;else{let e=o/c,t=r/c;p>0&&(e*=-1,t*=-1),u=Jn(lo(i.source,l,e),lo(i.target,l,-t));let n=vo(Kn.fromVectors(l,i.source),Kn.fromVectors(l,i.target)),v=vo(Kn.fromPositions(l,u.p1),Kn.fromPositions(l,u.p2));if(p*n<0&&(n=co(n),p*v<0&&(v=co(v))),n*v<0){const e=s.clone().add(a.v.normalize().multiplyScalar(.5));return u=Jn(s,e),[u,d]}}const[h,f]=function(e){return[Un.fromObject(e.p1),Un.fromObject(e.p2)]}(u),m=uo(h,l,f,p).map((e=>e.toObject()));return d={center:s,theta:p,circle:{center:l,radius:c},control:m},[u,d]}(o.origin,b,e,E*k,x*k);o.position=t,o.curve=n}})),b=t.watchEffect((()=>{e.value[n]&&(o.sourceMarkerId=v(h.value.source,!0,o.sourceMarkerId,h.value.stroke.color,d),o.targetMarkerId=v(h.value.target,!1,o.targetMarkerId,h.value.stroke.color,d))}));o.stopWatchHandle=()=>{g(),b(),p(o.sourceMarkerId),p(o.targetMarkerId)}}(e,n,o,r.edge,a,u,p,i.nodes,l,v)}),((e,t)=>{var n;null==(n=t.stopWatchHandle)||n.call(t)}),(()=>h.value));t.watchEffect((()=>{h.value=function(e,t){return Object.entries(e).map((([e,n])=>{var o;return n.summarize?{id:null!=(o=Object.keys(n.edges)[0])?o:e,summarized:!0,key:e,group:n,zIndex:Object.keys(n.edges).map((e=>{var n,o;return null!=(o=null==(n=t[e])?void 0:n.zIndex)?o:0})).reduce(((e,t)=>Math.max(e,t)))}:Object.entries(n.edges).map((([e,n])=>{var o,r;return{id:e,summarized:!1,key:e,edge:n,zIndex:null!=(r=null==(o=t[e])?void 0:o.zIndex)?r:0}}))})).flat()}(p.edgeGroups,f)})),t.watch(p.edgeGroups,(e=>function(e,n,o){const r=n.edgeGroups;Object.entries(r).filter((([t,n])=>n.summarize&&!(t in e))).forEach((([n,r])=>{const i={stroke:void 0};i.stroke=t.computed((()=>s.values(o.edge.summarized.stroke,r.edges))),e[n]=i})),Object.keys(e).forEach((t=>{var o;(null==(o=n.edgeGroups[t])?void 0:o.summarize)||delete e[t]}))}(c,p,r)),{immediate:!0});const{states:g,zOrderedList:b}=ho(o.objects,r.path,o.selected,o.hovered,((e,o,i)=>{const a=i;a.clickable=t.computed((()=>!!e.value[o]&&s.value(r.path.clickable,e.value[o]))),a.hoverable=t.computed((()=>!!e.value[o]&&s.value(r.path.hoverable,e.value[o]))),a.path=e.value[o],a.edges=t.computed((()=>e.value[o].edges.map((e=>({edgeId:e,edge:n.objects.value[e]}))).filter((e=>e.edge))))})),y={nodeStates:u,edgeStates:f,edgeGroupStates:p,summarizedEdgeStates:c,pathStates:g,layouts:i,nodeZOrderedList:d,edgeZOrderedList:m,pathZOrderedList:b};return t.provide(go,y),y}function wo(e){return e.summarized}function ko(){return r(t.inject(go),"states")}function Eo(e,t,n){return t&&n.selected?s.values(n.selected,e):s.values(n.normal,e)}function xo(e){return"none"===e.type?bo:e}class Po{static valueOf(e){return Array.from(e.values())}}function So(e){return"touch"===e?6:3}function Mo(e,t,n,o){let r,i,a=e.get(t);if(a)a.id!==n&&(a=void 0);else{const t=Array.from(e.entries()).find((([e,t])=>t.id===n));if(t){const[n,o]=t;e.delete(n),a=o}}return[a,r,i]=Oo(a,o,n),e.set(t,a),[r,i]}function Oo(e,t,n){const o=Date.now();e&&o-e.lastTime<=500?(e.count++,e.lastTime=o):e={count:1,lastTime:o,id:n};const r={view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,button:t.button,buttons:t.buttons,detail:e.count};let i,a;return t instanceof PointerEvent?(Object.assign(r,{pointerId:t.pointerId,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,pointerType:t.pointerType,isPrimary:t.isPrimary}),i=new PointerEvent("click",r),2===e.count&&(a=new PointerEvent("dblclick",r))):(i=new MouseEvent("click",r),2===e.count&&(a=new MouseEvent("dblclick",r))),[e,i,a]}function _o(e){const t=Date.now();Array.from(e.entries()).filter((([e,n])=>t-n.lastTime>500)).map((([t,n])=>e.delete(t)))}function Co(e,t){var n;const o=null!=(n=e[t])?n:{x:0,y:0};return __spreadValues({},o)}function zo(e,t){return e instanceof Array?{edges:e,event:t,summarized:!0}:{edge:e,edges:[e],event:t,summarized:!1}}const Bo=Symbol("mouseEventHandlers");function jo(e,n,o,r,i,a,s,l,c,u,d,v,p,h,f){const m={selectionMode:t.ref("container"),viewMode:t.ref("default")};s.size>0?m.selectionMode.value="node":l.size>0?m.selectionMode.value="edge":c.size>0&&(m.selectionMode.value="path"),t.watch(m.viewMode,(e=>{f.emit("view:mode",e)})),function(e,n,o,r){const i={moveCounter:0,pointerCounter:0,clickState:void 0},a={pointermove:function(e){i.moveCounter++},pointerup:l,pointercancel:l};function s(e){i.moveCounter=0,0===i.pointerCounter&&Mn(a).forEach((([e,t])=>{document.addEventListener(e,t,{passive:!0})})),i.pointerCounter++}function l(t){if(i.pointerCounter--,i.pointerCounter<=0){i.pointerCounter=0,Mn(a).forEach((([e,t])=>{document.removeEventListener(e,t)}));const o=So(t.pointerType);if(i.moveCounter<=o){if(t.shiftKey&&"container"!==n.selectionMode.value)return;n.selectionMode.value="container";const[o,r,a]=Oo(i.clickState,t,"view");i.clickState=o,e.value.dispatchEvent(r),a&&e.value.dispatchEvent(a)}}}function c(e){e.isTrusted||(e.stopPropagation(),r.emit("view:click",{event:e}))}function u(e){e.isTrusted||(e.stopPropagation(),r.emit("view:dblclick",{event:e}))}function d(t){r.emit("view:contextmenu",{event:t}),i.pointerCounter>0&&(i.pointerCounter=0,Mn(a).forEach((([t,n])=>{var o;null==(o=e.value)||o.removeEventListener(t,n)})))}const v=e=>{e.preventDefault()};t.onMounted((()=>{const t=e.value;t&&(t.addEventListener("pointerdown",s,{passive:!0}),t.addEventListener("click",c,{passive:!1}),t.addEventListener("dblclick",u,{passive:!1}),t.addEventListener("contextmenu",d,{passive:!1}),o.value&&t.addEventListener("wheel",v,{passive:!1}))})),t.onUnmounted((()=>{const t=e.value;t&&(t.removeEventListener("pointerdown",s),t.removeEventListener("click",c),t.removeEventListener("dblclick",u),t.removeEventListener("contextmenu",d),o.value&&t.removeEventListener("wheel",v))})),t.watch(o,((t,n)=>{const o=e.value;o&&t!==n&&(t?o.addEventListener("wheel",v,{passive:!1}):o.removeEventListener("wheel",v))}))}(e,m,h,f);const g=__spreadValues(__spreadValues(__spreadValues({selectedNodes:s,hoveredNodes:u,selectedEdges:l,hoveredEdges:d,selectedPaths:c,hoveredPaths:v},function(e,n,o,r,i,a,s){const l={pointers:new Map,follow:{followedPointerId:-1,nodeBasePositions:{}},hoveredNodesPre:new Set,clicks:new Map},c={pointermove:function(t){var n;t.stopPropagation();const o=l.pointers.get(t.pointerId);if(!o)return;o.latestPosition={x:t.pageX,y:t.pageY},o.moveCounter++;const r=So(t.pointerType);if(o.moveCounter<=r)return;if(!(null==(n=e[o.nodeId])?void 0:n.draggable))return;if(o.moveCounter===r+1){const e=d(o,{pointerId:o.pointerId,pageX:o.dragBasePosition.x,pageY:o.dragBasePosition.y});s.emit("node:dragstart",e)}const i=d(o,t);s.emit("node:pointermove",i)},pointerup:function(t){var n,i,a;t.stopPropagation();const v=l.pointers.get(t.pointerId);if(!v)return;l.pointers.delete(t.pointerId);const p=v.nodeId,h=So(t.pointerType),f=v.moveCounter>h;if(f){if(null==(n=e[v.nodeId])?void 0:n.draggable){const e=d(v,t);s.emit("node:dragend",e),s.emit("node:pointerup",{node:p,event:t})}}else s.emit("node:pointerup",{node:p,event:t});if(!f){const[e,n]=Mo(l.clicks,v.pointerId,p,t);null==(i=v.eventTarget)||i.dispatchEvent(e),n&&(null==(a=v.eventTarget)||a.dispatchEvent(n))}0===l.pointers.size?(l.follow={followedPointerId:-1,nodeBasePositions:{}},Mn(c).forEach((([e,t])=>{document.removeEventListener(e,t)})),_o(l.clicks),o.viewMode.value="default"):u(v),r.clear(),l.hoveredNodesPre.forEach(r.add,r)},pointercancel:function(e){e.stopPropagation();let t=l.pointers.get(e.pointerId);if(t){for(t of l.pointers.values()){const n=t.nodeId,o=So(e.pointerType);if(t.moveCounter>o){const e=d(t,{pointerId:t.pointerId,pageX:t.latestPosition.x,pageY:t.latestPosition.y});s.emit("node:dragend",e)}s.emit("node:pointerup",{node:n,event:e})}l.pointers.clear(),l.follow={followedPointerId:-1,nodeBasePositions:{}},Mn(c).forEach((([e,t])=>{document.removeEventListener(e,t)})),o.viewMode.value="default"}}};function u(t){const o=l.follow.followedPointerId===t.pointerId,r=i.has(t.nodeId),a=!(t.pointerId in l.pointers);if(o&&a||o&&!r){const e=Po.valueOf(l.pointers).find((e=>i.has(e.nodeId)));if(!e)return void(l.follow={followedPointerId:-1,nodeBasePositions:{}});t=e,l.follow.followedPointerId=t.pointerId}else{const e=l.pointers.get(l.follow.followedPointerId);if(!e)return void(l.follow={followedPointerId:-1,nodeBasePositions:{}});t=e}if(o||r){const o=Po.valueOf(l.pointers).map((e=>e.nodeId));l.follow.nodeBasePositions=Object.fromEntries(Array.from(i).filter((e=>!o.includes(e))).filter((t=>{var n;return null==(n=e[t])?void 0:n.draggable})).map((e=>[e,Co(n,e)]))),t.dragBasePosition=__spreadValues({},t.latestPosition),t.nodeBasePosition=Co(n,t.nodeId)}}function d(e,t){const n=e.dragBasePosition.x-t.pageX,o=e.dragBasePosition.y-t.pageY,r=l.follow.followedPointerId==e.pointerId?__spreadValues({[e.nodeId]:e.nodeBasePosition},l.follow.nodeBasePositions):{[e.nodeId]:e.nodeBasePosition},i=a.value;return Object.fromEntries(Object.entries(r).map((([e,t])=>[e,{x:t.x-n/i,y:t.y-o/i}])))}return t.watch(i,(e=>{const t=l.pointers.get(l.follow.followedPointerId);t&&u(t),e.size>0&&"node"!==o.selectionMode.value?o.selectionMode.value="node":0===e.size&&"node"===o.selectionMode.value&&(o.selectionMode.value="container")})),t.watch(o.selectionMode,(e=>{"node"!==e&&i.clear()})),{handleNodePointerDownEvent:function(e,t){if(2==t.button)return;if(t.stopPropagation(),!["default","node"].includes(o.viewMode.value))return;0==l.pointers.size&&(o.viewMode.value="node",Mn(c).forEach((([e,t])=>{document.addEventListener(e,t)})));const r={pointerId:t.pointerId,nodeId:e,moveCounter:0,nodeBasePosition:Co(n,e),dragBasePosition:{x:t.pageX,y:t.pageY},latestPosition:{x:t.pageX,y:t.pageY},eventTarget:t.currentTarget};l.pointers.set(t.pointerId,r),i.has(e)&&(l.follow.followedPointerId<0?(l.follow.followedPointerId=t.pointerId,u(r)):delete l.follow.nodeBasePositions[r.nodeId]),s.emit("node:pointerdown",{node:e,event:t})},handleNodePointerOverEvent:function(e,t){l.hoveredNodesPre.add(e),l.pointers.size>0||(r.add(e),s.emit("node:pointerover",{node:e,event:t}))},handleNodePointerOutEvent:function(e,t){l.hoveredNodesPre.delete(e),l.pointers.size>0||(r.delete(e),s.emit("node:pointerout",{node:e,event:t}))},handleNodeClickEvent:function(t,n){var r,a;if(n.isTrusted)return;if(n.shiftKey&&!["container","node"].includes(o.selectionMode.value))return;o.selectionMode.value="node";const c=null!=(a=null==(r=e[t])?void 0:r.selectable)&&a;if(c){const e=Po.valueOf(l.pointers).filter((e=>i.has(e.nodeId))).length>0;n.shiftKey||e?i.has(t)?i.delete(t):"number"==typeof c&&i.size>=c||i.add(t):i.has(t)||(i.clear(),i.add(t))}s.emit("node:click",{node:t,event:n})},handleNodeDoubleClickEvent:function(e,t){t.isTrusted||s.emit("node:dblclick",{node:e,event:t})},handleNodeContextMenu:function(e,t){t.stopPropagation(),s.emit("node:contextmenu",{node:e,event:t})}}}(r,n,m,u,s,o,f)),function(e,n,o,r,i){const a={pointers:new Map,pointerPeekCount:0,clicks:new Map},s={pointerup:function(e){var t,o;e.stopPropagation();const r=a.pointers.get(e.pointerId);if(!r)return;a.pointers.delete(e.pointerId);const l=r.id;i.emit("edge:pointerup",zo(l,e));const[c,u]=Mo(a.clicks,r.pointerId,l instanceof Array?l.join(","):l,e);null==(t=r.eventTarget)||t.dispatchEvent(c),u&&(null==(o=r.eventTarget)||o.dispatchEvent(u)),0===a.pointers.size&&(a.pointerPeekCount=0,Mn(s).forEach((([e,t])=>{document.removeEventListener(e,t)})),_o(a.clicks),n.viewMode.value="default")},pointercancel:function(e){if(e.stopPropagation(),a.pointers.get(e.pointerId)){for(const t of a.pointers.values()){const n=t.id;i.emit("edge:pointerup",zo(n,e))}a.pointers.clear(),a.pointerPeekCount=0,Mn(s).forEach((([e,t])=>{document.removeEventListener(e,t)})),i.emit("view:mode","default")}}};function l(t,o){var s;if(o.isTrusted)return;if(o.shiftKey&&!["container","edge"].includes(n.selectionMode.value))return;n.selectionMode.value="edge";const l=t instanceof Array?t:[t],c=Po.valueOf(a.pointers).filter((e=>(e.id instanceof Array?e.id:[e.id]).every((e=>r.has(e))))).length>0;if(t instanceof Array)l.find((t=>{var n;return null==(n=e[t])?void 0:n.selectable}))&&(o.shiftKey||c?l.some((e=>r.has(e)))?l.forEach((e=>r.delete(e))):l.forEach((t=>{var n;const o=null==(n=e[t])?void 0:n.selectable;"number"==typeof o&&r.size>=o||r.add(t)})):(r.clear(),l.forEach((e=>r.add(e)))));else{const n=null==(s=e[t])?void 0:s.selectable;n&&(o.shiftKey||c?r.has(t)?r.delete(t):"number"==typeof n&&r.size>=n||r.add(t):r.has(t)||(r.clear(),r.add(t)))}i.emit("edge:click",zo(t,o))}function c(e,t){t.isTrusted||i.emit("edge:dblclick",zo(e,t))}return t.watch(r,(e=>{e.size>0&&"edge"!==n.selectionMode.value?n.selectionMode.value="edge":0===e.size&&"edge"===n.selectionMode.value&&(n.selectionMode.value="container")})),t.watch(n.selectionMode,(e=>{"edge"!==e&&r.clear()})),{handleEdgePointerDownEvent:function(e,t){if(2==t.button)return;if(t.stopPropagation(),!["default","edge"].includes(n.viewMode.value))return;0==a.pointers.size&&(n.viewMode.value="edge",Mn(s).forEach((([e,t])=>{document.addEventListener(e,t)})),a.pointerPeekCount=0),a.pointerPeekCount++;const o={pointerId:t.pointerId,id:e,eventTarget:t.currentTarget};a.pointers.set(t.pointerId,o),i.emit("edge:pointerdown",zo(e,t))},handleEdgePointerOverEvent:function(e,t){o.add(e),i.emit("edge:pointerover",zo(e,t))},handleEdgePointerOutEvent:function(e,t){o.delete(e),i.emit("edge:pointerout",zo(e,t))},handleEdgeClickEvent:l,handleEdgeDoubleClickEvent:c,handleEdgeContextMenu:function(e,t){t.stopPropagation(),i.emit("edge:contextmenu",zo(e,t))},handleEdgesPointerDownEvent:function(e,t){if(2==t.button)return;if(t.stopPropagation(),!["default","edge"].includes(n.viewMode.value))return;0==a.pointers.size&&(n.viewMode.value="edge",Mn(s).forEach((([e,t])=>{document.addEventListener(e,t)})),a.pointerPeekCount=0),a.pointerPeekCount++;const o={pointerId:t.pointerId,id:e,eventTarget:t.currentTarget};a.pointers.set(t.pointerId,o),i.emit("edge:pointerdown",zo(e,t))},handleEdgesPointerOverEvent:function(e,t){e.forEach((e=>o.add(e))),i.emit("edge:pointerover",zo(e,t))},handleEdgesPointerOutEvent:function(e,t){e.forEach((e=>o.delete(e))),i.emit("edge:pointerout",zo(e,t))},handleEdgesClickEvent:function(e,t){l(e,t)},handleEdgesDoubleClickEvent:function(e,t){c(e,t)},handleEdgesContextMenu:function(e,t){t.stopPropagation(),i.emit("edge:contextmenu",zo(e,t))}}}(i,m,d,l,f)),function(e,n,o,r,i,a){const s={pointers:new Map,pointerPeekCount:0,clicks:new Map};function l(t,n){var o,r;return i.value?{path:null!=(r=null==(o=e[t])?void 0:o.path)?r:t,event:n}:{path:t,event:n}}const c={pointerup:function(e){var t,o;const r=s.pointers.get(e.pointerId);if(!r)return;e.stopPropagation(),s.pointers.delete(e.pointerId);const i=r.id;a.emit("path:pointerup",l(i,e));const[u,d]=Mo(s.clicks,r.pointerId,i,e);null==(t=r.eventTarget)||t.dispatchEvent(u),d&&(null==(o=r.eventTarget)||o.dispatchEvent(d)),0===s.pointers.size&&(s.pointerPeekCount=0,Mn(c).forEach((([e,t])=>{document.removeEventListener(e,t)})),_o(s.clicks),n.viewMode.value="default")},pointercancel:function(e){if(s.pointers.get(e.pointerId)){e.stopPropagation();for(const t of s.pointers.values()){const n=t.id;a.emit("path:pointerup",l(n,e))}s.pointers.clear(),s.pointerPeekCount=0,Mn(c).forEach((([e,t])=>{document.removeEventListener(e,t)})),a.emit("view:mode","default")}}};return t.watch(r,(e=>{e.size>0&&"path"!==n.selectionMode.value?n.selectionMode.value="path":0===e.size&&"path"===n.selectionMode.value&&(n.selectionMode.value="container")})),t.watch(n.selectionMode,(e=>{"path"!==e&&r.clear()})),{handlePathPointerDownEvent:function(t,o){var r;if(!(null==(r=e[t])?void 0:r.clickable))return;if(2==o.button)return;if(o.stopPropagation(),!["default","path"].includes(n.viewMode.value))return;0==s.pointers.size&&(n.viewMode.value="path",Mn(c).forEach((([e,t])=>{document.addEventListener(e,t)})),s.pointerPeekCount=0),s.pointerPeekCount++;const i={pointerId:o.pointerId,id:t,eventTarget:o.currentTarget};s.pointers.set(o.pointerId,i),a.emit("path:pointerdown",l(t,o))},handlePathPointerOverEvent:function(t,n){var r;(null==(r=e[t])?void 0:r.hoverable)&&(o.add(t),a.emit("path:pointerover",l(t,n)))},handlePathPointerOutEvent:function(t,n){var r;(null==(r=e[t])?void 0:r.hoverable)&&(o.delete(t),a.emit("path:pointerout",l(t,n)))},handlePathClickEvent:function(t,o){var i,c,u;if(o.isTrusted)return;if(!(null==(i=e[t])?void 0:i.clickable))return;if(o.shiftKey&&!["container","path"].includes(n.selectionMode.value))return;n.selectionMode.value="path";const d=null!=(u=null==(c=e[t])?void 0:c.selectable)&&u;if(d){const e=Po.valueOf(s.pointers).filter((e=>r.has(e.id))).length>0;o.shiftKey||e?r.has(t)?r.delete(t):"number"==typeof d&&r.size>=d||r.add(t):r.has(t)||(r.clear(),r.add(t))}a.emit("path:click",l(t,o))},handlePathDoubleClickEvent:function(t,n){var o;n.isTrusted||(null==(o=e[t])?void 0:o.clickable)&&a.emit("path:dblclick",l(t,n))},handlePathContextMenu:function(t,n){var o;(null==(o=e[t])?void 0:o.clickable)&&(n.stopPropagation(),a.emit("path:contextmenu",l(t,n)))}}}(a,m,v,c,p,f));return t.provide(Bo,g),g}function To(){return r(t.inject(Bo),"mouseEventHandlers")}const Io=Symbol("emitter");function No(){const e={all:n=n||new Map,on:function(e,t){var o=n.get(e);o?o.push(t):n.set(e,[t])},off:function(e,t){var o=n.get(e);o&&(t?o.splice(o.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var o=n.get(e);o&&o.slice().map((function(e){e(t)})),(o=n.get("*"))&&o.slice().map((function(n){n(e,t)}))}};var n;return t.provide(Io,e),e}var Zo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ao={getGlobalThis:function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==Zo)return Zo;if(void 0!==this)return this;throw new Error("Unable to locate global `this`")},extend:function(e,t){for(var n in e=e||{},t)this.isObject(t[n])?e[n]=this.extend(e[n],t[n]):e[n]=t[n];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var t,n;if(this.isElement(e))t=e;else{if(!("string"==typeof e||e instanceof String))throw new Error("Provided selector is not an HTML object nor String");if(!(t=document.querySelector(e)))throw new Error("Provided selector did not find any elements. Selector: "+e)}if("svg"===t.tagName.toLowerCase())n=t;else if("object"===t.tagName.toLowerCase())n=t.contentDocument.documentElement;else{if("embed"!==t.tagName.toLowerCase())throw"img"===t.tagName.toLowerCase()?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");n=t.getSVGDocument().documentElement}return n},proxy:function(e,t){return function(){return e.apply(t,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,t){if(void 0===e.clientX||null===e.clientX)if(e.clientX=0,e.clientY=0,void 0!==e.touches&&e.touches.length){if(void 0!==e.touches[0].clientX)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(void 0!==e.touches[0].pageX){var n=t.getBoundingClientRect();e.clientX=e.touches[0].pageX-n.left,e.clientY=e.touches[0].pageY-n.top}}else void 0!==e.originalEvent&&void 0!==e.originalEvent.clientX&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},touchNormalize:function(e,t,n){if(void 0!==e.touches&&e.touches.length){if(void 0!==e.touches[n].clientX)e.clientX=e.touches[n].clientX,e.clientY=e.touches[n].clientY;else if(void 0!==e.touches[n].pageX){var o=t.getBoundingClientRect();e.clientX=e.touches[n].pageX-o.left,e.clientY=e.touches[n].pageY-o.top}}else void 0!==e.clientX&&null!==e.clientX||(e.clientX=0,e.clientY=0,void 0!==e.originalEvent&&void 0!==e.originalEvent.clientX&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY))},isDblClick:function(e,t){if(2===e.detail)return!0;if(null!=t){var n=e.timeStamp-t.timeStamp,o=Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2));return n<250&&o<10}return!1},now:Date.now||function(){return(new Date).getTime()},throttle:function(e,t,n){var o,r,i,a=this,s=null,l=0;n||(n={});var c=function(){l=!1===n.leading?0:a.now(),s=null,i=e.apply(o,r),s||(o=r=null)};return function(){var u=a.now();l||!1!==n.leading||(l=u);var d=t-(u-l);return o=this,r=arguments,d<=0||d>t?(clearTimeout(s),s=null,l=u,i=e.apply(o,r),s||(o=r=null)):s||!1===n.trailing||(s=setTimeout(c,d)),i}},createRequestAnimationFrame:function(e){var t=null;return"auto"!==e&&e<60&&e>1&&(t=Math.floor(1e3/e)),null===t?window.requestAnimationFrame||Lo(33):Lo(t)},calculateDistance:function(e,t){var n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)}};function Lo(e){return function(t){window.setTimeout(t,e)}}var Do=Ao,Vo=function(){var e,t,n,o="",r=[],i={passive:!0},a={passive:!1};function s(){return n||(n="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"),n}function l(t,n,l,c){var u;u="wheel"===s()?l:function(e,t){var n=function(e){!e&&(e=window.event);var n={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return"mousewheel"==s()?(n.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(n.deltaX=-1/40*e.wheelDeltaX)):n.deltaY=e.detail,t(n)};return r.push({element:e,fn:n}),n}(t,l),t[e](o+n,u,c?i:a)}function c(e,n,l,c){var u;u="wheel"===s()?l:function(e){for(var t=0;t<r.length;t++)if(r[t].element===e)return r[t].fn;return function(){}}(e),e[t](o+n,u,c?i:a),function(e){for(var t=0;t<r.length;t++)if(r[t].element===e)return r.splice(t,1)}(e)}return Do.getGlobalThis().addEventListener?(e="addEventListener",t="removeEventListener"):(e="attachEvent",t="detachEvent",o="on"),{on:function(e,t,n){l(e,s(),t,n),"DOMMouseScroll"==s()&&l(e,"MozMousePixelScroll",t,n)},off:function(e,t,n){c(e,s(),t,n),"DOMMouseScroll"==s()&&c(e,"MozMousePixelScroll",t,n)}}}(),$o=Ao,qo="unknown";"undefined"!=typeof document&&document.documentMode&&(qo="ie");var Ro={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(e,t){var n=null;if(!(n=$o.isElement(t)?t:e.querySelector(t))){var o=Array.prototype.slice.call(e.childNodes||e.children).filter((function(e){return"defs"!==e.nodeName&&"#text"!==e.nodeName}));1===o.length&&"g"===o[0].nodeName&&null===o[0].getAttribute("transform")&&(n=o[0])}if(!n){var r="viewport-"+(new Date).toISOString().replace(/\D/g,"");(n=document.createElementNS(this.svgNS,"g")).setAttribute("id",r);var i=e.childNodes||e.children;if(i&&i.length>0)for(var a=i.length;a>0;a--)"defs"!==i[i.length-a].nodeName&&n.appendChild(i[i.length-a]);e.appendChild(n)}var s=[];return n.getAttribute("class")&&(s=n.getAttribute("class").split(" ")),~s.indexOf("svg-pan-zoom_viewport")||(s.push("svg-pan-zoom_viewport"),n.setAttribute("class",s.join(" "))),n},setupSvgAttributes:function(e){if(e.setAttribute("xmlns",this.svgNS),e.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),e.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),null!==e.parentNode){var t=e.getAttribute("style")||"";-1===t.toLowerCase().indexOf("overflow")&&e.setAttribute("style","overflow: hidden; "+t)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:$o.throttle((function(){for(var e=document.querySelectorAll("defs"),t=e.length,n=0;n<t;n++){var o=e[n];o.parentNode.insertBefore(o,o)}}),Zo?Zo.internetExplorerRedisplayInterval:null),setCTM:function(e,t,n){var o=this,r="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttributeNS(null,"transform",r),"transform"in e.style?e.style.transform=r:"-ms-transform"in e.style?e.style["-ms-transform"]=r:"-webkit-transform"in e.style&&(e.style["-webkit-transform"]=r),"ie"===qo&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout((function(){o.refreshDefsGlobal()}),o.internetExplorerRedisplayInterval))},getEventPoint:function(e,t){var n=t.createSVGPoint();return $o.mouseAndTouchNormalize(e,t),n.x=e.clientX,n.y=e.clientY,n},getTouchPoint:function(e,t,n){var o=t.createSVGPoint();return $o.touchNormalize(e,t,n),o.x=e.clientX,o.y=e.clientY,o},getSvgCenterPoint:function(e,t,n){return this.createSVGPoint(e,t/2,n/2)},createSVGPoint:function(e,t,n){var o=e.createSVGPoint();return o.x=t,o.y=n,o}},Wo=Ro,Fo={enable:function(e){var t=e.svg.querySelector("defs");if(t||(t=document.createElementNS(Wo.svgNS,"defs"),e.svg.appendChild(t)),!t.querySelector("style#svg-pan-zoom-controls-styles")){var n=document.createElementNS(Wo.svgNS,"style");n.setAttribute("id","svg-pan-zoom-controls-styles"),n.setAttribute("type","text/css"),n.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",t.appendChild(n)}var o=document.createElementNS(Wo.svgNS,"g");o.setAttribute("id","svg-pan-zoom-controls"),o.setAttribute("transform","translate("+(e.width-70)+" "+(e.height-76)+") scale(0.75)"),o.setAttribute("class","svg-pan-zoom-control"),o.appendChild(this._createZoomIn(e)),o.appendChild(this._createZoomReset(e)),o.appendChild(this._createZoomOut(e)),e.svg.appendChild(o),e.controlIcons=o},_createZoomIn:function(e){var t=document.createElementNS(Wo.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-in"),t.setAttribute("transform","translate(30.5 5) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",(function(){e.getPublicInstance().zoomIn()}),!1),t.addEventListener("touchstart",(function(){e.getPublicInstance().zoomIn()}),!1);var n=document.createElementNS(Wo.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(Wo.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o),t},_createZoomReset:function(e){var t=document.createElementNS(Wo.svgNS,"g");t.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),t.setAttribute("transform","translate(5 35) scale(0.4)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",(function(){e.getPublicInstance().reset()}),!1),t.addEventListener("touchstart",(function(){e.getPublicInstance().reset()}),!1);var n=document.createElementNS(Wo.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(Wo.svgNS,"path");o.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o);var r=document.createElementNS(Wo.svgNS,"path");return r.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r),t},_createZoomOut:function(e){var t=document.createElementNS(Wo.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-out"),t.setAttribute("transform","translate(30.5 70) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",(function(){e.getPublicInstance().zoomOut()}),!1),t.addEventListener("touchstart",(function(){e.getPublicInstance().zoomOut()}),!1);var n=document.createElementNS(Wo.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(Wo.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o),t},disable:function(e){e.controlIcons&&(e.controlIcons.parentNode.removeChild(e.controlIcons),e.controlIcons=null)}},Ho=Ro,Go=Ao,Xo=function(e,t){this.init(e,t)};Xo.prototype.init=function(e,t){this.viewport=e,this.options=t,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=Go.proxy(this.updateCTM,this),this.requestAnimationFrame=Go.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()},Xo.prototype.cacheViewBox=function(){var e=this.options.svg.getAttribute("viewBox");if(e){var t=e.split(/[\s\,]/).filter((function(e){return e})).map(parseFloat);this.viewBox.x=t[0],this.viewBox.y=t[1],this.viewBox.width=t[2],this.viewBox.height=t[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=n,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},Xo.prototype.simpleViewBoxCache=function(){var e=this.viewport.getBBox();this.viewBox.x=e.x,this.viewBox.y=e.y,this.viewBox.width=e.width,this.viewBox.height=e.height},Xo.prototype.getViewBox=function(){return Go.extend({},this.viewBox)},Xo.prototype.processCTM=function(){var e,t=this.getCTM();(this.options.fit||this.options.contain)&&(e=this.options.fit?Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),t.a=e,t.d=e,t.e=-this.viewBox.x*e,t.f=-this.viewBox.y*e);if(this.options.center){var n=.5*(this.options.width-(this.viewBox.width+2*this.viewBox.x)*t.a),o=.5*(this.options.height-(this.viewBox.height+2*this.viewBox.y)*t.a);t.e=n,t.f=o}return this.originalState.zoom=t.a,this.originalState.x=t.e,this.originalState.y=t.f,t},Xo.prototype.getOriginalState=function(){return Go.extend({},this.originalState)},Xo.prototype.getState=function(){return Go.extend({},this.activeState)},Xo.prototype.getZoom=function(){return this.activeState.zoom},Xo.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},Xo.prototype.computeRelativeZoom=function(e){return e/this.originalState.zoom},Xo.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},Xo.prototype.getCTM=function(){var e=this.options.svg.createSVGMatrix();return e.a=this.activeState.zoom,e.b=0,e.c=0,e.d=this.activeState.zoom,e.e=this.activeState.x,e.f=this.activeState.y,e},Xo.prototype.setCTM=function(e){var t=this.isZoomDifferent(e),n=this.isPanDifferent(e);if(t||n){if(t&&(!1===this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(e.a))?(e.a=e.d=this.activeState.zoom,t=!1):(this.updateCache(e),this.options.onZoom(this.getRelativeZoom()))),n){var o=this.options.beforePan(this.getPan(),{x:e.e,y:e.f}),r=!1,i=!1;!1===o?(e.e=this.getPan().x,e.f=this.getPan().y,r=i=!0):Go.isObject(o)&&(!1===o.x?(e.e=this.getPan().x,r=!0):Go.isNumber(o.x)&&(e.e=o.x),!1===o.y?(e.f=this.getPan().y,i=!0):Go.isNumber(o.y)&&(e.f=o.y)),r&&i||!this.isPanDifferent(e)?n=!1:(this.updateCache(e),this.options.onPan(this.getPan()))}(t||n)&&this.updateCTMOnNextFrame()}},Xo.prototype.isZoomDifferent=function(e){return this.activeState.zoom!==e.a},Xo.prototype.isPanDifferent=function(e){return this.activeState.x!==e.e||this.activeState.y!==e.f},Xo.prototype.updateCache=function(e){this.activeState.zoom=e.a,this.activeState.x=e.e,this.activeState.y=e.f},Xo.prototype.pendingUpdate=!1,Xo.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},Xo.prototype.updateCTM=function(){var e=this.getCTM();Ho.setCTM(this.viewport,e,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(e)};var Uo=Vo,Yo=Fo,Ko=Ao,Qo=Ro,Jo=function(e,t){return new Xo(e,t)},er=function(e,t){this.init(e,t)},tr={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},nr={passive:!0},or={passive:!1};er.prototype.init=function(e,t){var n=this;this.svg=e,this.defs=e.querySelector("defs"),Qo.setupSvgAttributes(this.svg),this.options=Ko.extend(Ko.extend({},tr),t),this.state="none";var o=Qo.getBoundingClientRectNormalized(e);this.width=o.width,this.height=o.height,this.viewport=Jo(Qo.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(e,t){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(e,t)},onZoom:function(e){if(n.viewport&&n.options.onZoom)return n.options.onZoom(e)},beforePan:function(e,t){if(n.viewport&&n.options.beforePan)return n.options.beforePan(e,t)},onPan:function(e){if(n.viewport&&n.options.onPan)return n.options.onPan(e)},onUpdatedCTM:function(e){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(e)}});var r=this.getPublicInstance();r.setBeforeZoom(this.options.beforeZoom),r.setOnZoom(this.options.onZoom),r.setBeforePan(this.options.beforePan),r.setOnPan(this.options.onPan),r.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&Yo.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},er.prototype.setupHandlers=function(){var e=this,t=null;if(this.eventListeners={pointerdown:function(n){if("touch"!==n.pointerType){var o=e.handleMouseDown(n,t);return t=n,o}},touchstart:function(n){var o=e.handleTouchStart(n,t);return t=n,o},pointerup:function(t){if("touch"!==t.pointerType)return e.handleMouseUp(t)},touchend:function(t){return e.handleTouchEnd(t)},pointermove:function(t){if("touch"!==t.pointerType)return e.handleMouseMove(t)},touchmove:function(t){return e.handleTouchMove(t)},pointerleave:function(t){if("touch"!==t.pointerType)return e.handleMouseUp(t)},pointercancel:function(t){if("touch"!==t.pointerType)return e.handleMouseUp(t)},touchleave:function(t){return e.handleTouchEnd(t)},touchcancel:function(t){return e.handleTouchEnd(t)}},null!=this.options.customEventsHandler){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var o=n.length-1;o>=0;o--)this.eventListeners.hasOwnProperty(n[o])&&delete this.eventListeners[n[o]]}for(var r in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(r,this.eventListeners[r],this.options.preventMouseEventsDefault?or:nr);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},er.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var e=this;this.wheelListener=function(t){return e.handleMouseWheel(t)};var t=!this.options.preventMouseEventsDefault;Uo.on(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!0}},er.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var e=!this.options.preventMouseEventsDefault;Uo.off(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!1}},er.prototype.handleMouseWheel=function(e){if(this.options.zoomEnabled&&"none"===this.state){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var t=e.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,o=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in e&&0===e.deltaMode&&e.wheelDelta&&(t=0===e.deltaY?0:Math.abs(e.wheelDelta)/e.deltaY),t=-.3<t&&t<.3?t:(t>0?1:-1)*Math.log(Math.abs(t)+10)/o;var r=this.svg.getScreenCTM().inverse(),i=Qo.getEventPoint(e,this.svg).matrixTransform(r),a=Math.pow(1+this.options.zoomScaleSensitivity,-1*t);this.zoomAtPoint(a,i)}},er.prototype.zoomAtPoint=function(e,t,n){var o=this.viewport.getOriginalState();n?(e=Math.max(this.options.minZoom*o.zoom,Math.min(this.options.maxZoom*o.zoom,e)),e/=this.getZoom()):this.getZoom()*e<this.options.minZoom*o.zoom?e=this.options.minZoom*o.zoom/this.getZoom():this.getZoom()*e>this.options.maxZoom*o.zoom&&(e=this.options.maxZoom*o.zoom/this.getZoom());var r=this.viewport.getCTM(),i=t.matrixTransform(r.inverse()),a=this.svg.createSVGMatrix().translate(i.x,i.y).scale(e).translate(-i.x,-i.y),s=r.multiply(a);s.a!==r.a&&this.viewport.setCTM(s)},er.prototype.zoom=function(e,t){this.zoomAtPoint(e,Qo.getSvgCenterPoint(this.svg,this.width,this.height),t)},er.prototype.publicZoom=function(e,t){t&&(e=this.computeFromRelativeZoom(e)),this.zoom(e,t)},er.prototype.publicZoomAtPoint=function(e,t,n){if(n&&(e=this.computeFromRelativeZoom(e)),"SVGPoint"!==Ko.getType(t)){if(!("x"in t)||!("y"in t))throw new Error("Given point is invalid");t=Qo.createSVGPoint(this.svg,t.x,t.y)}this.zoomAtPoint(e,t,n)},er.prototype.getZoom=function(){return this.viewport.getZoom()},er.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},er.prototype.computeFromRelativeZoom=function(e){return e*this.viewport.getOriginalState().zoom},er.prototype.resetZoom=function(){var e=this.viewport.getOriginalState();this.zoom(e.zoom,!0)},er.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},er.prototype.reset=function(){this.resetZoom(),this.resetPan()},er.prototype.handleDblClick=function(e){var t;if((this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.options.controlIconsEnabled)&&(e.target.getAttribute("class")||"").indexOf("svg-pan-zoom-control")>-1)return!1;t=e.shiftKey?1/(2*(1+this.options.zoomScaleSensitivity)):2*(1+this.options.zoomScaleSensitivity);var n=Qo.getEventPoint(e,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(t,n)},er.prototype.handleMouseDown=function(e,t){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),Ko.mouseAndTouchNormalize(e,this.svg),this.options.dblClickZoomEnabled&&Ko.isDblClick(e,t)?this.handleDblClick(e):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=Qo.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()))},er.prototype.handleMouseMove=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),"pan"===this.state&&this.options.panEnabled){var t=Qo.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(t.x-this.stateOrigin.x,t.y-this.stateOrigin.y);this.viewport.setCTM(n)}},er.prototype.handleMouseUp=function(e){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),"pan"===this.state&&(this.state="none")},er.prototype.handleTouchStart=function(e,t){if(1==e.touches.length)this.handleMouseDown(e,t);else{this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM();var n=Qo.getTouchPoint(e,this.svg,0),o=Qo.getTouchPoint(e,this.svg,1);this.firstDistance=Ko.calculateDistance(n,o),n.x=(n.x+o.x)/2,n.y=(n.y+o.y)/2,this.stateOrigin=n.matrixTransform(this.firstEventCTM.inverse()),this.firstZoomLevel=this.getZoom()}},er.prototype.handleTouchMove=function(e){if(1==e.touches.length)this.handleMouseMove(e);else{if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),!this.options.panEnabled&&!this.options.zoomEnabled)return;var t=Qo.getTouchPoint(e,this.svg,0),n=Qo.getTouchPoint(e,this.svg,1),o=this.svg.createSVGPoint();if(o.x=(t.x+n.x)/2,o.y=(t.y+n.y)/2,"pan"===this.state&&this.options.panEnabled){var r=o.matrixTransform(this.firstEventCTM.inverse()),i=this.firstEventCTM.translate(r.x-this.stateOrigin.x,r.y-this.stateOrigin.y);this.viewport.setCTM(i)}if(this.options.zoomEnabled){var a=Ko.calculateDistance(t,n)/this.firstDistance,s=this.svg.getScreenCTM().inverse(),l=o.matrixTransform(s);this.zoomAtPoint(this.firstZoomLevel*a,l,!0)}}},er.prototype.handleTouchEnd=function(e){if(0==e.touches.length)this.handleMouseUp(e);else if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM(),1==e.touches.length)this.stateOrigin=Qo.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse());else{var t=Qo.getTouchPoint(e,this.svg,0),n=Qo.getTouchPoint(e,this.svg,1);this.firstDistance=Ko.calculateDistance(t,n),t.x=(t.x+n.x)/2,t.y=(t.y+n.y)/2,this.stateOrigin=t.matrixTransform(this.firstEventCTM.inverse())}},er.prototype.fit=function(){var e=this.viewport.getViewBox(),t=Math.min(this.width/e.width,this.height/e.height);this.zoom(t,!0)},er.prototype.contain=function(){var e=this.viewport.getViewBox(),t=Math.max(this.width/e.width,this.height/e.height);this.zoom(t,!0)},er.prototype.center=function(){var e=this.viewport.getViewBox(),t=.5*(this.width-(e.width+2*e.x)*this.getZoom()),n=.5*(this.height-(e.height+2*e.y)*this.getZoom());this.getPublicInstance().pan({x:t,y:n})},er.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},er.prototype.pan=function(e){var t=this.viewport.getCTM();t.e=e.x,t.f=e.y,this.viewport.setCTM(t)},er.prototype.panBy=function(e){var t=this.viewport.getCTM();t.e+=e.x,t.f+=e.y,this.viewport.setCTM(t)},er.prototype.getPan=function(){var e=this.viewport.getState();return{x:e.x,y:e.y}},er.prototype.resize=function(){var e=Qo.getBoundingClientRectNormalized(this.svg);this.width=e.width,this.height=e.height;var t=this.viewport;t.options.width=this.width,t.options.height=this.height,t.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},er.prototype.destroy=function(){var e=this;for(var t in this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,null!=this.options.customEventsHandler&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()}),this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(t,this.eventListeners[t],this.options.preventMouseEventsDefault?or:nr);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),rr=rr.filter((function(t){return t.svg!==e.svg})),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},er.prototype.getPublicInstance=function(){var e=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return e.options.panEnabled=!0,e.pi},disablePan:function(){return e.options.panEnabled=!1,e.pi},isPanEnabled:function(){return!!e.options.panEnabled},pan:function(t){return e.pan(t),e.pi},panBy:function(t){return e.panBy(t),e.pi},getPan:function(){return e.getPan()},setBeforePan:function(t){return e.options.beforePan=null===t?null:Ko.proxy(t,e.publicInstance),e.pi},setOnPan:function(t){return e.options.onPan=null===t?null:Ko.proxy(t,e.publicInstance),e.pi},enableZoom:function(){return e.options.zoomEnabled=!0,e.pi},disableZoom:function(){return e.options.zoomEnabled=!1,e.pi},isZoomEnabled:function(){return!!e.options.zoomEnabled},enableControlIcons:function(){return e.options.controlIconsEnabled||(e.options.controlIconsEnabled=!0,Yo.enable(e)),e.pi},disableControlIcons:function(){return e.options.controlIconsEnabled&&(e.options.controlIconsEnabled=!1,Yo.disable(e)),e.pi},isControlIconsEnabled:function(){return!!e.options.controlIconsEnabled},enableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!0,e.pi},disableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!1,e.pi},isDblClickZoomEnabled:function(){return!!e.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return e.enableMouseWheelZoom(),e.pi},disableMouseWheelZoom:function(){return e.disableMouseWheelZoom(),e.pi},isMouseWheelZoomEnabled:function(){return!!e.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(t){return e.options.zoomScaleSensitivity=t,e.pi},setMinZoom:function(t){return e.options.minZoom=t,e.pi},setMaxZoom:function(t){return e.options.maxZoom=t,e.pi},setBeforeZoom:function(t){return e.options.beforeZoom=null===t?null:Ko.proxy(t,e.publicInstance),e.pi},setOnZoom:function(t){return e.options.onZoom=null===t?null:Ko.proxy(t,e.publicInstance),e.pi},zoom:function(t){return e.publicZoom(t,!0),e.pi},zoomBy:function(t){return e.publicZoom(t,!1),e.pi},zoomAtPoint:function(t,n){return e.publicZoomAtPoint(t,n,!0),e.pi},zoomAtPointBy:function(t,n){return e.publicZoomAtPoint(t,n,!1),e.pi},zoomIn:function(){return this.zoomBy(1+e.options.zoomScaleSensitivity),e.pi},zoomOut:function(){return this.zoomBy(1/(1+e.options.zoomScaleSensitivity)),e.pi},getZoom:function(){return e.getRelativeZoom()},setOnUpdatedCTM:function(t){return e.options.onUpdatedCTM=null===t?null:Ko.proxy(t,e.publicInstance),e.pi},resetZoom:function(){return e.resetZoom(),e.pi},resetPan:function(){return e.resetPan(),e.pi},reset:function(){return e.reset(),e.pi},fit:function(){return e.fit(),e.pi},contain:function(){return e.contain(),e.pi},center:function(){return e.center(),e.pi},updateBBox:function(){return e.updateBBox(),e.pi},resize:function(){return e.resize(),e.pi},getSizes:function(){return{width:e.width,height:e.height,realZoom:e.getZoom(),viewBox:e.viewport.getViewBox()}},destroy:function(){return e.destroy(),e.pi}}),this.publicInstance};var rr=[],ir=function(e,t){var n=Ko.getSvg(e);if(null===n)return null;for(var o=rr.length-1;o>=0;o--)if(rr[o].svg===n)return rr[o].instance.getPublicInstance();return rr.push({svg:n,instance:new er(n,t)}),rr[rr.length-1].instance.getPublicInstance()};const ar={fitToContents(){return this.fit().center().zoomOut().zoomOut(),this},getViewArea(){const e=this.getSizes(),t=this.getPan(),n=e.realZoom;t.x/=n,t.y/=n;const o=e.width/n,r=e.height/n;return{box:{top:-t.y,bottom:r-t.y,left:-t.x,right:o-t.x},center:{x:o/2-t.x,y:r/2-t.y}}},getViewBox(){return this.getViewArea().box},setViewBox(e){const t=e.right-e.left,n=e.bottom-e.top,{width:o,height:r}=this.getSizes(),i=t/n,a=o/r,s=i<a?n*a:t,l=i>a?t/a:n,c=Math.min(o/s,r/l),u=this.getRealZoom()/this.getZoom();this.zoom(c/u);const d=(e.left+t/2)*c,v=(e.top+n/2)*c;this.pan({x:s/2*c-d,y:l/2*c-v})},getRealZoom(){return this.getSizes().realZoom},applyAbsoluteZoomLevel(e,t,n){const o=Math.max(1e-4,t),r=Math.max(o,n),i=Math.max(Math.min(r,e),o),a=this.getRealZoom()/this.getZoom();this.setMinZoom(o/a).setMaxZoom(r/a).zoom(i/a)},isPanEnabled(){return this._isPanEnabled},enablePan(){return this._isPanEnabled=!0,this._internalEnablePan(),this},disablePan(){return this._isPanEnabled=!1,this._internalDisablePan(),this},isZoomEnabled(){return this._isZoomEnabled},enableZoom(){return this._isZoomEnabled=!0,this._internalEnableZoom(),this},disableZoom(){return this._isZoomEnabled=!1,this._internalDisableZoom(),this},setPanEnabled(e){return e?this.enablePan():this.disablePan(),this},setZoomEnabled(e){return e?(this.enableZoom(),this.enableDblClickZoom()):(this.disableZoom(),this.disableDblClickZoom()),this}};function sr(e,t){var n,o,r,i,a,s;const l=null!=(o=null==(n=t.customEventsHandler)?void 0:n.init)?o:e=>{},c=null!=(i=null==(r=t.customEventsHandler)?void 0:r.destroy)?i:e=>{},u=null!=(s=null==(a=t.customEventsHandler)?void 0:a.haltEventListeners)?s:[];return void 0===t.mouseWheelZoomEnabled&&(t.mouseWheelZoomEnabled=t.zoomEnabled),t.customEventsHandler={init:e=>{!function(e,t){var n,o;const r=e;r._isPanEnabled=null==(n=t.panEnabled)||n,r._isZoomEnabled=null==(o=null==t?void 0:t.zoomEnabled)||o,r._internalIsPanEnabled=r.isPanEnabled,r._internalEnablePan=r.enablePan,r._internalDisablePan=r.disablePan,r._internalIsZoomEnabled=r.isZoomEnabled,r._internalEnableZoom=r.enableZoom,r._internalDisableZoom=r.disableZoom,Object.assign(e,ar)}(e.instance,t),l(e)},destroy:e=>c(e),haltEventListeners:u},ir(e,t)}function lr(e,n){const o=t.ref();let i=0;const a=[],s=[];t.onMounted((()=>{var t,l,c,u,d,v;const p=r(e.value,"<svg>"),h=null!=(l=null==(t=n.customEventsHandler)?void 0:t.init)?l:e=>{},f=null!=(u=null==(c=n.customEventsHandler)?void 0:c.destroy)?u:e=>{},m=null!=(v=null==(d=n.customEventsHandler)?void 0:d.haltEventListeners)?v:[];n.customEventsHandler={init:e=>{o.value=e.instance,h(e),i=1,a.forEach((e=>e())),a.length=0},destroy:e=>{i=2,s.forEach((e=>e())),s.length=0,f(e)},haltEventListeners:m};const g=()=>{const e=p.getBoundingClientRect();0!==e.width&&0!==e.height?sr(p,n):setTimeout(g,200)};g()})),t.onUnmounted((()=>{var e;null==(e=o.value)||e.destroy(),o.value=void 0}));return{svgPanZoom:o,onSvgPanZoomMounted:e=>{0===i?a.push(e):1===i&&e()},onSvgPanZoomUnmounted:e=>{0===i||1===i?s.push(e):e()}}}const cr=Symbol("zoomLevel");function ur(){return r(t.inject(cr),"zoomLevel")}function dr(){let e=null;const n=t.ref({enabled:!1,duration:300,timingFunction:"linear"});return{transitionWhile:function(o,r=300,i="linear"){e&&(clearTimeout(e),e=null),n.value={enabled:!0,duration:r,timingFunction:i},t.nextTick((()=>__async(this,null,(function*(){const t=o();var i;((i=t)instanceof Promise||i&&"function"==typeof i.then)&&(yield t),e&&clearTimeout(e),e=null==window?void 0:window.setTimeout((()=>{n.value.enabled=!1,e=null}),r)}))))},transitionOption:n}}function vr(e,n,r,i){const a=t.reactive(new Set);return t.watch((()=>e[n]),(()=>{const t=e[n].filter((e=>e in r.value));Sn(t,Array.from(a))||(a.clear(),t.forEach(a.add,a))}),{deep:!0,immediate:!0}),t.watch(a,(()=>{const t=Array.from(a);Sn(e[n],t)||i(`update:${n}`,t)})),o(a)}const pr=["cx","cy","r","fill","stroke","stroke-width","stroke-dasharray"],hr=["x","y","width","height","rx","ry","fill","stroke","stroke-width","stroke-dasharray"],fr=t.defineComponent({props:{baseX:{type:Number,default:0},baseY:{type:Number,default:0},config:{type:Object,required:!0}},setup(e,{expose:n}){const o=e,{scale:r}=ur(),i=t.ref(o.baseX),a=t.ref(o.baseY),s=t.ref(0),l=t.ref("#000000"),c=t.ref(void 0),u=t.ref(0),d=t.ref(0),p=t.ref(0),h=t.ref(0);return t.watchEffect((()=>{var e;const t=r.value;s.value=o.config.strokeWidth*t,l.value=null!=(e=o.config.strokeColor)?e:"none",c.value=v(o.config.strokeDasharray,t),"circle"===o.config.type?(i.value=o.baseX,a.value=o.baseY,u.value=o.config.radius*t):(d.value=o.config.width*t,p.value=o.config.height*t,h.value=o.config.borderRadius*t,i.value=o.baseX-d.value/2,a.value=o.baseY-p.value/2)})),n({x:i,y:a,strokeWidth:s,strokeColor:l,strokeDasharray:c,radius:u,width:d,height:p,borderRadius:h}),(n,o)=>"circle"===e.config.type?(t.openBlock(),t.createElementBlock("circle",{key:0,class:"v-shape-circle",cx:i.value,cy:a.value,r:u.value,fill:e.config.color,stroke:l.value,"stroke-width":s.value,"stroke-dasharray":c.value},null,8,pr)):(t.openBlock(),t.createElementBlock("rect",{key:1,class:"v-shape-rect",x:i.value,y:a.value,width:d.value,height:p.value,rx:h.value,ry:h.value,fill:e.config.color,stroke:l.value,"stroke-width":s.value,"stroke-dasharray":c.value},null,8,hr))}}),mr=["rx","ry","fill","transform"],gr=["x","y","dominant-baseline","font-family","font-size","fill"],br=["x","dy","dominant-baseline"],yr=t.defineComponent({props:{text:{type:String,required:!0},x:{type:Number,required:!0},y:{type:Number,required:!0},dominantBaseline:{type:String,required:!1,default:"central"},config:{type:Object,required:!0}},setup(e,{expose:n}){const o=e;function r(e,t,n){var o;const r=e.getBBox();t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height,n.value=null!=(o=e.getAttribute("transform"))?o:void 0}const i=t.useAttrs(),{scale:a}=ur(),s=t.computed((()=>{var e,t;return null!=(t=null==(e=o.text)?void 0:e.toString().split(/\r?\n/))?t:""})),l=t.computed((()=>{var e;return null!=(e=i["font-size"])?e:o.config.fontSize*a.value})),c=t.computed((()=>l.value*o.config.lineHeight)),u=t.computed((()=>{const e=o.dominantBaseline;return"hanging"===e?0:"central"===e?-c.value*(s.value.length-1)/2:-c.value*(s.value.length-1)})),d=t.ref(),v=t.ref(""),p=t.reactive({x:0,y:0,width:0,height:0}),h=t.computed((()=>{var e,t;const n=o.config.background;if(!n)return p;let r,i;n.padding instanceof Object?(r=n.padding.vertical,i=n.padding.horizontal):(r=null!=(e=n.padding)?e:0,i=null!=(t=n.padding)?t:0);const s=c.value-l.value;return{x:p.x-i*a.value,y:p.y-r*a.value-s/2,width:p.width+2*i*a.value,height:p.height+2*r*a.value+s}}));let f;const m=()=>{o.config.background&&o.config.background.visible?!f&&d.value&&(f=function(e,t,n){const o=new MutationObserver((()=>{r(e,t,n)}));return o.observe(e,{attributes:!0,attributeFilter:["x","y","transform","font-size"]}),r(e,t,n),o}(d.value,p,v)):(null==f||f.disconnect(),f=void 0)};return t.onMounted((()=>m())),t.watch((()=>o.config.background&&o.config.background.visible),((e,t)=>{e!=t&&m()})),t.onUnmounted((()=>{null==f||f.disconnect(),f=void 0})),n({fontSize:l,element:d,transform:v,backgroundRectPos:h,scale:a}),(n,o)=>{var r,i,p,f,m,g;return t.openBlock(),t.createElementBlock(t.Fragment,null,[e.config.background&&e.config.background.visible?(t.openBlock(),t.createElementBlock("rect",t.mergeProps({key:0,class:"v-text-background"},t.unref(h),{rx:(null!=(i=null==(r=e.config.background)?void 0:r.borderRadius)?i:0)*t.unref(a),ry:(null!=(f=null==(p=e.config.background)?void 0:p.borderRadius)?f:0)*t.unref(a),fill:null!=(g=null==(m=e.config.background)?void 0:m.color)?g:"#ffffff",transform:v.value}),null,16,mr)):t.createCommentVNode("",!0),t.createElementVNode("text",t.mergeProps({ref_key:"element",ref:d,class:"v-text"},n.$attrs,{x:e.x,y:e.y,"dominant-baseline":e.dominantBaseline,"font-family":n.$attrs["font-family"]?`${n.$attrs["font-family"]}`:e.config.fontFamily,"font-size":t.unref(l),fill:n.$attrs.fill?`${n.$attrs.fill}`:e.config.color}),[t.unref(s).length<=1?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(e.text),1)],64)):(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:1},t.renderList(t.unref(s),((n,o)=>(t.openBlock(),t.createElementBlock("tspan",{key:o,x:e.x,dy:0==o?t.unref(u):t.unref(c),"dominant-baseline":e.dominantBaseline},t.toDisplayString(n),9,br)))),128))],16,gr)],64)}}});var wr=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n};const kr=["transform"];var Er=wr(t.defineComponent({props:{id:{type:String,required:!0},state:{type:Object,required:!0},pos:{type:Object,required:!1,default:void 0}},setup(e,{expose:n}){const o=e,r=t.computed((()=>{var e;return(null==(e=o.pos)?void 0:e.x)||0})),i=t.computed((()=>{var e;return(null==(e=o.pos)?void 0:e.y)||0})),a=At(),{scale:s}=ur(),{handleNodePointerDownEvent:c,handleNodePointerOverEvent:u,handleNodePointerOutEvent:d,handleNodeClickEvent:v,handleNodeDoubleClickEvent:p,handleNodeContextMenu:h}=To(),f=t.computed((()=>{var e;return!!o.state.label.visible&&(null!=(e=o.state.labelText)&&e)})),m=t.computed((()=>o.state.label.direction===l.CENTER?0:o.state.label.margin*s.value)),g=t.ref(0),b=t.ref(0),y=t.ref(0),w=t.ref(0);t.watchEffect((()=>{const e=s.value,t=o.state.shape;if("circle"==t.type){const n=t.radius*e,o=n+m.value,r=Math.sqrt(__pow(o,2)/2);g.value=n+m.value,b.value=n+m.value,y.value=r,w.value=r}else{const n=t.borderRadius*e,o=t.width*e,r=t.height*e,i=n+m.value,a=Math.sqrt(__pow(i,2)/2);g.value=r/2+m.value,b.value=o/2+m.value,y.value=r/2-n+a,w.value=o/2-n+a}}));const k=t.computed((()=>{switch(o.state.label.direction){case l.CENTER:case l.NORTH:case l.SOUTH:return"middle";case l.EAST:case l.NORTH_EAST:case l.SOUTH_EAST:return"start";case l.WEST:case l.NORTH_WEST:case l.SOUTH_WEST:default:return"end"}})),E=t.computed((()=>{switch(o.state.label.direction){case l.NORTH:case l.NORTH_EAST:case l.NORTH_WEST:return"text-top";case l.SOUTH:case l.SOUTH_EAST:case l.SOUTH_WEST:return"hanging";case l.CENTER:case l.EAST:case l.WEST:default:return"central"}})),x=t.computed((()=>{switch(o.state.label.direction){case l.CENTER:case l.NORTH:case l.SOUTH:return 0;case l.EAST:return b.value;case l.WEST:return-b.value;case l.NORTH_EAST:case l.SOUTH_EAST:return w.value;case l.NORTH_WEST:case l.SOUTH_WEST:default:return-w.value}})),P=t.computed((()=>{switch(o.state.label.direction){case l.NORTH:return-g.value;case l.SOUTH:return g.value;case l.CENTER:case l.EAST:case l.WEST:return 0;case l.NORTH_EAST:case l.NORTH_WEST:return-y.value;case l.SOUTH_EAST:case l.SOUTH_WEST:default:return y.value}}));return n({x:r,y:i,config:a,labelVisibility:f,handleNodePointerDownEvent:c,handleNodePointerOverEvent:u,handleNodePointerOutEvent:d,handleNodeClickEvent:v,handleNodeDoubleClickEvent:p,handleNodeContextMenu:h,textAnchor:k,dominantBaseline:E,labelX:x,labelY:P,scale:s}),(n,o)=>(t.openBlock(),t.createElementBlock("g",{class:t.normalizeClass({"v-node":!0,hover:e.state.hovered,selected:e.state.selected}),transform:`translate(${t.unref(r)} ${t.unref(i)})`,onPointerdown:o[0]||(o[0]=t.withModifiers((n=>t.unref(c)(e.id,n)),["stop"])),onPointerenterPassive:o[1]||(o[1]=n=>t.unref(u)(e.id,n)),onPointerleavePassive:o[2]||(o[2]=n=>t.unref(d)(e.id,n)),onClick:o[3]||(o[3]=t.withModifiers((n=>t.unref(v)(e.id,n)),["stop"])),onDblclick:o[4]||(o[4]=t.withModifiers((n=>t.unref(p)(e.id,n)),["stop"])),onContextmenu:o[5]||(o[5]=n=>t.unref(h)(e.id,n))},[t.renderSlot(n.$slots,"override-node",{nodeId:e.id,scale:t.unref(s),config:e.state.shape,class:t.normalizeClass({draggable:e.state.draggable,selectable:e.state.selectable})},(()=>[t.createVNode(fr,{config:e.state.shape,class:t.normalizeClass({draggable:e.state.draggable,selectable:e.state.selectable})},null,8,["config","class"])]),!0),t.unref(f)?t.renderSlot(n.$slots,"override-node-label",{key:0,nodeId:e.id,scale:t.unref(s),text:e.state.labelText,x:t.unref(x),y:t.unref(P),config:e.state.label,shape:e.state.shape,textAnchor:t.unref(k),dominantBaseline:t.unref(E)},(()=>[t.createVNode(yr,{text:e.state.labelText,x:t.unref(x),y:t.unref(P),config:e.state.label,"text-anchor":t.unref(k),"dominant-baseline":t.unref(E)},null,8,["text","x","y","config","text-anchor","dominant-baseline"])]),!0):t.createCommentVNode("",!0)],42,kr))}}),[["__scopeId","data-v-13e63a9b"]]);var xr=wr(t.defineComponent({props:{id:{type:String,required:!0},state:{type:Object,required:!0},pos:{type:Object,required:!1,default:void 0}},setup(e,{expose:n}){const o=e,r=t.computed((()=>{var e;return(null==(e=o.pos)?void 0:e.x)||0})),i=t.computed((()=>{var e;return(null==(e=o.pos)?void 0:e.y)||0})),a=At(),s=t.reactive({});return t.watchEffect((()=>{var e,t,n;const r=o.state.shape;if("circle"===r.type){const t={type:"circle",radius:r.radius+(null!=(e=r.strokeWidth)?e:0)/2+a.focusring.padding+a.focusring.width/2,color:"none",strokeWidth:a.focusring.width,strokeColor:a.focusring.color,strokeDasharray:a.focusring.dasharray};Object.assign(s,t)}else{const e={type:"rect",width:r.width+(null!=(t=r.strokeWidth)?t:0)+2*a.focusring.padding+a.focusring.width,height:r.height+(null!=(n=r.strokeWidth)?n:0)+2*a.focusring.padding+a.focusring.width,borderRadius:r.borderRadius>0?r.borderRadius+a.focusring.padding:0,color:"none",strokeWidth:a.focusring.width,strokeColor:a.focusring.color,strokeDasharray:a.focusring.dasharray};Object.assign(s,e)}})),n({x:r,y:i,shapeConfig:s}),(e,n)=>(t.openBlock(),t.createBlock(fr,{class:"v-node-focus-ring","base-x":t.unref(r),"base-y":t.unref(i),config:t.unref(s)},null,8,["base-x","base-y","config"]))}}),[["__scopeId","data-v-dbfca3b6"]]);const Pr=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"];var Sr=wr(t.defineComponent({props:{p1:{type:Object,required:!0},p2:{type:Object,required:!0},config:{type:Object,required:!0}},setup(e,{expose:n}){const o=e,{scale:r}=ur(),i=t.computed((()=>o.config.width*r.value)),a=t.computed((()=>v(o.config.dasharray,r.value))),s=t.computed((()=>{const e=!!o.config.animate&&p(o.config.dasharray)*o.config.animationSpeed*r.value;return e?`--animation-speed:${e}`:void 0}));return n({strokeWidth:i,strokeDasharray:a,animationSpeed:s}),(n,o)=>(t.openBlock(),t.createElementBlock("path",{class:t.normalizeClass({"v-line":!0,animate:e.config.animate}),d:`M ${e.p1.x} ${e.p1.y} L ${e.p2.x} ${e.p2.y}`,stroke:e.config.color,"stroke-width":t.unref(i),"stroke-dasharray":t.unref(a),"stroke-linecap":e.config.linecap,style:t.normalizeStyle(t.unref(s))},null,14,Pr))}}),[["__scopeId","data-v-80a2ecac"]]);function Mr(e,t,n){var o=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(r);++o<r;)i[o]=e[o+t];return i}var Or=Math.ceil,_r=Math.max;function Cr(e,t,n){t=(n?Bt(e,t,n):void 0===t)?1:_r(A(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var r=0,i=0,a=Array(Or(o/t));r<o;)a[i++]=Mr(e,r,r+=t);return a}const zr=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","marker-start","marker-end"];var Br=wr(t.defineComponent({props:{state:{type:Object,required:!0},config:{type:Object,required:!0},markerStart:{type:String,required:!1,default:void 0},markerEnd:{type:String,required:!1,default:void 0}},setup(e,{expose:n}){const o=e,{scale:r}=ur(),i=t.computed((()=>{var e,t;const n=o.state.position,r=[...null!=(t=null==(e=o.state.curve)?void 0:e.control)?t:[],{x:n.p2.x,y:n.p2.y}],i=[];return i.push(`M ${n.p1.x} ${n.p1.y}`),Cr(r,2).forEach((([e,t])=>i.push(`Q ${e.x} ${e.y} ${t.x} ${t.y}`))),i.join(" ")})),a=t.computed((()=>o.config.width*r.value)),s=t.computed((()=>v(o.config.dasharray,r.value))),l=t.computed((()=>{const e=!!o.config.animate&&p(o.config.dasharray)*o.config.animationSpeed*r.value;return e?`--animation-speed:${e}`:void 0}));return n({strokeWidth:a,strokeDasharray:s,animationSpeed:l}),(n,o)=>(t.openBlock(),t.createElementBlock("path",{class:t.normalizeClass({"v-line":!0,animate:e.config.animate}),d:t.unref(i),fill:"none",stroke:e.config.color,"stroke-width":t.unref(a),"stroke-dasharray":t.unref(s),"stroke-linecap":e.config.linecap,style:t.normalizeStyle(t.unref(l)),"marker-start":e.markerStart,"marker-end":e.markerEnd},null,14,zr))}}),[["__scopeId","data-v-1a7165f7"]]);var jr=wr(t.defineComponent({props:{id:{type:String,required:!0},state:{type:Object,required:!0},sourcePos:{type:Object,required:!1,default:void 0},targetPos:{type:Object,required:!1,default:void 0}},setup(e,{expose:n}){const o=Lt();return n({config:o}),(n,r)=>"straight"!=t.unref(o).type&&e.state.curve?(t.openBlock(),t.createBlock(Br,{key:1,class:t.normalizeClass({selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected}),state:e.state,config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0},null,8,["class","state","config","marker-start","marker-end"])):(t.openBlock(),t.createBlock(Sr,t.mergeProps({key:0},e.state.position,{class:{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0}),null,16,["class","config","marker-start","marker-end"]))}}),[["__scopeId","data-v-681298a2"]]);var Tr=wr(t.defineComponent({props:{edges:{type:Object,required:!0},layouts:{type:Object,required:!0}},setup(e,{expose:n}){const o=e,r=Lt(),{handleEdgesPointerDownEvent:i,handleEdgesPointerOverEvent:a,handleEdgesPointerOutEvent:l,handleEdgesClickEvent:c,handleEdgesDoubleClickEvent:u,handleEdgesContextMenu:d}=To(),{edgeStates:v}=ko(),p=t.ref({p1:{x:0,y:0},p2:{x:0,y:0}}),h=t.ref({x:0,y:0});t.watchEffect((()=>{const e=Object.keys(o.edges).find((e=>e in v));e&&(p.value=v[e].position,h.value={x:(p.value.p1.x+p.value.p2.x)/2,y:(p.value.p1.y+p.value.p2.y)/2})}));const f=t.computed((()=>Object.keys(o.edges))),m=t.computed((()=>s.values(r.summarized.label,o.edges))),g=t.computed((()=>s.values(r.summarized.shape,o.edges))),b=t.computed((()=>s.values(r.summarized.stroke,o.edges))),y=t.computed((()=>f.value.some((e=>v[e].hovered)))),w=t.computed((()=>f.value.some((e=>v[e].selectable)))),k=t.computed((()=>f.value.some((e=>v[e].selected))));return n({config:r,pos:p,centerPos:h,handleEdgesPointerDownEvent:i,handleEdgesPointerOverEvent:a,handleEdgesPointerOutEvent:l,handleEdgesClickEvent:c,handleEdgesDoubleClickEvent:u,handleEdgesContextMenu:d,hovered:y,selectable:w,selected:k}),(n,o)=>(t.openBlock(),t.createElementBlock("g",{class:t.normalizeClass({"v-line-summarized":!0,hovered:t.unref(y),selectable:t.unref(w),selected:t.unref(k)}),onPointerdown:o[0]||(o[0]=t.withModifiers((e=>t.unref(i)(t.unref(f),e)),["stop"])),onPointerenterPassive:o[1]||(o[1]=e=>t.unref(a)(t.unref(f),e)),onPointerleavePassive:o[2]||(o[2]=e=>t.unref(l)(t.unref(f),e)),onClick:o[3]||(o[3]=t.withModifiers((e=>t.unref(c)(t.unref(f),e)),["stop"])),onDblclick:o[4]||(o[4]=t.withModifiers((e=>t.unref(u)(t.unref(f),e)),["stop"])),onContextmenu:o[5]||(o[5]=e=>t.unref(d)(t.unref(f),e))},[t.createVNode(Sr,t.mergeProps(p.value,{config:t.unref(b)}),null,16,["config"]),t.createVNode(fr,{"base-x":h.value.x,"base-y":h.value.y,config:t.unref(g)},null,8,["base-x","base-y","config"]),t.createVNode(yr,{text:Object.keys(e.edges).length.toString(),x:h.value.x,y:h.value.y,config:t.unref(m),"text-anchor":"middle","dominant-baseline":"central"},null,8,["text","x","y","config"])],34))}}),[["__scopeId","data-v-69e96db7"]]);const Ir=t.defineComponent({setup(e,{expose:n}){const{edgeStates:o,edgeZOrderedList:r,edgeGroupStates:i,layouts:a}=ko();return n({edgeStates:o,edgeZOrderedList:r,edgeGroupStates:i,layouts:a}),(e,n)=>(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(r),(e=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[t.unref(wo)(e)?(t.openBlock(),t.createBlock(Tr,{key:e.key,edges:e.group.edges,layouts:t.unref(a).nodes},null,8,["edges","layouts"])):(t.openBlock(),t.createBlock(jr,{key:e.key,id:e.key,state:t.unref(o)[e.key],"source-pos":t.unref(a).nodes[e.edge.source],"target-pos":t.unref(a).nodes[e.edge.target]},null,8,["id","state","source-pos","target-pos"]))],64)))),256))}});const Nr=["d","stroke-width"];var Zr=wr(t.defineComponent({props:{id:{type:String,required:!0},state:{type:Object,required:!0},sourcePos:{type:Object,required:!1,default:void 0},targetPos:{type:Object,required:!1,default:void 0}},setup(e,{expose:n}){const o=e,{scale:r}=ur(),i=Lt(),{handleEdgePointerDownEvent:a,handleEdgePointerOverEvent:s,handleEdgePointerOutEvent:l,handleEdgeClickEvent:c,handleEdgeDoubleClickEvent:u,handleEdgeContextMenu:d}=To(),v=t.computed((()=>{const e=o.state.position;if("straight"!==i.type&&o.state.curve){const t=[...o.state.curve.control,{x:e.p2.x,y:e.p2.y}],n=[];return n.push(`M ${e.p1.x} ${e.p1.y}`),Cr(t,2).forEach((([e,t])=>n.push(`Q ${e.x} ${e.y} ${t.x} ${t.y}`))),n.join(" ")}return`M ${e.p1.x} ${e.p1.y} L ${e.p2.x} ${e.p2.y}`})),p=t.computed((()=>(o.state.line.stroke.width+10)*r.value));return n({config:i,handleEdgePointerDownEvent:a,handleEdgePointerOverEvent:s,handleEdgePointerOutEvent:l,handleEdgeClickEvent:c,handleEdgeDoubleClickEvent:u,handleEdgeContextMenu:d}),(n,o)=>(t.openBlock(),t.createElementBlock("path",{class:t.normalizeClass({"v-line-background":!0,selectable:e.state.selectable}),d:t.unref(v),stroke:"transparent","stroke-width":t.unref(p),fill:"none",onPointerdown:o[0]||(o[0]=t.withModifiers((n=>t.unref(a)(e.id,n)),["stop"])),onPointerenterPassive:o[1]||(o[1]=n=>t.unref(s)(e.id,n)),onPointerleavePassive:o[2]||(o[2]=n=>t.unref(l)(e.id,n)),onClick:o[3]||(o[3]=t.withModifiers((n=>t.unref(c)(e.id,n)),["stop"])),onDblclick:o[4]||(o[4]=t.withModifiers((n=>t.unref(u)(e.id,n)),["stop"])),onContextmenu:o[5]||(o[5]=n=>t.unref(d)(e.id,n))},null,42,Nr))}}),[["__scopeId","data-v-8dc141be"]]);const Ar=t.defineComponent({setup(e,{expose:n}){const{edgeStates:o,edgeGroupStates:r,layouts:i}=ko();return n({edgeStates:o,edgeGroupStates:r,layouts:i}),(e,n)=>(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(r).edgeGroups,(({summarize:e,edges:n})=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[e?t.createCommentVNode("",!0):(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:0},t.renderList(n,((e,n)=>(t.openBlock(),t.createBlock(Zr,{key:n,id:n,state:t.unref(o)[n],"source-pos":t.unref(i).nodes[e.source],"target-pos":t.unref(i).nodes[e.target]},null,8,["id","state","source-pos","target-pos"])))),128))],64)))),256))}});const Lr={class:"v-edge-labels"};var Dr=wr(t.defineComponent({setup(e,{expose:n}){const o=Lt(),{nodeStates:r,edgeStates:i,edgeGroupStates:a,summarizedEdgeStates:s,layouts:l}=ko(),{scale:c}=ur(),u=t.computed((()=>Object.fromEntries(Object.entries(a.edgeGroups).filter((([e,t])=>!t.summarize&&Object.keys(t.edges).length>0))))),d=t.computed((()=>{const e={},t={};return Object.entries(a.edgeGroups).forEach((([n,o])=>{Object.keys(o.edges).length>0&&(o.summarize?t[n]=o:e[n]=o)})),{indivisual:e,summarized:t}})),v=t.computed((()=>e=>{var t;return{pos:null!=(t=l.nodes[e])?t:{x:0,y:0},shape:r[e].shape}})),p=t.computed((()=>(e,t,n,r)=>so(i[e].labelPosition,r,o.label.margin,o.label.padding,c.value))),h=t.computed((()=>(e,t)=>{var n,r;const a=Object.keys(t.edges)[0];return so(i[a].labelPosition,null!=(r=null==(n=s[e])?void 0:n.stroke)?r:i[a].line.stroke,o.label.margin,o.label.padding,c.value)})),f=t.computed((()=>e=>i[Object.keys(e.edges)[0]]));return n({indivisualEdgeGroups:u,edgeGroups:d,nodeShape:v,labelAreaPosition:p,groupLabelAreaPosition:h,representativeEdgeState:f,edgeStates:i,edgeConfig:o,scale:c}),(e,n)=>(t.openBlock(),t.createElementBlock("g",Lr,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(d).indivisual,((n,r)=>(t.openBlock(),t.createElementBlock(t.Fragment,{key:r},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(n.edges,((n,r)=>t.renderSlot(e.$slots,"edge-label",{key:r,edgeId:r,edge:n,config:t.unref(o).label,area:t.unref(p)(r,t.unref(v)(n.source),t.unref(v)(n.target),t.unref(i)[r].line.stroke),hovered:t.unref(i)[r].hovered,selected:t.unref(i)[r].selected,scale:t.unref(c)},void 0,!0))),128))],64)))),128)),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(d).summarized,((n,r)=>t.renderSlot(e.$slots,"edges-label",{key:r,edges:n.edges,config:t.unref(o).label,area:t.unref(h)(r,n),hovered:t.unref(f)(n).hovered,selected:t.unref(f)(n).selected,scale:t.unref(c)},void 0,!0))),128))]))}}),[["__scopeId","data-v-61f68d23"]]);const Vr=t.defineComponent({setup(e,{expose:n}){const{viewport:o}=a(),r=t.ref(),i=(e,t,n)=>{e.forEach((e=>{var o;return t.setAttribute(e,null!=(o=n.getAttribute(e))?o:"")}))},s=new MutationObserver((e=>{if(!r.value)return;const t=e.map((e=>{var t;return null!=(t=e.attributeName)?t:""})).filter(Boolean);i(t,r.value,o.value)}));return t.onMounted((()=>{const e=["transform","style"];s.observe(o.value,{attributes:!0,attributeFilter:e}),r.value&&i(e,r.value,o.value)})),t.onUnmounted((()=>{s.disconnect()})),n({background:r}),(e,n)=>(t.openBlock(),t.createElementBlock("g",{ref_key:"background",ref:r,class:"v-background-viewport"},[t.renderSlot(e.$slots,"default")],512))}});const $r={class:"v-background-grid","shape-rendering":"crispEdges"},qr=["d"],Rr=["d"],Wr=["d"],Fr=["d"],Hr=t.defineComponent({setup(e,{expose:n}){const{container:o,svgPanZoom:i}=a(),{zoomLevel:s}=ur(),l=r(t.inject(Io),"event emitter"),c=Zt("view"),u=t.ref({x:0,y:0}),d=t.ref({width:500,height:500});t.onMounted((()=>{var e;const t=null==(e=i.value)?void 0:e.getPan();t&&(u.value={x:-t.x,y:-t.y});const n=o.value.getBoundingClientRect();d.value={width:n.width,height:n.height}})),l.on("view:resize",(e=>{d.value={width:e.width,height:e.height}})),l.on("view:pan",(e=>{u.value={x:-e.x,y:-e.y}})),l.on("view:zoom",(()=>{var e;const t=null==(e=i.value)?void 0:e.getPan();t&&(u.value={x:-t.x,y:-t.y})}));const v=t.ref([]),p=t.ref([]),h=t.ref([]),f=t.ref([]);return t.watchEffect((()=>{const e=[],t=[],n=[],o=[],r=1/s.value,i=c.grid.interval,a=u.value.x*r,l=u.value.y*r,m=Math.floor(d.value.width/i+1)*i,g=Math.floor(d.value.height/i+1)*i,b=(u.value.x+m)*r,y=(u.value.y+g)*r,w=c.grid.thickIncrements,k=c.grid.line.dasharray,E=c.grid.thick.dasharray;let x={stroke:c.grid.thick.color,"stroke-width":c.grid.thick.width,"stroke-dasharray":E,"stroke-dashoffset":E?a/r:void 0},P={stroke:c.grid.line.color,"stroke-width":c.grid.line.width,"stroke-dasharray":k,"stroke-dashoffset":k?a/r:void 0};const S=(u.value.x+m)*r;for(let s=l;s<=y;s+=i){const t=Math.floor(s/i);w&&t%w==0?e.push([t,t*i,a,S,x]):n.push([t,t*i,a,S,P])}x=__spreadValues({},x),x["stroke-dashoffset"]=E?l/r:void 0,P=__spreadValues({},P),P["stroke-dashoffset"]=k?l/r:void 0;const M=(u.value.y+g)*r;for(let s=a;s<=b;s+=i){const e=Math.floor(s/i);w&&e%w==0?t.push([e,e*i,l,M,x]):o.push([e,e*i,l,M,P])}p.value=e,v.value=t,f.value=n,h.value=o})),n({thickVerticals:v,thickHorizontals:p,normalVerticals:h,normalHorizontals:f}),(e,n)=>(t.openBlock(),t.createElementBlock("g",$r,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.value,(([e,n,o,r,i])=>(t.openBlock(),t.createElementBlock("path",t.mergeProps({key:`nv${e}`,d:`M ${o} ${n} L ${r} ${n}`},i,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,qr)))),128)),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(h.value,(([e,n,o,r,i])=>(t.openBlock(),t.createElementBlock("path",t.mergeProps({key:`nh${e}`,d:`M ${n} ${o} L ${n} ${r}`},i,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Rr)))),128)),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.value,(([e,n,o,r,i])=>(t.openBlock(),t.createElementBlock("path",t.mergeProps({key:`tv${e}`,d:`M ${o} ${n} L ${r} ${n}`},i,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Wr)))),128)),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.value,(([e,n,o,r,i])=>(t.openBlock(),t.createElementBlock("path",t.mergeProps({key:`th${e}`,d:`M ${n} ${o} L ${n} ${r}`},i,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Fr)))),128))]))}});function Gr(...e){return e.find((e=>!!e))}const Xr=100*Number.EPSILON;function Ur(e,t,n,o,r,i,a,s){var l;const c=e.edges,u=function(e){const t=e.length;if(t<=1)return[!0];const n=[];let o=null;for(let r=0;r<t;r++){const i=e[r].edge.source,a=e[r].edge.target;let s;if(0===r)if(t>2){const t=[i,a].sort(),n=[e[1].edge.source,e[1].edge.target].sort();if(t[0]===n[0]&&t[1]===n[1]){s=[e[2].edge.source,e[2].edge.target].includes(e[1].edge.target)?a===e[1].edge.source:a===e[1].edge.target}else s=[e[1].edge.source,e[1].edge.target].includes(a)}else s=[e[1].edge.source,e[1].edge.target].includes(a);else s=o===i;n.push(s),o=s?a:i}return n}(c),d=c.map(((e,t)=>function(e,t,n){let o=n.origin,r=e.edge.source,i=e.edge.target,a=n.curve;t||(o=function(e){return{p1:e.p2,p2:e.p1}}(o),r=e.edge.target,i=e.edge.source,a&&(a=__spreadProps(__spreadValues({},a),{theta:-a.theta})));const s=Kn.fromLinePosition(o);return{edgeId:e.edgeId,source:r,target:i,line:s,curve:a}}(e,u[t],o[e.edgeId]))),v=[];let p=!1,h=!1;{const e=d[0];let o=Jr(t[e.source].shape)*r;const i=s+("edgeOfNode"===a?o:0),l=i<=0?e.line.source:Yr(e,i,n,!0);if(v.push(l),o=Jr(t[e.target].shape)*r,s>0){Yn.distance(e.line.source,e.line.target)<=i+o&&(p=!0)}}const f=c.length;for(let m=1;m<f;m++){const e=d[m-1],o=d[m],a=o.source,s=Un.fromObject(null!=(l=n[a])?l:{x:0,y:0}),c=Kr(e,o,s),u=Jr(t[a].shape)*r,p=Math.max(u*(2/3),u-4*r),h=Qr(e,s,p,!0),f=Qr(o,s,p,!1),g=Qr(e,s,u,!0),b=Qr(o,s,u,!1);let y;if(c){const t=Yn.distance(c,s);if(t<p)y=[Gr(h,g,e.line.target),c,Gr(f,b,o.line.source)];else if(t<=u){let t,n;t=g&&h?Yn.distance(c,h)<Yn.distance(c,g)?h:g:g||e.line.target,n=b&&f?Yn.distance(c,f)<Yn.distance(c,b)?f:b:b||o.line.source,y=[t,c,n]}else y=h&&f?[h,s,f]:g&&b?[g,s,b]:[Gr(h,g,e.line.target),s,Gr(f,b,o.line.source)]}else y=h&&f?[h,s,f]:g&&b?[g,s,b]:[e.line.target,s,o.line.source];if(e.curve){const t=v[v.length-1];if(t){const n=t instanceof Array?t[t.length-1]:t;let o;o=y instanceof Array?i?y[0]:y[1]:y;const r=uo(n,e.curve.circle.center,o,e.curve.theta);y instanceof Array&&i?v.push([...r,...y]):v.push([...r,o])}}else!i&&y instanceof Array?o.curve?v.push(y[1]):v.push(y[0],y[2]):v.push(y)}{const e=d[d.length-1];let o=Jr(t[e.target].shape)*r;const i=s+("edgeOfNode"===a?o:0),l=i<=0?e.line.target:Yr(e,i,n,!1);o=Jr(t[e.source].shape)*r;const c=e.curve;if(c){const e=v[v.length-1],t=uo(e instanceof Array?e[e.length-1]:e,c.circle.center,l,c.theta);v.push([...t,l])}else v.push(l);if(s>0){Yn.distance(e.line.source,e.line.target)<=i+o&&(h=!0)}}return p&&(v.shift(),v[0]instanceof Array&&v.unshift(v[0][0])),h&&v.pop(),v}function Yr(e,t,n,o){const r=o?e.source:e.target,i=e.curve;if(i){let n=t/i.circle.radius;return i.theta>0&&(n*=-1),o||(n*=-1),Un.fromObject(lo(o?e.line.source:e.line.target,i.circle.center,n))}{let i,a;o?(i=e.line.target,a=e.line.source):(i=e.line.source,a=e.line.target);const s=oo(i,a,Un.fromObject(n[r]),t);return null===s?i:s}}function Kr(e,t,n){let o=null;if(e.curve)if(t.curve){if(e.line.target.isEqualTo(t.line.source))return e.line.target.clone();o=io(e.curve.circle.center,e.curve.circle.radius,t.curve.circle.center,t.curve.circle.radius,e.curve.center)}else o=function(e,t,n,o,r){if(!(Yn.lengthSquared(Yn.subtract(t,n))-o*o<=Math.pow(1,-10)))return null;const i=Kn.fromVectors(e,t),a=no(n,i),s=Yn.length(Yn.subtract(a,n));if(o<s)return null;if(o===s)return a;const l=Math.sqrt(__pow(o,2)-__pow(s,2)),c=i.v.normalize().multiplyScalar(l),u=a.clone().add(c),d=a.clone().subtract(c),v=r.distance(u),p=r.distance(d);return Math.abs(v-p)<2?d:v<p?u:d}(t.line.target,t.line.source,e.curve.circle.center,e.curve.circle.radius,n);else if(t.curve)o=oo(e.line.source,e.line.target,t.curve.circle.center,t.curve.circle.radius);else{const n=ei(e.line),r=ei(t.line);o=!isFinite(n)&&!isFinite(r)||Math.abs(n-r)<Xr?null:ro(e.line,t.line)}return o}function Qr(e,t,n,o){return e.curve?io(t,n,e.curve.circle.center,e.curve.circle.radius,Un.fromObject(e.curve.center)):oo(o?e.line.source:e.line.target,o?e.line.target:e.line.source,t,n)}function Jr(e){return"circle"==e.type?e.radius:Math.min(e.width,e.height)/2}function ei(e){return(e.target.y-e.source.y)/(e.target.x-e.source.x)}const ti=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","stroke-linejoin"];var ni=wr(t.defineComponent({props:{points:{type:Array,required:!0},path:{type:Object,required:!0}},setup(e,{expose:n}){const o=e,{scale:r}=ur(),i=Dt(),a=t.computed((()=>{let e=!0;return o.points.map((t=>{if(null!==t){if(t instanceof Array){t=[...t];const e=[];if(t.length%2==1){const n=t[0];t=t.slice(1),e.push(`L ${n.x} ${n.y}`)}return Cr(t,2).map((([t,n])=>e.push(`Q ${t.x} ${t.y} ${n.x} ${n.y}`))),e.join(" ")}{const n=e;return e=!1,`${n?"M ":"L "}${t.x} ${t.y}`}}e=!0})).join(" ")})),l=t.computed((()=>{const e=o.path;return e.selected?s.values(i.selected,e.path):e.hovered&&i.hover?s.values(i.hover,e.path):s.values(i.normal,e.path)})),c=t.computed((()=>v(l.value.dasharray,r.value))),u=t.computed((()=>{const e=!!l.value.animate&&p(l.value.dasharray)*l.value.animationSpeed*r.value;return e?`--animation-speed:${e}`:void 0}));return n({d:a,scale:r,config:l,strokeDasharray:c,animationSpeed:u}),(e,n)=>(t.openBlock(),t.createElementBlock("path",{class:t.normalizeClass({"v-path-line":!0,animate:t.unref(l).animate}),d:t.unref(a),fill:"none",stroke:t.unref(l).color,"stroke-width":t.unref(l).width*t.unref(r),"stroke-dasharray":t.unref(c),"stroke-linecap":t.unref(l).linecap,"stroke-linejoin":t.unref(l).linejoin,style:t.normalizeStyle(t.unref(u))},null,14,ti))}}),[["__scopeId","data-v-e0c8fe90"]]);var oi=wr(t.defineComponent({setup(e,{expose:n}){const{pathZOrderedList:o,nodeStates:r,edgeStates:i,layouts:a}=ko(),{scale:l}=ur(),c=Dt(),{handlePathPointerDownEvent:u,handlePathPointerOverEvent:d,handlePathPointerOutEvent:v,handlePathClickEvent:p,handlePathDoubleClickEvent:h,handlePathContextMenu:f}=To(),m=t.computed((()=>e=>{if(0===e.edges.length)return[];const t=s.value(c.margin,e.path)*l.value;return Ur(e,r,a.nodes,i,l.value,c.curveInNode,c.end,t)}));return n({pathConfig:c,pathZOrderedList:o,calcPathPoints:m,handlePathPointerDownEvent:u,handlePathPointerOverEvent:d,handlePathPointerOutEvent:v,handlePathClickEvent:p,handlePathDoubleClickEvent:h,handlePathContextMenu:f}),(e,n)=>(t.openBlock(),t.createBlock(t.TransitionGroup,{name:t.unref(c).transition,css:!!t.unref(c).transition,tag:"g",class:"v-paths"},{default:t.withCtx((()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(o),(e=>(t.openBlock(),t.createBlock(ni,{key:e.id,points:t.unref(m)(e),class:t.normalizeClass({clickable:e.clickable,hoverable:e.hoverable}),path:e,onPointerdown:n=>t.unref(u)(e.id,n),onPointerenterPassive:n=>t.unref(d)(e.id,n),onPointerleavePassive:n=>t.unref(v)(e.id,n),onClick:t.withModifiers((n=>t.unref(p)(e.id,n)),["stop"]),onDblclick:t.withModifiers((n=>t.unref(h)(e.id,n)),["stop"]),onContextmenu:n=>t.unref(f)(e.id,n)},null,8,["points","class","path","onPointerdown","onPointerenterPassive","onPointerleavePassive","onClick","onDblclick","onContextmenu"])))),128))])),_:1},8,["name","css"]))}}),[["__scopeId","data-v-5ef199da"]]);const ri=["points","fill"],ii=t.defineComponent({props:{width:{type:Number,required:!0},height:{type:Number,required:!0},refX:{type:Number,required:!0},color:{type:String,required:!0},isSource:{type:Boolean,required:!0},units:{type:String,required:!0}},setup(e){const n=e,o=t.computed((()=>{const e=n.width,t=n.height;return n.isSource?`${e} ${t}, 0 ${t/2}, ${e} 0`:`0 0, ${e} ${t/2}, 0 ${t}`}));return(n,r)=>(t.openBlock(),t.createElementBlock("polygon",{points:t.unref(o),fill:e.color},null,8,ri))}}),ai=["points","stroke-width","stroke"],si=t.defineComponent({props:{width:{type:Number,required:!0},height:{type:Number,required:!0},refX:{type:Number,required:!0},color:{type:String,required:!0},isSource:{type:Boolean,required:!0},units:{type:String,required:!0}},setup(e){const n=e,o=t.computed((()=>"strokeWidth"===n.units?1:Math.min(n.width,n.height)/5)),r=t.computed((()=>{const e=o.value/2,t=n.width,r=n.height;return n.isSource?`${t-e} ${r-e}, ${e} ${r/2}, ${t-e} ${e}`:`${e} ${e}, ${t-e} ${r/2}, ${e} ${r-e}`}));return(n,i)=>(t.openBlock(),t.createElementBlock("polyline",{points:t.unref(r),fill:"none","stroke-width":t.unref(o),stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,ai))}}),li=["fill","cx","cy","rx","ry"],ci=t.defineComponent({props:{width:{type:Number,required:!0},height:{type:Number,required:!0},refX:{type:Number,required:!0},color:{type:String,required:!0},isSource:{type:Boolean,required:!0},units:{type:String,required:!0}},setup:e=>(n,o)=>(t.openBlock(),t.createElementBlock("ellipse",{fill:e.color,cx:e.width/2,cy:e.height/2,rx:e.width/2,ry:e.height/2},null,8,li))}),ui=["id","markerWidth","markerHeight","refX","refY","markerUnits"],di=t.defineComponent({props:{id:{type:String,required:!0},marker:{type:Object,required:!0},scale:{type:Number,required:!0}},setup(e){const n=e,o={arrow:ii,angle:si,circle:ci},r=t.computed((()=>n.marker.width*("strokeWidth"===n.marker.units?1:n.scale))),i=t.computed((()=>n.marker.height*("strokeWidth"===n.marker.units?1:n.scale))),a=t.computed((()=>{const e=n.marker.margin*("strokeWidth"===n.marker.units?1:n.scale);return n.marker.isSource?r.value+e:-e}));return(n,s)=>"none"!==e.marker.type&&"custom"!==e.marker.type?(t.openBlock(),t.createElementBlock("marker",{key:0,id:e.id,markerWidth:t.unref(r),markerHeight:t.unref(i),refX:t.unref(a),refY:t.unref(i)/2,orient:"auto",markerUnits:e.marker.units,class:"v-marker"},[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(o[e.marker.type]),{width:t.unref(r),height:t.unref(i),refX:t.unref(a),color:e.marker.color,"is-source":e.marker.isSource,units:e.marker.units},null,8,["width","height","refX","color","is-source","units"]))],8,ui)):t.createCommentVNode("",!0)}});const vi=["override-node","override-node-label","edge-label","edges-label"],pi=t.defineComponent({components:{VNode:Er,VNodeFocusRing:xr,VEdgeGroups:Ir,VEdgeBackgrounds:Ar,VEdgeLabels:Dr,VBackgroundViewport:Vr,VBackgroundGrid:Hr,VPaths:oi,VMarkerHead:di},props:{nodes:{type:Object,default:()=>({})},edges:{type:Object,default:()=>({})},paths:{type:[Object,Array],default:()=>({})},layouts:{type:Object,default:()=>({})},zoomLevel:{type:Number,default:1},selectedNodes:{type:Array,default:()=>[]},selectedEdges:{type:Array,default:()=>[]},selectedPaths:{type:Array,default:()=>[]},configs:{type:Object,default:()=>({})},layers:{type:Object,default:()=>({})},eventHandlers:{type:Object,default:()=>({})}},emits:["update:zoomLevel","update:selectedNodes","update:selectedEdges","update:selectedPaths","update:layouts"],setup(e,{emit:a,slots:s}){const l=t.toRef(e,"nodes"),c=t.toRef(e,"edges"),{objects:u,isInCompatibilityModeForPath:d}=function(e){const n=t.ref({}),o=t.ref(!1);let r=1;const i=new Map;return t.watchEffect((()=>{if(e.value instanceof Array){const t=new Set([]);if(n.value=Object.fromEntries(e.value.map((e=>{let n=e.id;return n||(o.value||(o.value=!0,console.warn("[v-network-graph] Please specify the `id` field for the `Path` object. Currently, this works for compatibility, but in the future, the id field will be required.")),n=i.get(e),n||(n="path-"+r++,i.set(e,n))),t.add(n),[n,e]}))),o.value)for(const[e,n]of Array.from(i.entries()))t.has(n)||i.delete(e)}else n.value=e.value})),{objects:n,isInCompatibilityModeForPath:o}}(t.toRef(e,"paths")),v=No();Object.entries(e.eventHandlers).forEach((([e,t])=>{v.on(e,t)}));const p=function(e){const n=t.reactive(It()),o=Object.keys(n);for(const r of o)t.watch((()=>e.value[r]),(()=>{Tt(n[r],e.value[r]||{})}),{immediate:!0,deep:!0});return t.provide(Nt,n),n}(t.toRef(e,"configs")),h=t.computed((()=>{const t=new Set(Object.keys(s));vi.forEach((e=>t.delete(e)));const o=Object.fromEntries(n.map((e=>[e,[]])));return Object.assign(o,Object.entries(e.layers).reduce(((e,[n,o])=>(t.delete(n),o in e?e[o].push(n):e[o]=[n],e)),{})),o.root.push(...t),o})),f=t.computed((()=>p.view.grid.visible)),m=t.computed((()=>{const e=h.value;return f.value||e.background.length>0||e.grid.length>0})),g=t.computed((()=>"override-node"in s)),b=t.computed((()=>"override-node-label"in s)),y=t.computed((()=>"edge-label"in s)),w=t.computed((()=>"edges-label"in s)),k=t.ref(),E=t.ref(),x=t.ref(),P=t.ref(0),S=t.computed((()=>0!==P.value)),M=function(e,n,o,r){if(r){const i=t.ref(r(e[n])),a=t=>{Sn(t,i.value)||(i.value=t),Sn(t,e[n])||o(`update:${n}`,t)};return t.watch((()=>r(i.value)),a),t.watch((()=>e[n]),(e=>a(r(e)))),i.value!==e[n]&&o(`update:${n}`,i.value),i}const i=t.ref(e[n]);return t.watch((()=>e[n]),(e=>{Sn(e,i.value)||(i.value=e)})),t.watch(i,(t=>{Sn(t,e[n])||o(`update:${n}`,t)})),i}(e,"zoomLevel",a,(e=>(e=Math.max(e,p.view.minZoomLevel),e=Math.min(e,p.view.maxZoomLevel)))),{svgPanZoom:O,onSvgPanZoomMounted:_,onSvgPanZoomUnmounted:C}=lr(E,{viewportSelector:".v-viewport",minZoom:p.view.minZoomLevel,maxZoom:p.view.maxZoomLevel,dblClickZoomEnabled:hi(p.view),mouseWheelZoomEnabled:fi(p.view),fit:!0,center:!0,zoomEnabled:p.view.zoomEnabled,preventMouseEventsDefault:!1,onZoom:e=>{var t,n;if(2===P.value)return;const o=null!=(n=null==(t=O.value)?void 0:t.getRealZoom())?n:1;Math.abs(M.value-o)>=1e-6&&(M.value=o,v.emit("view:zoom",o))},panEnabled:p.view.panEnabled,onPan:e=>{2!==P.value&&v.emit("view:pan",e)}});var z;z={container:k,svg:E,viewport:x,svgPanZoom:O},t.provide(i,z);const B={width:0,height:0},j=globalThis.ResizeObserver?new ResizeObserver((()=>{var e,t,n;if(null==(e=O.value)||e.resize(),!p.view.autoPanOnResize)return;const o=null==(t=k.value)?void 0:t.getBoundingClientRect();if(o){const e=-(B.width-o.width)/2,t=-(B.height-o.height)/2;null==(n=O.value)||n.panBy({x:e,y:t});const{width:r,height:i}=o;B.width===r&&B.height===i||(Object.assign(B,{width:r,height:i}),v.emit("view:resize",{x:o.x,y:o.y,width:r,height:i}))}})):void 0;_((()=>{var e,t,n;const o=r(k.value,"svg-pan-zoom container");null==j||j.observe(o),null==(t=(e=p.view).onSvgPanZoomInitialized)||t.call(e,r(O.value,"svg-pan-zoom instance"));const i=o.getBoundingClientRect(),{width:a,height:s}=i;Object.assign(B,{width:a,height:s}),null==(n=x.value)||n.addEventListener("touchstart",mi,{passive:!1})})),C((()=>{var e;null==j||j.disconnect(),null==(e=x.value)||e.removeEventListener("touchstart",mi)}));const T=e=>{var t;null==(t=O.value)||t.applyAbsoluteZoomLevel(e,p.view.minZoomLevel,p.view.maxZoomLevel)};t.watch((()=>p.view.panEnabled),(e=>{var t;null==(t=O.value)||t.setPanEnabled(e)})),t.watch((()=>[p.view.zoomEnabled,hi(p.view),fi(p.view)]),(e=>{!function(e,t,n,o){e.setZoomEnabled(t),t&&n?e.enableDblClickZoom():e.disableDblClickZoom();t&&o?e.enableMouseWheelZoom():e.disableMouseWheelZoom()}(O.value,p.view.zoomEnabled,p.view.doubleClickZoomEnabled,p.view.mouseWheelZoomEnabled)})),t.watch(M,(e=>T(e))),t.watch((()=>[p.view.minZoomLevel,p.view.maxZoomLevel]),(e=>{T(M.value)}));const{scale:I}=function(e,n){const o=t.computed((()=>n.scalingObjects?1:1/e.value));return t.provide(cr,{zoomLevel:e,scale:o}),{scale:o}}(M,p.view);_((()=>{const t=e.zoomLevel;T(t)}));const N=n=>{var o;Object.keys(e.nodes).length>0?(null==(o=O.value)||o.updateBBox(),t.nextTick(n)):n()},Z=()=>{N((()=>{O.value&&(O.value.fitToContents(),v.emit("view:fit",void 0))}))},A=()=>{N((()=>{var e;null==(e=O.value)||e.center()}))},L=vr(e,"selectedNodes",l,a);t.watch(L,(e=>v.emit("node:select",Array.from(e))));const D=vr(e,"selectedEdges",c,a);t.watch(D,(e=>v.emit("edge:select",Array.from(e))));const V=vr(e,"selectedPaths",u,a);t.watch(V,(e=>v.emit("path:select",Array.from(e))));const $=o(new Set),q=o(new Set),R=o(new Set),W=o({nodes:{}});t.watch((()=>e.layouts),(()=>Object.assign(W,e.layouts)),{deep:!0,immediate:!0}),t.watch(W,(()=>a("update:layouts",W)),{deep:!0});const F=t.computed((()=>p.node.focusring.visible)),H={markers:t.reactive({}),referenceCount:{}},G=t.ref(!1);v.on("node:dragstart",(e=>G.value=!0)),v.on("node:dragend",(e=>G.value=!1)),v.on("view:mode",(e=>{var t,n,o,r;p.view.panEnabled&&("default"===e?null==(t=O.value)||t.enablePan():null==(n=O.value)||n.disablePan()),p.view.zoomEnabled&&("default"===e?null==(o=O.value)||o.enableZoom():null==(r=O.value)||r.disableZoom())}));const X=t.computed((()=>p.view.panEnabled||p.view.zoomEnabled||p.node.draggable)),{nodeStates:U,nodeZOrderedList:Y,edgeStates:K,pathStates:Q}=yo(mo(l,L,$),mo(c,D,q),mo(u,V,R),t.readonly(p),W,H,I),J=t.computed((()=>fi(p.view)));jo(E,t.readonly(W.nodes),t.readonly(M),U,K,Q,L,D,V,$,q,R,d,J,v);const ee=t.computed((()=>p.path.visible)),te=()=>({layouts:o(W.nodes),nodes:l,edges:c,configs:t.readonly(p),scale:t.readonly(I),emitter:v,svgPanZoom:r(O.value)});t.watch((()=>p.view.layoutHandler),((e,t)=>{t.deactivate(),e.activate(te())}));const{transitionWhile:ne,transitionOption:oe}=dr(),re=t.computed((()=>{const e=oe.value;return e.enabled?{"--transition-duration":e.duration+"ms","--transition-function":e.timingFunction}:{}}));return _((()=>{N((()=>{const n=r(O.value,"svg-pan-zoom");p.view.layoutHandler.activate(te()),t.nextTick((()=>{const t=p.view.autoPanAndZoomOnLoad;if(p.view.fit||!1!==t){if(0==Object.keys(e.nodes).length||"center-zero"===t){const e=n.getSizes();n.pan({x:e.width/2,y:e.height/2})}else"fit-content"===t||p.view.fit?Z():"center-content"===t&&A()}v.emit("view:load"),P.value=1}))}))})),C((()=>{P.value=2,v.emit("view:unload"),p.view.layoutHandler.deactivate()})),{container:k,svg:E,viewport:x,show:S,svgPanZoom:O,allConfigs:p,layerDefs:h,isShowGrid:f,isShowBackgroundViewport:m,overrideNodes:g,overrideNodeLabels:b,overrideEdgeLabels:y,overrideEdgesLabels:w,scale:I,nodeStates:U,nodeZOrderedList:Y,currentSelectedNodes:L,markers:H.markers,dragging:G,touches:X,currentLayouts:W,visibleNodeFocusRing:F,visiblePaths:ee,transitionOption:oe,transitionStyles:re,fitToContents:Z,panToCenter:A,getViewBox:()=>{var e,t;return null!=(t=null==(e=O.value)?void 0:e.getViewBox())?t:{top:0,bottom:0,left:0,right:0}},setViewBox:e=>{var t;return null==(t=O.value)?void 0:t.setViewBox(e)},transitionWhile:ne}},methods:{zoomIn(){var e;null==(e=this.svgPanZoom)||e.zoomIn()},zoomOut(){var e;null==(e=this.svgPanZoom)||e.zoomOut()},panTo(e){var t;null==(t=this.svgPanZoom)||t.pan(e)},panBy(e){var t;null==(t=this.svgPanZoom)||t.panBy(e)},getPan(){return r(this.svgPanZoom).getPan()},getSizes(){const e=r(this.svgPanZoom).getSizes();return{width:e.width,height:e.height,viewBox:e.viewBox}},translateFromDomToSvgCoordinates(e){return function(e,t,n){var o;const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const i=r.matrixTransform(null==(o=t.getCTM())?void 0:o.inverse());return{x:i.x,y:i.y}}(r(this.svg,"svg"),r(this.viewport,"viewport"),e)},translateFromSvgToDomCoordinates(e){return function(e,t,n){const o=e.createSVGPoint();o.x=n.x,o.y=n.y;const r=o.matrixTransform(t.getCTM());return{x:r.x,y:r.y}}(r(this.svg,"svg"),r(this.viewport,"viewport"),e)},getAsSvg(){const e=r(this.svg,"svg"),t=r(this.viewport,"svg viewport"),n=e.cloneNode(!0),o=t.getBBox(),i=1/this.scale,a={x:Math.floor((o.x-10)*i),y:Math.floor((o.y-10)*i),width:Math.ceil((o.width+20)*i),height:Math.ceil((o.height+20)*i)};n.setAttribute("width",a.width.toString()),n.setAttribute("height",a.height.toString());const s=n.querySelector(".v-viewport");s.setAttribute("transform",`translate(${-a.x} ${-a.y}), scale(${i})`),s.removeAttribute("style"),n.setAttribute("viewBox",`0 0 ${a.width} ${a.height}`);let l=n.outerHTML;return l=l.replaceAll(/ data-v-[0-9a-z]+=""/g,""),l=l.replaceAll(/<!--[\s\S]*?-->/gm,""),l}}});function hi(e){return e.zoomEnabled&&e.doubleClickZoomEnabled}function fi(e){return e.zoomEnabled&&e.mouseWheelZoomEnabled}function mi(e){e.stopPropagation()}const gi={ref:"container",class:"v-network-graph"},bi={key:0},yi={class:"v-layer-edges"},wi={key:2,class:"v-layer-nodes-selections"};var ki=wr(pi,[["render",function(e,n,o,r,i,a){const s=t.resolveComponent("v-marker-head"),l=t.resolveComponent("v-background-grid"),c=t.resolveComponent("v-background-viewport"),u=t.resolveComponent("v-edge-backgrounds"),d=t.resolveComponent("v-edge-groups"),v=t.resolveComponent("v-edge-labels"),p=t.resolveComponent("v-node-focus-ring"),h=t.resolveComponent("v-node"),f=t.resolveComponent("v-paths");return t.openBlock(),t.createElementBlock("div",gi,[(t.openBlock(),t.createElementBlock("svg",{ref:"svg",class:t.normalizeClass(["v-canvas",{show:e.show,dragging:e.dragging,touches:e.touches}]),width:"500",height:"500",viewBox:"0 0 500 500"},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.root,(n=>t.renderSlot(e.$slots,n,{key:n,scale:e.scale},void 0,!0))),128)),Object.keys(e.markers).length>0?(t.openBlock(),t.createElementBlock("defs",bi,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.markers,((n,o)=>(t.openBlock(),t.createBlock(s,{id:o,key:o,marker:n,scale:e.scale},null,8,["id","marker","scale"])))),128))])):t.createCommentVNode("",!0),e.isShowBackgroundViewport?(t.openBlock(),t.createBlock(c,{key:1},{default:t.withCtx((()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.background,(n=>(t.openBlock(),t.createElementBlock("g",{key:n,class:"v-layer"},[t.renderSlot(e.$slots,n,{scale:e.scale},void 0,!0)])))),128)),e.isShowGrid?(t.openBlock(),t.createBlock(l,{key:0})):t.createCommentVNode("",!0),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.grid,(n=>(t.openBlock(),t.createElementBlock("g",{key:n,class:"v-layer"},[t.renderSlot(e.$slots,n,{scale:e.scale},void 0,!0)])))),128))])),_:3})):t.createCommentVNode("",!0),t.createElementVNode("g",{ref:"viewport",class:t.normalizeClass(["v-viewport",{"v-transition":e.transitionOption.enabled}]),style:t.normalizeStyle(e.transitionStyles)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.base,(n=>(t.openBlock(),t.createElementBlock("g",{key:n,class:"v-layer"},[t.renderSlot(e.$slots,n,{scale:e.scale},void 0,!0)])))),128)),t.createElementVNode("g",yi,[t.createVNode(u),t.createVNode(d)]),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.edges,(n=>(t.openBlock(),t.createElementBlock("g",{key:n,class:"v-layer"},[t.renderSlot(e.$slots,n,{scale:e.scale},void 0,!0)])))),128)),e.overrideEdgeLabels?(t.openBlock(),t.createBlock(v,{key:0},{"edge-label":t.withCtx((n=>[t.renderSlot(e.$slots,"edge-label",t.normalizeProps(t.guardReactiveProps(n)),void 0,!0)])),_:3})):t.createCommentVNode("",!0),e.overrideEdgesLabels?(t.openBlock(),t.createBlock(v,{key:1},{"edges-label":t.withCtx((n=>[t.renderSlot(e.$slots,"edges-label",t.normalizeProps(t.guardReactiveProps(n)),void 0,!0)])),_:3})):t.createCommentVNode("",!0),e.visibleNodeFocusRing?(t.openBlock(),t.createElementBlock("g",wi,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.currentSelectedNodes,(n=>(t.openBlock(),t.createBlock(p,{id:n,key:n,state:e.nodeStates[n],pos:e.currentLayouts.nodes[n]},null,8,["id","state","pos"])))),128))])):t.createCommentVNode("",!0),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.focusring,(n=>(t.openBlock(),t.createElementBlock("g",{key:n,class:"v-layer"},[t.renderSlot(e.$slots,n,{scale:e.scale},void 0,!0)])))),128)),t.createVNode(t.TransitionGroup,{name:e.allConfigs.node.transition,css:!!e.allConfigs.node.transition,tag:"g",class:"v-layer-nodes"},{default:t.withCtx((()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.nodeZOrderedList,(n=>(t.openBlock(),t.createBlock(h,{id:n.id,key:n.id,state:n,pos:e.currentLayouts.nodes[n.id]},t.createSlots({_:2},[e.overrideNodes?{name:"override-node",fn:t.withCtx((n=>[t.renderSlot(e.$slots,"override-node",t.normalizeProps(t.guardReactiveProps(n)),void 0,!0)]))}:void 0,e.overrideNodeLabels?{name:"override-node-label",fn:t.withCtx((n=>[t.renderSlot(e.$slots,"override-node-label",t.normalizeProps(t.guardReactiveProps(n)),void 0,!0)]))}:void 0]),1032,["id","state","pos"])))),128))])),_:3},8,["name","css"]),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.nodes,(n=>(t.openBlock(),t.createElementBlock("g",{key:n,class:"v-layer"},[t.renderSlot(e.$slots,n,{scale:e.scale},void 0,!0)])))),128)),e.visiblePaths?(t.openBlock(),t.createBlock(f,{key:3})):t.createCommentVNode("",!0),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.paths,(n=>(t.openBlock(),t.createElementBlock("g",{key:n,class:"v-layer"},[t.renderSlot(e.$slots,n,{scale:e.scale},void 0,!0)])))),128))],6)],2))],512)}],["__scopeId","data-v-844b9d08"]]);const Ei=t.defineComponent({props:{area:{type:Object,required:!0},config:{type:Object,required:!0},text:{type:String,required:!1,default:""},align:{type:String,required:!1,default:"center"},verticalAlign:{type:String,required:!1,default:"center"},edge:{type:Object,required:!1,default:void 0},hovered:{type:Boolean,required:!1,default:!1},selected:{type:Boolean,required:!1,default:!1},scale:{type:Number,required:!1,default:void 0}},setup(e,{expose:n}){const o=e,r=t.ref(0),i=t.ref(0),a=t.ref("middle"),s=t.ref("central"),l=t.ref(0);t.watchEffect((()=>{const e=o.area.source,t=o.area.target;"source"===o.align?(e.above.x==t.above.x?a.value=e.above.y>t.above.y?"start":"end":a.value=e.above.x<t.above.x?"start":"end","above"===o.verticalAlign?(r.value=e.above.x,i.value=e.above.y,s.value="text-top"):"below"===o.verticalAlign?(r.value=e.below.x,i.value=e.below.y,s.value="hanging"):(r.value=(e.above.x+e.below.x)/2,i.value=(e.above.y+e.below.y)/2,s.value="central")):"target"===o.align?(e.above.x==t.above.x?a.value=e.above.y<t.above.y?"start":"end":a.value=e.above.x>t.above.x?"start":"end","above"===o.verticalAlign?(r.value=t.above.x,i.value=t.above.y,s.value="text-top"):"below"===o.verticalAlign?(r.value=t.below.x,i.value=t.below.y,s.value="hanging"):(r.value=(t.above.x+t.below.x)/2,i.value=(t.above.y+t.below.y)/2,s.value="central")):(a.value="middle","above"===o.verticalAlign?(r.value=(e.above.x+t.above.x)/2,i.value=(e.above.y+t.above.y)/2,s.value="text-top"):"below"===o.verticalAlign?(r.value=(e.below.x+t.below.x)/2,i.value=(e.below.y+t.below.y)/2,s.value="hanging"):(r.value=(e.above.x+t.below.x)/2,i.value=(e.above.y+t.below.y)/2,s.value="central"));let n=Kn.fromPositions(e.above,t.above).v.angleDegree();(n<-90||n>=90)&&(n+=180,n>180&&(n-=360)),l.value=n}));const c=t.computed((()=>"central"!==s.value||o.config.background?o.config:__spreadProps(__spreadValues({},o.config),{background:{visible:!0,color:"#ffffff",padding:{vertical:1,horizontal:4},borderRadius:2}})));return n({x:r,y:i,textAnchor:a,dominantBaseline:s,angle:l,updatedConfig:c}),(n,o)=>(t.openBlock(),t.createBlock(yr,{class:"v-edge-label",text:e.text,x:r.value,y:i.value,config:t.unref(c),"text-anchor":a.value,"dominant-baseline":s.value,transform:`rotate(${l.value} ${r.value} ${i.value})`},null,8,["text","x","y","config","text-anchor","dominant-baseline","transform"]))}});var xi=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",VNetworkGraph:ki,VShape:fr,VEdgeLabel:Ei,VLabelText:yr});e.Config=s,e.GridLayout=class extends G{constructor(e={}){super(),this.options=e}setNodePosition(e,t){const n=this.options.grid||10;e.value.x=Math.floor(t.x/n)*n,e.value.y=Math.floor(t.y/n)*n}},e.LayerPositions=n,e.NodeLabelDirection=l,e.SimpleLayout=G,e.VEdgeLabel=Ei,e.VLabelText=yr,e.VNetworkGraph=ki,e.VShape=fr,e.Vector2D=Un,e.configsWithType=function(e){return e},e.default=function(e){Object.entries(xi).forEach((([t,n])=>{e.component(t,n)}))},e.defineConfigs=function(e){return e},e.getFullConfigs=function(e){const t=It();return e&&Tt(t,e),t},e.useStates=ko,e.withSelf=c,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
//# sourceMappingURL=index.js.map
