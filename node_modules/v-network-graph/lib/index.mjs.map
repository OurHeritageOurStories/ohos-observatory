{"version":3,"file":"index.mjs","sources":["../src/common/types.ts","../src/common/common.ts","../src/composables/container.ts","../src/common/configs.ts","../src/utils/visual.ts","../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/_trimmedEndIndex.js","../node_modules/lodash-es/_baseTrim.js","../node_modules/lodash-es/isObject.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/isSymbol.js","../node_modules/lodash-es/toNumber.js","../node_modules/lodash-es/toFinite.js","../node_modules/lodash-es/toInteger.js","../node_modules/lodash-es/_arrayMap.js","../node_modules/lodash-es/isArray.js","../node_modules/lodash-es/_baseToString.js","../node_modules/lodash-es/toString.js","../node_modules/lodash-es/_createRound.js","../node_modules/lodash-es/round.js","../src/layouts/simple.ts","../node_modules/lodash-es/_listCacheClear.js","../node_modules/lodash-es/eq.js","../node_modules/lodash-es/_assocIndexOf.js","../node_modules/lodash-es/_listCacheDelete.js","../node_modules/lodash-es/_listCacheGet.js","../node_modules/lodash-es/_listCacheHas.js","../node_modules/lodash-es/_listCacheSet.js","../node_modules/lodash-es/_ListCache.js","../node_modules/lodash-es/_stackClear.js","../node_modules/lodash-es/_stackDelete.js","../node_modules/lodash-es/_stackGet.js","../node_modules/lodash-es/_stackHas.js","../node_modules/lodash-es/isFunction.js","../node_modules/lodash-es/_coreJsData.js","../node_modules/lodash-es/_isMasked.js","../node_modules/lodash-es/_toSource.js","../node_modules/lodash-es/_baseIsNative.js","../node_modules/lodash-es/_getValue.js","../node_modules/lodash-es/_getNative.js","../node_modules/lodash-es/_Map.js","../node_modules/lodash-es/_nativeCreate.js","../node_modules/lodash-es/_hashClear.js","../node_modules/lodash-es/_hashDelete.js","../node_modules/lodash-es/_hashGet.js","../node_modules/lodash-es/_hashHas.js","../node_modules/lodash-es/_hashSet.js","../node_modules/lodash-es/_Hash.js","../node_modules/lodash-es/_mapCacheClear.js","../node_modules/lodash-es/_isKeyable.js","../node_modules/lodash-es/_getMapData.js","../node_modules/lodash-es/_mapCacheDelete.js","../node_modules/lodash-es/_mapCacheGet.js","../node_modules/lodash-es/_mapCacheHas.js","../node_modules/lodash-es/_mapCacheSet.js","../node_modules/lodash-es/_MapCache.js","../node_modules/lodash-es/_stackSet.js","../node_modules/lodash-es/_Stack.js","../node_modules/lodash-es/_defineProperty.js","../node_modules/lodash-es/_baseAssignValue.js","../node_modules/lodash-es/_assignMergeValue.js","../node_modules/lodash-es/_createBaseFor.js","../node_modules/lodash-es/_baseFor.js","../node_modules/lodash-es/_cloneBuffer.js","../node_modules/lodash-es/_Uint8Array.js","../node_modules/lodash-es/_cloneArrayBuffer.js","../node_modules/lodash-es/_cloneTypedArray.js","../node_modules/lodash-es/_copyArray.js","../node_modules/lodash-es/_baseCreate.js","../node_modules/lodash-es/_overArg.js","../node_modules/lodash-es/_getPrototype.js","../node_modules/lodash-es/_isPrototype.js","../node_modules/lodash-es/_initCloneObject.js","../node_modules/lodash-es/_baseIsArguments.js","../node_modules/lodash-es/isArguments.js","../node_modules/lodash-es/isLength.js","../node_modules/lodash-es/isArrayLike.js","../node_modules/lodash-es/isArrayLikeObject.js","../node_modules/lodash-es/stubFalse.js","../node_modules/lodash-es/isBuffer.js","../node_modules/lodash-es/isPlainObject.js","../node_modules/lodash-es/_baseIsTypedArray.js","../node_modules/lodash-es/_baseUnary.js","../node_modules/lodash-es/_nodeUtil.js","../node_modules/lodash-es/isTypedArray.js","../node_modules/lodash-es/_safeGet.js","../node_modules/lodash-es/_assignValue.js","../node_modules/lodash-es/_copyObject.js","../node_modules/lodash-es/_baseTimes.js","../node_modules/lodash-es/_isIndex.js","../node_modules/lodash-es/_arrayLikeKeys.js","../node_modules/lodash-es/_nativeKeysIn.js","../node_modules/lodash-es/_baseKeysIn.js","../node_modules/lodash-es/keysIn.js","../node_modules/lodash-es/toPlainObject.js","../node_modules/lodash-es/_baseMergeDeep.js","../node_modules/lodash-es/_baseMerge.js","../node_modules/lodash-es/identity.js","../node_modules/lodash-es/_apply.js","../node_modules/lodash-es/_overRest.js","../node_modules/lodash-es/constant.js","../node_modules/lodash-es/_baseSetToString.js","../node_modules/lodash-es/_shortOut.js","../node_modules/lodash-es/_setToString.js","../node_modules/lodash-es/_baseRest.js","../node_modules/lodash-es/_isIterateeCall.js","../node_modules/lodash-es/_createAssigner.js","../node_modules/lodash-es/merge.js","../src/common/config-defaults.ts","../src/composables/config.ts","../src/composables/id.ts","../node_modules/lodash-es/_setCacheAdd.js","../node_modules/lodash-es/_setCacheHas.js","../node_modules/lodash-es/_SetCache.js","../node_modules/lodash-es/_arraySome.js","../node_modules/lodash-es/_cacheHas.js","../node_modules/lodash-es/_equalArrays.js","../node_modules/lodash-es/_mapToArray.js","../node_modules/lodash-es/_setToArray.js","../node_modules/lodash-es/_equalByTag.js","../node_modules/lodash-es/_arrayPush.js","../node_modules/lodash-es/_baseGetAllKeys.js","../node_modules/lodash-es/_arrayFilter.js","../node_modules/lodash-es/stubArray.js","../node_modules/lodash-es/_getSymbols.js","../node_modules/lodash-es/_nativeKeys.js","../node_modules/lodash-es/_baseKeys.js","../node_modules/lodash-es/keys.js","../node_modules/lodash-es/_getAllKeys.js","../node_modules/lodash-es/_equalObjects.js","../node_modules/lodash-es/_DataView.js","../node_modules/lodash-es/_Promise.js","../node_modules/lodash-es/_Set.js","../node_modules/lodash-es/_WeakMap.js","../node_modules/lodash-es/_getTag.js","../node_modules/lodash-es/_baseIsEqualDeep.js","../node_modules/lodash-es/_baseIsEqual.js","../node_modules/lodash-es/isEqual.js","../src/utils/object.ts","../src/modules/edge/group.ts","../src/modules/vector2d/methods.ts","../src/modules/vector2d/vector2d.ts","../src/modules/vector2d/index.ts","../src/modules/calculation/line.ts","../src/modules/calculation/point.ts","../src/modules/calculation/2d.ts","../src/utils/string.ts","../src/composables/marker.ts","../src/composables/objectState.ts","../src/composables/state.ts","../src/utils/map.ts","../src/composables/mouse/core.ts","../src/composables/mouse/node.ts","../src/composables/mouse/edge.ts","../src/composables/mouse/container.ts","../src/composables/mouse/path.ts","../src/composables/mouse/index.ts","../node_modules/mitt/dist/mitt.mjs","../src/composables/event-emitter.ts","../node_modules/@dash14/svg-pan-zoom/src/utilities.js","../node_modules/@dash14/svg-pan-zoom/src/uniwheel.js","../node_modules/@dash14/svg-pan-zoom/src/svg-utilities.js","../node_modules/@dash14/svg-pan-zoom/src/control-icons.js","../node_modules/@dash14/svg-pan-zoom/src/shadow-viewport.js","../node_modules/@dash14/svg-pan-zoom/src/svg-pan-zoom.js","../src/modules/svg-pan-zoom-ex.ts","../src/composables/svg-pan-zoom.ts","../src/composables/zoom.ts","../src/composables/transition.ts","../src/composables/object.ts","../src/utils/props.ts","../src/utils/svg.ts","../src/components/base/VShape.vue","../src/components/base/VLabelText.vue","../plugin-vue:export-helper","../src/components/node/VNode.vue","../src/components/node/VNodeFocusRing.vue","../src/components/base/VLine.vue","../node_modules/lodash-es/_baseSlice.js","../node_modules/lodash-es/chunk.js","../src/components/edge/VEdgeCurved.vue","../src/components/edge/VEdge.vue","../src/components/edge/VEdgeSummarized.vue","../src/components/edge/VEdgeGroups.vue","../src/components/edge/VEdgeBackground.vue","../src/components/edge/VEdgeBackgrounds.vue","../src/components/edge/VEdgeLabels.vue","../src/components/background/VBackgroundViewport.vue","../src/components/background/VBackgroundGrid.vue","../src/utils/collection.ts","../src/modules/calculation/path.ts","../src/components/path/VPathLine.vue","../src/components/path/VPaths.vue","../src/components/marker/VMarkerHeadArrow.vue","../src/components/marker/VMarkerHeadAngle.vue","../src/components/marker/VMarkerHead.vue","../src/components/VNetworkGraph.vue","../src/components/edge/VEdgeLabel.vue","../src/layouts/grid.ts","../src/index.ts"],"sourcesContent":["import { RecursivePartial } from \"./common\"\n\n/* ------------------------------------------ *\n * Core types\n * ------------------------------------------ */\n\nexport interface Position {\n  x: number\n  y: number\n}\n\nexport interface LinePosition {\n  p1: Position\n  p2: Position\n}\n\nexport interface Size {\n  width: number\n  height: number\n}\n\n/** An object with a field named id */\nexport interface IdentifiedObject {\n  id: string\n}\n\n/* ------------------------------------------ *\n * Network graph elements\n * ------------------------------------------ */\n\nexport interface Node {\n  name?: string\n  // any properties\n  [x: string]: any\n}\n\nexport type Nodes = Record<string, Node>\nexport type NodeWithId = Node & IdentifiedObject\n\nexport interface Edge {\n  source: string\n  target: string\n  // any properties\n  [x: string]: any\n}\n\nexport type Edges = Record<string, Edge>\nexport type EdgeWithId = Edge & IdentifiedObject\n\nexport type LayerPosition =\n  \"paths\"\n  | \"nodes\"\n  | \"focusring\"\n  | \"edges\"\n  | \"base\"\n  | \"grid\"\n  | \"background\"\n  | \"root\"\nexport const LayerPositions: readonly LayerPosition[] = [\n  \"paths\",\n  \"nodes\",\n  \"focusring\",\n  \"edges\",\n  \"base\",\n  \"grid\",\n  \"background\",\n  \"root\",\n]\nexport type Layers = Record<string, LayerPosition>\n\n/* ------------------------------------------ *\n * Layouts\n * ------------------------------------------ */\n\nexport interface FixablePosition extends Position {\n  fixed?: boolean\n}\n\nexport type NodePositions = Record<string, FixablePosition>\n\nexport interface Layouts {\n  nodes: NodePositions\n}\n/** ユーザ指定用 optionalな指定のためのinterface */\nexport type UserLayouts = RecursivePartial<Layouts>\n\n/* ------------------------------------------ *\n * Edge labels\n * ------------------------------------------ */\n\nexport interface EdgeLabelArea {\n  source: {\n    above: Position\n    below: Position\n  }\n  target: {\n    above: Position\n    below: Position\n  }\n}\n\n/* ------------------------------------------ *\n * Paths\n * ------------------------------------------ */\n\nexport interface Path {\n  id?: string\n  edges: string[]\n  // any properties\n  [x: string]: any\n}\n\nexport type Paths = Record<string, Path>\n\n// When specified in a list, the ID is not needed for a while to\n// keep compatibility.\n// TODO: After a while, remove `| Path[]`.\nexport type InputPaths = Record<string, Path> | Path[]\n\n// line: point | curve: [control-point, control-point, target-point] | move to next point: null\nexport type PositionOrCurve = Position | Position[] | null\n\n/* ------------------------------------------ *\n * Events\n * ------------------------------------------ */\n\nexport type ViewEvent<T extends Event> = { event: T }\nexport type NodeEvent<T extends Event> = { node: string; event: T }\nexport type EdgeEvent<T extends Event> = { edge: string; edges: string[], summarized: false; event: T } | { edge?: undefined, edges: string[]; summarized: true; event: T }\nexport type PathEvent<T extends Event> = { path: string, event: T }\n\n// For compatibility with previous versions\nexport type NodePointerEvent = NodeEvent<PointerEvent>\nexport type EdgePointerEvent = EdgeEvent<PointerEvent>\n\nexport type Events = {\n  \"view:load\": undefined\n  \"view:unload\": undefined\n  \"view:mode\": \"default\" | \"node\" | \"edge\" | \"path\"\n  \"view:zoom\": number\n  \"view:pan\": { x: number; y: number }\n  \"view:fit\": undefined\n  \"view:resize\": { x: number; y: number; width: number; height: number }\n  \"view:click\": ViewEvent<MouseEvent>\n  \"view:dblclick\": ViewEvent<MouseEvent>\n  \"view:contextmenu\": ViewEvent<MouseEvent>\n  \"node:click\": NodeEvent<MouseEvent>\n  \"node:dblclick\": NodeEvent<MouseEvent>\n  \"node:pointerover\": NodeEvent<PointerEvent>\n  \"node:pointerout\": NodeEvent<PointerEvent>\n  \"node:pointerup\": NodeEvent<PointerEvent>\n  \"node:pointerdown\": NodeEvent<PointerEvent>\n  \"node:contextmenu\": NodeEvent<MouseEvent>\n  \"node:dragstart\": { [name: string]: Position }\n  \"node:pointermove\": { [name: string]: Position }\n  \"node:dragend\": { [name: string]: Position }\n  \"node:select\": string[]\n  \"edge:pointerup\": EdgeEvent<PointerEvent>\n  \"edge:pointerdown\": EdgeEvent<PointerEvent>\n  \"edge:click\": EdgeEvent<MouseEvent>\n  \"edge:dblclick\": EdgeEvent<MouseEvent>\n  \"edge:pointerover\": EdgeEvent<PointerEvent>\n  \"edge:pointerout\": EdgeEvent<PointerEvent>\n  \"edge:contextmenu\": EdgeEvent<MouseEvent>\n  \"edge:select\": string[]\n  \"path:select\": string[]\n  \"path:pointerup\": PathEvent<PointerEvent>\n  \"path:pointerdown\": PathEvent<PointerEvent>\n  \"path:click\": PathEvent<MouseEvent>\n  \"path:dblclick\": PathEvent<MouseEvent>\n  \"path:pointerover\": PathEvent<PointerEvent>\n  \"path:pointerout\": PathEvent<PointerEvent>\n  \"path:contextmenu\": PathEvent<MouseEvent>\n}\n\nexport type EventHandlers = {\n  \"*\"?: <T extends keyof Events>(type: T, event: Events[T]) => void\n} & {\n  [K in keyof Events]?: (event: Events[K]) => void\n}\n\nexport type OnClickHandler = (param: NodeEvent<MouseEvent>) => void\nexport type OnDragHandler = (param: { [name: string]: Position }) => void\n\n/* ------------------------------------------ *\n * SVG area\n * ------------------------------------------ */\n\nexport interface Point {\n  x: number\n  y: number\n}\n\nexport interface Sizes {\n  width: number\n  height: number\n  viewBox: {\n    x: number\n    y: number\n    width: number\n    height: number\n  }\n}\n","import { isReactive, reactive } from \"vue\"\n\n/* ------------------------------------------ *\n * Utility\n * ------------------------------------------ */\n\nexport type RecursivePartial<T> = {\n  [P in keyof T]?: T[P] extends (infer U)[]\n    ? RecursivePartial<U>[]\n    : T[P] extends (infer U)[] | undefined\n    ? RecursivePartial<U>[]\n    : // eslint-disable-next-line @typescript-eslint/ban-types\n    T[P] extends object\n    ? RecursivePartial<T[P]>\n    : // eslint-disable-next-line @typescript-eslint/ban-types\n    T[P] extends object | undefined\n    ? RecursivePartial<T[P]>\n    : T[P]\n}\n\ndeclare class Id<T extends string> {\n  private IDENTITY: T\n}\n\nexport type Reactive<T> = Id<\"Reactive\"> & T\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function Reactive<T extends object>(value: T): Reactive<T> {\n  if (isReactive(value)) {\n    return value as Reactive<T>\n  } else {\n    return reactive(value) as Reactive<T>\n  }\n}\n\nexport interface ReadonlyRef<T> {\n  readonly value: T\n}\n\nexport function nonNull<T>(val?: T | null, name = \"Parameter\"): T {\n  if (val === undefined || val === null) {\n    throw new Error(`${name} is null`)\n  }\n  return val\n}\n","import { provide, inject, InjectionKey, Ref } from \"vue\"\nimport { SvgPanZoomInstance } from \"@/modules/svg-pan-zoom-ex\"\nimport { nonNull } from \"@/common/common\"\n\ninterface ProvideContainers {\n  container: Ref<HTMLDivElement>\n  svg: Ref<SVGElement>\n  viewport: Ref<SVGGElement>\n  svgPanZoom: Ref<SvgPanZoomInstance | undefined>\n}\n\ninterface Containers {\n  container: Ref<HTMLDivElement | undefined>\n  svg: Ref<SVGElement | undefined>\n  viewport: Ref<SVGGElement | undefined>\n  svgPanZoom: Ref<SvgPanZoomInstance | undefined>\n}\n\nconst containersKey = Symbol(\"containers\") as InjectionKey<Containers>\n\nexport function provideContainers(containers: Containers): void {\n  provide(containersKey, containers)\n}\n\nexport function useContainers(): ProvideContainers {\n  const containers = nonNull(inject(containersKey), \"containers\")\n  return {\n    container: containers.container as Ref<HTMLDivElement>,\n    svg: containers.svg as Ref<SVGElement>,\n    viewport: containers.viewport as Ref<SVGGElement>,\n    svgPanZoom: containers.svgPanZoom\n  }\n}\n","import { SvgPanZoomInstance } from \"@/modules/svg-pan-zoom-ex\"\nimport { LayoutHandler } from \"../layouts/handler\"\nimport { RecursivePartial } from \"./common\"\nimport { Node, Edge, Edges, Path } from \"./types\"\n\ntype CallableValue<V, T> = V | ((target: T) => V)\n\ntype CallableValues<V, T> = {\n  [K in keyof V]: CallableValue<V[K], T>\n}\n\nexport class Config {\n  static value<V, T>(value: CallableValue<V, T>, target: T): V {\n    return value instanceof Function ? value(target) : value\n  }\n\n  static values<V, T>(value: CallableValues<V, T>, target: T): V {\n    if (Object.values(value).filter(v => v instanceof Function).length === 0) {\n      return value as V // all config are literals\n    }\n    return Object.fromEntries(\n      Object.entries(value).map(([k, v]) => [k, v instanceof Function ? v(target) : v])\n    ) as V\n  }\n}\n\n/* View configuration */\n\nexport interface GridLine {\n  color: string\n  width: number\n  dasharray?: string | number\n}\n\nexport interface GridConfig {\n  visible: boolean\n  interval: number\n  thickIncrements: number | false\n  line: GridLine\n  thick: GridLine\n}\n\nexport interface ViewConfig {\n  scalingObjects: boolean\n  panEnabled: boolean\n  zoomEnabled: boolean\n  minZoomLevel: number\n  maxZoomLevel: number\n  doubleClickZoomEnabled: boolean\n  mouseWheelZoomEnabled: boolean\n  fit?: boolean // Deprecated\n  autoPanAndZoomOnLoad: false | \"center-zero\" | \"center-content\" | \"fit-content\"\n  autoPanOnResize: boolean\n  layoutHandler: LayoutHandler\n  onSvgPanZoomInitialized?: (instance: SvgPanZoomInstance) => void\n  grid: GridConfig\n}\n\n/* Shape style */\n\nexport interface ShapeStyleBase {\n  strokeWidth: number\n  strokeColor?: string\n  strokeDasharray?: string | number\n  color: string\n}\n\nexport type ShapeType = \"circle\" | \"rect\"\n\ninterface CircleShape extends ShapeStyleBase {\n  radius: number\n}\n\ninterface RectangleShape extends ShapeStyleBase {\n  width: number\n  height: number\n  borderRadius: number\n}\n\n// `Shape` is an object whose fields can change depending on\n// the type value.\n// Normally, Union Types would be used, but in order to minimize\n// the use of type guards when users build and use the configuration,\n// we define it as an object that contains all fields.\n\ntype ShapeBase<T extends ShapeType = ShapeType> = {\n  type: T\n}\n\nexport type ShapeStyle = ShapeBase & CircleShape & RectangleShape\nexport type CircleShapeStyle = ShapeBase<\"circle\"> & CircleShape\nexport type RectangleShapeStyle = ShapeBase<\"rect\"> & RectangleShape\nexport type AnyShapeStyle = CircleShapeStyle | RectangleShapeStyle\n\n/* Label style */\n\ninterface Padding {\n  vertical: number\n  horizontal: number\n}\nexport interface LabelBackgroundStyle {\n  visible: boolean\n  color?: string\n  padding?: number | Padding\n  borderRadius?: number\n}\n\nexport interface LabelStyle {\n  fontFamily?: string\n  fontSize: number\n  color: string\n  background?: LabelBackgroundStyle\n  lineHeight: number\n}\n\n/* Z-Order config */\n\nexport interface ZOrderConfig<T> {\n  enabled: boolean\n  zIndex: CallableValue<number, T>\n  bringToFrontOnHover: boolean\n  bringToFrontOnSelected: boolean\n}\n\n/* Object common config */\n\nexport interface ObjectConfigs<O> {\n  selectable: CallableValue<boolean, O> | number\n  zOrder: ZOrderConfig<O>\n}\n\n/* Node style */\n\nexport enum NodeLabelDirection {\n  CENTER = \"center\",\n  NORTH = \"north\",\n  NORTH_EAST = \"north-east\",\n  EAST = \"east\",\n  SOUTH_EAST = \"south-east\",\n  SOUTH = \"south\",\n  SOUTH_WEST = \"south-west\",\n  WEST = \"west\",\n  NORTH_WEST = \"north-west\",\n}\n\nexport type NodeLabelDirectionType = \"center\" | \"north\" | \"north-east\" | \"east\" | \"south-east\" | \"south\" | \"south-west\" | \"west\" | \"north-west\"\n\nexport interface NodeLabelStyle extends LabelStyle {\n  visible: boolean\n  margin: number\n  direction: NodeLabelDirectionType\n  text: string\n}\n\nexport interface NodeFocusRingStyle {\n  visible: boolean\n  width: number\n  padding: number\n  color: string\n  dasharray?: string | number\n}\n\nexport interface NodeConfig<N extends Node = Node> {\n  normal: CallableValues<ShapeStyle, N>\n  hover?: CallableValues<ShapeStyle, N>\n  selected?: CallableValues<ShapeStyle, N>\n  draggable: CallableValue<boolean, N>\n  selectable: CallableValue<boolean, N> | number\n  label: CallableValues<NodeLabelStyle, N>\n  focusring: NodeFocusRingStyle\n  zOrder: ZOrderConfig<N>\n  transition?: string\n}\n\n/* Edge style */\n\nexport interface StrokeStyle {\n  width: number\n  color: string\n  dasharray?: string | number\n  linecap?: \"butt\" | \"round\" | \"square\"\n  animate: boolean\n  animationSpeed: number\n}\n\nexport interface EdgeLabelStyle extends LabelStyle {\n  margin: number\n  padding: number\n}\n\nexport type EdgeHeadType = \"none\" | \"arrow\" | \"angle\" | \"circle\" | \"custom\"\nexport type MarkerUnits = \"strokeWidth\" | \"userSpaceOnUse\"\n\nexport interface MarkerStyle {\n  type: EdgeHeadType\n  width: number\n  height: number\n  margin: number\n  units: MarkerUnits\n  color: string | null\n  customId?: string\n}\n\nexport type EdgeType = \"straight\" | \"curve\"\n\n// Orientation to be considered when keeping multiple edge alignments.\n//   \"clock\": Keep the forward/backward when viewed as a clock.\n//   \"vertical\": Keep the vertical alignment.\n//   \"horizontal\": Keep the horizontal alignment.\nexport type EdgeKeepOrderType = \"clock\" | \"vertical\" | \"horizontal\"\n\nexport interface EdgeConfig<E extends Edge = Edge> {\n  normal: CallableValues<StrokeStyle, E>\n  hover?: CallableValues<StrokeStyle, E>\n  selected: CallableValues<StrokeStyle, E>\n  selectable: CallableValue<boolean, E> | number\n  gap: number | ((edges: Edges, configs: Configs) => number)\n  type: EdgeType\n  marker: {\n    source: CallableValues<MarkerStyle, [E, StrokeStyle]>\n    target: CallableValues<MarkerStyle, [E, StrokeStyle]>\n  }\n  margin: number | null\n  summarize: boolean | ((edges: Edges, configs: Configs) => boolean | null)\n  summarized: {\n    label: CallableValues<LabelStyle, Record<string, E>>\n    shape: CallableValues<ShapeStyle, Record<string, E>>\n    stroke: CallableValues<StrokeStyle, Record<string, E>>\n  }\n  keepOrder: EdgeKeepOrderType\n  label: EdgeLabelStyle\n  zOrder: ZOrderConfig<E>\n}\n\n/* Path config */\nexport interface PathStrokeStyle extends StrokeStyle {\n  linejoin: \"miter\" | \"round\" | \"bevel\"\n}\n\nexport type PathEndType = \"centerOfNode\" | \"edgeOfNode\"\n\nexport interface PathConfig<P extends Path = Path> {\n  visible: boolean\n  clickable: CallableValue<boolean, P>\n  hoverable: CallableValue<boolean, P>\n  curveInNode: boolean\n  end: PathEndType\n  margin: CallableValue<number, P>\n\n  // @Deprecated\n  path: CallableValues<PathStrokeStyle, P>\n\n  normal: CallableValues<PathStrokeStyle, P>\n  hover?: CallableValues<PathStrokeStyle, P>\n  selected: CallableValues<PathStrokeStyle, P>\n\n  selectable: CallableValue<boolean, P> | number\n  zOrder: ZOrderConfig<P>\n  transition?: string\n}\n\n/* Configuration */\n\nexport interface Configs<N extends Node = Node, E extends Edge = Edge, P extends Path = Path> {\n  view: ViewConfig\n  node: NodeConfig<N>\n  edge: EdgeConfig<E>\n  path: PathConfig<P>\n}\n\n/** For specification by the user */\nexport type UserConfigs<\n  N extends Node = Node,\n  E extends Edge = Edge,\n  P extends Path = Path\n> = RecursivePartial<Configs<N, E, P>>\n\n/** Make a config with self object */\nexport function withSelf<T extends { [name: string]: any }>(callback: (self: T) => T): T {\n  const self = {} as T\n  return Object.assign(self, callback(self))\n}\n\n/** @deprecated */\nexport function configsWithType<\n  N extends Node = Node,\n  E extends Edge = Edge,\n  P extends Path = Path,\n  U extends UserConfigs<N, E, P> = UserConfigs<N, E, P>\n>(configs: U): U & UserConfigs<N, E, P> {\n  return configs\n}\n\n/** Define configurations */\nexport function defineConfigs<\n  N extends Node = Node,\n  E extends Edge = Edge,\n  P extends Path = Path,\n  U extends UserConfigs<N, E, P> = UserConfigs<N, E, P>\n>(configs: U): U & UserConfigs<N, E, P> {\n  return configs\n}\n","import { Node, Position, Size } from \"@/common/types\"\nimport { Config, NodeConfig } from \"@/common/configs\"\n\nexport function getNodeSize(node: Node, style: NodeConfig, scale: number): Size {\n  const shape = Config.values(style.normal, node)\n  if (shape.type == \"circle\") {\n    return {\n      width: shape.radius * 2 * scale,\n      height: shape.radius * 2 * scale,\n    }\n  } else {\n    return {\n      width: shape.width * scale,\n      height: shape.height * scale,\n    }\n  }\n}\n\nexport function areNodesCollision(\n  nodePos: Position,\n  nodeSize: Size,\n  targetNodePos: Position,\n  targetNodeSize: Size\n): boolean {\n  // x方向の衝突チェック\n  const distanceX = Math.abs(nodePos.x - targetNodePos.x)\n  const collisionX = distanceX < nodeSize.width / 2 + targetNodeSize.width / 2\n\n  // y方向の衝突チェック\n  const distanceY = Math.abs(nodePos.y - targetNodePos.y)\n  const collisionY = distanceY < nodeSize.height / 2 + targetNodeSize.height / 2\n  return collisionX && collisionY\n}\n\nexport function applyScaleToDasharray(dasharray: number | string | undefined, scale: number) {\n  let result: number | string = 0\n  if (scale === 1 || dasharray === undefined || dasharray === \"none\") {\n    result = dasharray ?? 0\n  } else if (typeof dasharray === \"string\") {\n    result = dasharray\n      .split(/\\s+/)\n      .map(v => parseInt(v) * scale)\n      .filter(v => !isNaN(v))\n      .join(\" \")\n  } else {\n    result = dasharray * scale\n  }\n  return result && result !== \"0\" ? result : undefined\n}\n\nexport function getDasharrayUnit(dasharray: number | string | undefined) {\n  let result: number | string = 0\n  if (dasharray === undefined || dasharray === \"none\") {\n    result = 0\n  } else if (typeof dasharray === \"string\") {\n    const array = dasharray\n      .split(/\\s+/)\n      .map(v => parseInt(v))\n      .filter(v => !isNaN(v))\n    if (array.length % 2 === 0) {\n      // ex: 1 2 -> -  -  -  - ...\n      result = array.reduce((s, n) => s + n, 0)\n    } else {\n      // ex: 1 2 3 -> -  --- --   -  --- ...\n      result = array.reduce((s, n) => s + n, 0) * 2\n    }\n  } else {\n    result = dasharray * 2 // 2 <- border and space\n  }\n  return result\n}\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import toNumber from './toNumber.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nexport default toFinite;\n","import toFinite from './toFinite.js';\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nexport default toInteger;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import root from './_root.js';\nimport toInteger from './toInteger.js';\nimport toNumber from './toNumber.js';\nimport toString from './toString.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsFinite = root.isFinite,\n    nativeMin = Math.min;\n\n/**\n * Creates a function like `_.round`.\n *\n * @private\n * @param {string} methodName The name of the `Math` method to use when rounding.\n * @returns {Function} Returns the new round function.\n */\nfunction createRound(methodName) {\n  var func = Math[methodName];\n  return function(number, precision) {\n    number = toNumber(number);\n    precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);\n    if (precision && nativeIsFinite(number)) {\n      // Shift with exponential notation to avoid floating-point issues.\n      // See [MDN](https://mdn.io/round#Examples) for more details.\n      var pair = (toString(number) + 'e').split('e'),\n          value = func(pair[0] + 'e' + (+pair[1] + precision));\n\n      pair = (toString(value) + 'e').split('e');\n      return +(pair[0] + 'e' + (+pair[1] - precision));\n    }\n    return func(number);\n  };\n}\n\nexport default createRound;\n","import createRound from './_createRound.js';\n\n/**\n * Computes `number` rounded to `precision`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Math\n * @param {number} number The number to round.\n * @param {number} [precision=0] The precision to round to.\n * @returns {number} Returns the rounded number.\n * @example\n *\n * _.round(4.006);\n * // => 4\n *\n * _.round(4.006, 2);\n * // => 4.01\n *\n * _.round(4060, -2);\n * // => 4100\n */\nvar round = createRound('round');\n\nexport default round;\n","import { Ref, toRef, watch } from \"vue\"\nimport { NodePositions, OnDragHandler, Position } from \"@/common/types\"\nimport { getNodeSize, areNodesCollision } from \"@/utils/visual\"\nimport { LayoutActivateParameters, LayoutHandler } from \"./handler\"\nimport round from \"lodash-es/round\"\n\nconst NEW_NODE_POSITION_MARGIN = 20\n\nexport class SimpleLayout implements LayoutHandler {\n  private onDeactivate?: () => void\n\n  activate(parameters: LayoutActivateParameters): void {\n    const { layouts, nodes, configs, emitter, scale, svgPanZoom } = parameters\n    const onDrag: OnDragHandler = positions => {\n      for (const [id, pos] of Object.entries(positions)) {\n        const layout = this.getOrCreateNodePosition(layouts, id)\n        this.setNodePosition(layout, pos)\n      }\n    }\n\n    const setNewNodePositions = (nodeIds: string[]) => {\n      // decide new node's position\n      const newNodes = nodeIds.filter(n => !(n in layouts))\n      const area = svgPanZoom.getViewArea()\n      const s = scale.value\n      for (const nodeId of newNodes) {\n        const node = nodes.value[nodeId]\n        const nodeSize = getNodeSize(node, configs.node, s)\n        const candidate = { ...area.center }\n        for (;;) {\n          let collision = false\n          for (const [id, pos] of Object.entries(layouts)) {\n            if (nodeId === id) continue\n            const targetNode = nodes.value[id]\n            if (!targetNode) continue\n            const targetNodeSize = getNodeSize(targetNode, configs.node, s)\n            collision = areNodesCollision(candidate, nodeSize, pos, targetNodeSize)\n            if (collision) {\n              break\n            }\n          }\n          if (collision) {\n            // Slide the width of one node + margin in the horizontal direction.\n            // If it reaches the edge of the display area, it moves downward.\n            candidate.x += nodeSize.width + NEW_NODE_POSITION_MARGIN * s\n            if (candidate.x + nodeSize.width / 2 > area.box.right) {\n              candidate.x = area.center.x\n              candidate.y += nodeSize.height + NEW_NODE_POSITION_MARGIN * s\n            }\n          } else {\n            break\n          }\n        }\n        const layout = this.getOrCreateNodePosition(layouts, nodeId)\n        this.setNodePosition(layout, candidate)\n      }\n    }\n\n    setNewNodePositions(Object.keys(nodes.value))\n    const stopNodeWatch = watch(() => Object.keys(nodes.value), setNewNodePositions)\n\n    emitter.on(\"node:dragstart\", onDrag)\n    emitter.on(\"node:pointermove\", onDrag)\n    emitter.on(\"node:dragend\", onDrag)\n\n    this.onDeactivate = () => {\n      stopNodeWatch()\n      emitter.off(\"node:dragstart\", onDrag)\n      emitter.off(\"node:pointermove\", onDrag)\n      emitter.off(\"node:dragend\", onDrag)\n    }\n  }\n\n  deactivate(): void {\n    if (this.onDeactivate) {\n      this.onDeactivate()\n    }\n  }\n\n  protected setNodePosition(nodeLayout: Ref<Position>, pos: Position) {\n    nodeLayout.value.x = round(pos.x, 3)\n    nodeLayout.value.y = round(pos.y, 3)\n  }\n\n  private getOrCreateNodePosition(layouts: NodePositions, node: string) {\n    const layout = toRef(layouts, node)\n    if (!layout.value) {\n      layout.value = { x: 0, y: 0 }\n    }\n    return layout\n  }\n}\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","import { reactive } from \"vue\"\nimport { NodeLabelDirection, Configs, withSelf, Config, UserConfigs } from \"./configs\"\nimport { Node, Edge, Path, Edges } from \"./types\"\nimport { SimpleLayout } from \"../layouts/simple\"\nimport merge from \"lodash-es/merge\"\n\n/**\n * Get all default configs.\n * @returns configs\n */\nexport function getConfigDefaults(): Configs {\n  return {\n    view: {\n      scalingObjects: false,\n      panEnabled: true,\n      zoomEnabled: true,\n      minZoomLevel: 0.1,\n      maxZoomLevel: 64,\n      doubleClickZoomEnabled: true,\n      mouseWheelZoomEnabled: true,\n      autoPanAndZoomOnLoad: \"center-content\",\n      autoPanOnResize: true,\n      layoutHandler: new SimpleLayout(),\n      onSvgPanZoomInitialized: undefined,\n      grid: {\n        visible: false,\n        interval: 10,\n        thickIncrements: 5,\n        line: {\n          color: \"#e0e0e0\",\n          width: 1,\n          dasharray: 1,\n        },\n        thick: {\n          color: \"#cccccc\",\n          width: 1,\n          dasharray: 0,\n        },\n      },\n    },\n    node: withSelf(self => ({\n      normal: {\n        type: \"circle\",\n        radius: 16,\n        // for rect -->\n        width: 32,\n        height: 32,\n        borderRadius: 4,\n        // <-- for rect\n        color: \"#4466cc\",\n        strokeWidth: 0,\n        strokeColor: \"#000000\",\n        strokeDasharray: 0,\n      },\n      hover: {\n        type: node => Config.value(self.normal.type, node) as any,\n        radius: node => (Config.value(self.normal.radius, node) ?? 0) + 2,\n        width: node => (Config.value(self.normal.width, node) ?? 0) + 2,\n        height: node => (Config.value(self.normal.height, node) ?? 0) + 2,\n        borderRadius: node => Config.value(self.normal.borderRadius, node) ?? 0,\n        strokeWidth: node => Config.value(self.normal.strokeWidth, node),\n        strokeColor: node => Config.value(self.normal.strokeColor, node),\n        strokeDasharray: node => Config.value(self.normal.strokeDasharray, node),\n        color: \"#3355bb\",\n      },\n      selected: undefined,\n      draggable: true,\n      selectable: false,\n      label: {\n        visible: true,\n        fontFamily: undefined,\n        fontSize: 11,\n        lineHeight: 1.1,\n        color: \"#000000\",\n        background: undefined,\n        // background: {\n        //   visible: true,\n        //   color: \"#ffffff\",\n        //   padding: {\n        //     vertical: 1,\n        //     horizontal: 4,\n        //   },\n        //   borderRadius: 2\n        // },\n        margin: 4,\n        direction: NodeLabelDirection.SOUTH,\n        text: \"name\",\n      },\n      focusring: {\n        visible: true,\n        width: 4,\n        padding: 3,\n        color: \"#eebb00\",\n      },\n      zOrder: {\n        enabled: false,\n        zIndex: 0,\n        bringToFrontOnHover: true,\n        bringToFrontOnSelected: true\n      },\n      transition: undefined\n    })),\n    edge: withSelf(self => ({\n      normal: {\n        width: 2,\n        color: \"#4466cc\",\n        dasharray: 0,\n        linecap: \"butt\",\n        animate: false,\n        animationSpeed: 50,\n      },\n      hover: {\n        width: edge => Config.value(self.normal.width, edge) + 1,\n        color: \"#3355bb\",\n        dasharray: edge => Config.value(self.normal.dasharray, edge),\n        linecap: edge => Config.value(self.normal.linecap, edge),\n        animate: edge => Config.value(self.normal.animate, edge),\n        animationSpeed: edge => Config.value(self.normal.animationSpeed, edge),\n      },\n      selected: {\n        width: edge => Config.value(self.normal.width, edge) + 1,\n        color: \"#dd8800\",\n        dasharray: edge => {\n          const w = Config.value(self.normal.width, edge)\n          return `${w * 1.5} ${w * 2}`\n        },\n        linecap: edge => Config.value(self.normal.linecap, edge),\n        animate: edge => Config.value(self.normal.animate, edge),\n        animationSpeed: edge => Config.value(self.normal.animationSpeed, edge),\n      },\n      selectable: false,\n      gap: 3,\n      type: \"straight\",\n      marker: {\n        source: {\n          type: \"none\",\n          width: 5,\n          height: 5,\n          margin: -1,\n          units: \"strokeWidth\",\n          color: null\n        },\n        target: {\n          type: \"none\",\n          width: 5,\n          height: 5,\n          margin: -1,\n          units: \"strokeWidth\",\n          color: null\n        },\n      },\n      margin: null,\n      summarize: (_edges: Edges, configs: Configs) => {\n        return configs.edge.type == \"curve\" ? false : null\n      },\n      summarized: {\n        label: {\n          fontSize: 10,\n          lineHeight: 1,\n          color: \"#4466cc\",\n        },\n        shape: {\n          type: \"rect\",\n          // for circle -->\n          radius: 6,\n          // <-- for circle\n          width: 12,\n          height: 12,\n          borderRadius: 3,\n          color: \"#ffffff\",\n          strokeWidth: 1,\n          strokeColor: \"#4466cc\",\n          strokeDasharray: undefined,\n        },\n        stroke: {\n          width: 5,\n          color: \"#4466cc\",\n          dasharray: undefined,\n          linecap: undefined,\n          animate: false,\n          animationSpeed: 50,\n        },\n      },\n      keepOrder: \"clock\",\n      label: {\n        fontFamily: undefined,\n        fontSize: 11,\n        lineHeight: 1.1,\n        color: \"#000000\",\n        background: undefined,\n        // background: {\n        //   visible: true,\n        //   color: \"#ffffff\",\n        //   padding: {\n        //     vertical: 1,\n        //     horizontal: 4,\n        //   },\n        //   borderRadius: 2\n        // },\n        margin: 4,\n        padding: 4\n      },\n      zOrder: {\n        enabled: false,\n        zIndex: 0,\n        bringToFrontOnHover: true,\n        bringToFrontOnSelected: true\n      }\n    })),\n    path: withSelf(self => ({\n      visible: false,\n      clickable: false,\n      hoverable: false,\n      curveInNode: false,\n      end: \"centerOfNode\",\n      margin: 0,\n      // @Deprecated\n      path: reactive({\n        width: 6,\n        color: p => {\n          const list = [\n            \"#d5000088\",\n            \"#c5116288\",\n            \"#aa00ff88\",\n            \"#6200ea88\",\n            \"#304ffe88\",\n            \"#2962ff88\",\n            \"#0091ea88\",\n            \"#00b8d488\",\n            \"#00bfa588\",\n            \"#00c85388\",\n            \"#64dd1788\",\n            \"#aeea0088\",\n            \"#ffd60088\",\n            \"#ffab0088\",\n            \"#ff6d0088\",\n            \"#dd2c0088\",\n          ]\n          const hash = p.edges\n            .map(s =>\n              s.split(\"\").reduce((a, b) => {\n                a = (a << 5) - a + b.charCodeAt(0)\n                return a & a\n              }, 0)\n            )\n            .reduce((a, b) => a + b, 0)\n          return list[Math.abs(hash) % list.length]\n        },\n        dasharray: undefined,\n        linecap: \"round\",\n        linejoin: \"round\",\n        animate: false,\n        animationSpeed: 50,\n      }),\n      normal: {\n        width: path => Config.value(self.path.width, path),\n        color: path => Config.value(self.path.color, path),\n        dasharray: path => Config.value(self.path.dasharray, path),\n        linecap: path => Config.value(self.path.linecap, path),\n        linejoin: path => Config.value(self.path.linejoin, path),\n        animate: path => Config.value(self.path.animate, path),\n        animationSpeed: path => Config.value(self.path.animationSpeed, path),\n      },\n      hover: {\n        width: path => Config.value(self.normal.width, path) + 2,\n        color: path => Config.value(self.normal.color, path),\n        dasharray: path => Config.value(self.normal.dasharray, path),\n        linecap: path => Config.value(self.normal.linecap, path),\n        linejoin: path => Config.value(self.normal.linejoin, path),\n        animate: path => Config.value(self.normal.animate, path),\n        animationSpeed: path => Config.value(self.normal.animationSpeed, path),\n      },\n      selected: {\n        width: path => Config.value(self.normal.width, path) + 2,\n        color: path => Config.value(self.normal.color, path),\n        dasharray: \"6 12\",\n        linecap: path => Config.value(self.normal.linecap, path),\n        linejoin: path => Config.value(self.normal.linejoin, path),\n        animate: path => Config.value(self.normal.animate, path),\n        animationSpeed: path => Config.value(self.normal.animationSpeed, path),\n      },\n      selectable: false,\n      zOrder: {\n        enabled: false,\n        zIndex: 0,\n        bringToFrontOnHover: true,\n        bringToFrontOnSelected: true\n      },\n      transition: undefined\n    })),\n  }\n}\n\nexport function getFullConfigs<N extends Node = Node, E extends Edge = Edge, P extends Path = Path>(config?: UserConfigs<N, E, P>): Configs {\n  const configs = getConfigDefaults()\n  if (config) {\n    merge(configs, config)\n  }\n  return configs\n}\n","import { inject, InjectionKey, provide, reactive, Ref, watch } from \"vue\"\nimport { nonNull } from \"@/common/common\"\nimport { Configs, UserConfigs } from \"@/common/configs\"\nimport { getConfigDefaults } from \"@/common/config-defaults\"\nimport merge from \"lodash-es/merge\"\n\nconst injectionKey = Symbol(\"style\") as InjectionKey<Configs>\n\nexport function provideConfigs(configs: Ref<UserConfigs>) {\n  const results: Configs = reactive(getConfigDefaults())\n  const styleKeys = Object.keys(results) as (keyof Configs)[]\n  for (const key of styleKeys) {\n    watch(() => configs.value[key], () => {\n      merge(results[key], configs.value[key] || {})\n    }, { immediate: true, deep: true })\n  }\n\n  provide(injectionKey, results)\n  return results\n}\n\nfunction injectConfig<T extends keyof Configs>(key: T) {\n  return nonNull(inject(injectionKey), `Configs(${key})`)[key]\n}\n\nexport function useAllConfigs() {\n  return nonNull(inject(injectionKey))\n}\n\nexport function useViewConfig() {\n  return injectConfig(\"view\")\n}\n\nexport function useNodeConfig() {\n  return injectConfig(\"node\")\n}\n\nexport function useEdgeConfig() {\n  return injectConfig(\"edge\")\n}\n\nexport function usePathConfig() {\n  return injectConfig(\"path\")\n}\n","let nextId = 1\n\n/** Generate unique ID in v-network-graph instances */\nexport function useId(): number {\n  return nextId++\n}\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n","import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n","import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n","import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n","import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n","import isEqual from \"lodash-es/isEqual\"\n\nexport function keyOf<T>(obj: T): (keyof T)[] {\n  return Object.keys(obj) as (keyof T)[]\n}\n\nexport function entriesOf<T, K extends keyof T>(obj: T): [K, T[K]][] {\n  return Object.entries(obj) as [K, T[K]][]\n}\n\nexport function updateObjectDiff<T extends Record<string, any>>(target: T, from: T) {\n  const keys = new Set<keyof T>(Object.keys(target))\n  entriesOf(from).forEach(([key, value]) => {\n    if (!isEqual(target[key], value)) {\n      target[key] = value\n    }\n    keys.delete(key)\n  })\n  keys.forEach(k => delete target[k])\n}\n","import { Ref, watchEffect } from \"vue\"\nimport { Reactive } from \"@/common/common\"\nimport { Edge, Edges, LinePosition, Nodes, Position } from \"@/common/types\"\nimport { Config, Configs, EdgeKeepOrderType } from \"@/common/configs\"\nimport { EdgeGroup, EdgeGroupStates, EdgeLayoutPoint } from \"@/models/edge\"\nimport { updateObjectDiff } from \"@/utils/object\"\n\n// -----------------------------------------------------------------------\n// Type definition\n// -----------------------------------------------------------------------\n\n// -----------------------------------------------------------------------\n// Exported functions\n// -----------------------------------------------------------------------\n\n/**\n * Make the states for edge group.\n * @param nodes nodes\n * @param edges edges\n * @param configs configs\n * @returns the states object for edge group\n */\nexport function makeEdgeGroupStates(\n  nodes: Ref<Nodes>,\n  edges: Ref<Edges>,\n  configs: Readonly<Configs>\n): Reactive<EdgeGroupStates> {\n  // Calculate position map\n  const state = Reactive<EdgeGroupStates>({\n    edgeLayoutPoints: {},\n    edgeGroups: {},\n    summarizedEdges: {},\n  })\n\n  watchEffect(() => {\n    const { edgeLayoutPoints, edgeGroups } = calculateEdgeGroupAndPositions(\n      configs,\n      nodes.value,\n      edges.value\n    )\n    updateObjectDiff(state.edgeLayoutPoints, edgeLayoutPoints)\n    updateObjectDiff(state.edgeGroups, edgeGroups)\n  })\n\n  // calc layout and check summarize\n  watchEffect(() => {\n    const summarizedEdges: Record<string, true> = {}\n    for (const [id, { edges, groupWidth }] of Object.entries(state.edgeGroups)) {\n      let summarize = false\n      if (groupWidth == 0) {\n        summarize = false\n      } else if (configs.edge.summarize instanceof Function) {\n        const s = configs.edge.summarize(edges, configs)\n        if (s === null) {\n          summarize = defaultCheckSummarize(nodes.value, edges, configs, groupWidth)\n        } else {\n          summarize = s\n        }\n      } else if (configs.edge.summarize) {\n        summarize = defaultCheckSummarize(nodes.value, edges, configs, groupWidth)\n      } else {\n        summarize = false\n      }\n      state.edgeGroups[id].summarize = summarize\n      if (summarize) {\n        Object.keys(edges).forEach(id => (summarizedEdges[id] = true))\n      }\n    }\n    updateObjectDiff(state.summarizedEdges, summarizedEdges)\n  })\n\n  return state\n}\n\n/**\n * Calculate the edge position by applying a shift.\n * @param p relative layout information of edges\n * @param isSummarized summarize or not\n * @param source position of source node\n * @param target position of target node\n * @param scale scale factor\n * @param keepOrder edge positional type config\n * @returns the edge position by applying a shift\n */\nexport function calculateEdgeShiftedPosition(\n  p: EdgeLayoutPoint | undefined,\n  isSummarized: boolean,\n  source: Position,\n  target: Position,\n  scale: number,\n  keepOrder: EdgeKeepOrderType\n): LinePosition {\n  if (!p) {\n    return { p1: { x: 0, y: 0 }, p2: { x: 0, y: 0 } } // sanitized\n  }\n  if (isSummarized) {\n    // summarize\n    return calculateEdgePositionInner(p.edge, source, target, scale, 0, 0, keepOrder)\n  } else {\n    return calculateEdgePositionInner(\n      p.edge,\n      source,\n      target,\n      scale,\n      p.groupWidth,\n      p.pointInGroup,\n      keepOrder\n    )\n  }\n}\n\n// -----------------------------------------------------------------------\n// Private functions\n// -----------------------------------------------------------------------\n\nfunction calculateEdgeGroupAndPositions(configs: Configs, nodes: Nodes, edges: Edges) {\n  const edgeLayoutPoints: Record<string, EdgeLayoutPoint> = {}\n  const edgeGroups: Record<string, EdgeGroup> = {}\n\n  // make edge groups that between same nodes\n  const map: Record<string, Edges> = {}\n  for (const [id, edge] of Object.entries(edges)) {\n    if (!(edge.source in nodes && edge.target in nodes)) {\n      // reject if no node ID is found on the nodes\n      continue\n    }\n    const key = [edge.source, edge.target].sort().join(\"<=>\")\n    const values = map[key] || {}\n    values[id] = edge\n    map[key] = values\n  }\n\n  // Calculate the following:\n  // - the starting point of each line\n  // - the width between the centers of the lines at both ends\n  // *Note*: the drawing position of the line is the center of the line.\n  const calcGap =\n    configs.edge.gap instanceof Function\n      ? configs.edge.gap\n      : (_e: Edges, _c: Configs) => configs.edge.gap as number\n  for (const [key, edges] of Object.entries(map)) {\n    const edgeLen = Object.keys(edges).length\n    if (edgeLen == 0) continue\n\n    const gap = calcGap(edges, configs)\n    const [edgeId, edge] = Object.entries(edges)[0]\n    if (edgeLen === 1) {\n      edgeLayoutPoints[edgeId] = { edge, pointInGroup: 0, groupWidth: 0 }\n      edgeGroups[key] = { edges, groupWidth: 0, summarize: false }\n    } else {\n      let pointInGroup = 0\n      const lineHalfWidths = Object.entries(edges).map(([id, edge]) => {\n        let width = Config.value(configs.edge.normal.width, edge)\n        if (isNaN(+width)) {\n          console.warn(\n            \"[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]\",\n            id,\n            width\n          )\n          width = 1\n        }\n        return width / 2\n      })\n      const points = Object.entries(edges).map(([edgeId, edge], i) => {\n        if (i > 0) {\n          pointInGroup += lineHalfWidths[i - 1] + gap + lineHalfWidths[i]\n        }\n        return [edgeId, edge, pointInGroup] as [string, Edge, number]\n      })\n      const groupWidth = pointInGroup\n      points.forEach(([edgeId, edge, pointInGroup]) => {\n        edgeLayoutPoints[edgeId] = { edge, pointInGroup, groupWidth }\n      })\n      edgeGroups[key] = { edges, groupWidth, summarize: false }\n    }\n  }\n\n  return { edgeLayoutPoints, edgeGroups }\n}\n\nfunction defaultCheckSummarize(nodes: Nodes, edges: Edges, configs: Configs, width: number) {\n  // aggregate if the edge width and gap width exceed the size of the node\n  const edgeCount = Object.entries(edges).length\n  if (edgeCount === 1) return false\n\n  // const width =\n  //   Object.values(edges)\n  //     .map(e => Config.value(configs.edge.normal.width, e))\n  //     .reduce((sum, v) => sum + v, 0) +\n  //   configs.edge.gap * (edgeCount - 1)\n\n  const minWidth = Math.min(\n    ...Object.values(edges)\n      .flatMap(e => [nodes[e.source], nodes[e.target]])\n      .filter(v => v)\n      .map(node => {\n        const shape = Config.values(configs.node.normal, node)\n        if (shape.type === \"circle\") {\n          return shape.radius * 2\n        } else {\n          return Math.min(shape.width, shape.height)\n        }\n      })\n  )\n  return width > minWidth\n}\n\nfunction calculateEdgePositionInner(\n  edge: Edge,\n  source: Position | undefined,\n  target: Position | undefined,\n  scale: number,\n  groupWidth: number,\n  pointInGroup: number,\n  keepOrder: EdgeKeepOrderType\n): LinePosition {\n  let x1, y1, x2, y2\n  if (edge.source < edge.target) {\n    ;[x1, y1, x2, y2] = calculateLinePosition(\n      source?.x ?? 0,\n      source?.y ?? 0,\n      target?.x ?? 0,\n      target?.y ?? 0,\n      scale,\n      groupWidth,\n      pointInGroup,\n      keepOrder\n    )\n  } else {\n    ;[x2, y2, x1, y1] = calculateLinePosition(\n      target?.x ?? 0,\n      target?.y ?? 0,\n      source?.x ?? 0,\n      source?.y ?? 0,\n      scale,\n      groupWidth,\n      pointInGroup,\n      keepOrder\n    )\n  }\n  return { p1: { x: x1, y: y1 }, p2: { x: x2, y: y2 } }\n}\n\nfunction calculateLinePosition(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  scale: number,\n  groupWidth: number,\n  pointInGroup: number,\n  keepOrder: EdgeKeepOrderType\n): [number, number, number, number] {\n  const dx = x2 - x1\n  const dy = y2 - y1\n\n  // Shifting width from center\n  let diff = (groupWidth / 2 - pointInGroup) * scale\n\n  // Adjust the relative position.\n  if (diff !== 0 && keepOrder !== \"clock\") {\n    const radian = Math.atan2(y2 - y1, x2 - x1)\n    if (keepOrder === \"vertical\") {\n      // Keep the vertical alignment of multiple edges.\n      const perpendicular = Math.PI / 2\n      if (radian < -perpendicular || radian >= perpendicular) {\n        diff *= -1\n      }\n    } else if (keepOrder === \"horizontal\") {\n      // Keep the horizontal alignment of multiple edges.\n      if (radian < 0) {\n        diff *= -1\n      }\n    }\n  }\n\n  if (dx === 0) {\n    const sign = dy < 0 ? -1 : 1\n    return [x1 + diff * sign, y1, x2 + diff * sign, y2]\n  } else if (dy === 0) {\n    const sign = dx < 0 ? 1 : -1\n    return [x1, y1 + diff * sign, x2, y2 + diff * sign]\n  } else {\n    const slope = dy / dx\n    const moveSlope = -1 / slope\n    if (dy < 0) {\n      diff = -diff\n    }\n    const diffX = diff / Math.sqrt(1 + Math.pow(moveSlope, 2))\n    return [x1 + diffX, y1 + diffX * moveSlope, x2 + diffX, y2 + diffX * moveSlope]\n  }\n}\n","import { Point2D } from \"./core\"\n\nexport function add(v1: Point2D, v2: Point2D): Point2D\nexport function add<T extends Point2D>(v1: Point2D, v2: Point2D, target: T): T\nexport function add(v1: Point2D, v2: Point2D, target?: Point2D): Point2D {\n  if (!target) {\n    target = { x: 0, y: 0 }\n  }\n  target.x = v1.x + v2.x\n  target.y = v1.y + v2.y\n  return target\n}\n\nexport function subtract(v1: Point2D, v2: Point2D): Point2D\nexport function subtract<T extends Point2D>(v1: Point2D, v2: Point2D, target: T): T\nexport function subtract(v1: Point2D, v2: Point2D, target?: Point2D): Point2D {\n  if (!target) {\n    target = { x: 0, y: 0 }\n  }\n  target.x = v1.x - v2.x\n  target.y = v1.y - v2.y\n  return target\n}\n\nexport function multiply(v1: Point2D, v2: Point2D): Point2D\nexport function multiply<T extends Point2D>(v1: Point2D, v2: Point2D, target: T): T\nexport function multiply(v1: Point2D, v2: Point2D, target?: Point2D): Point2D {\n  if (!target) {\n    target = { x: 0, y: 0 }\n  }\n  target.x = v1.x * v2.x\n  target.y = v1.y * v2.y\n  return target\n}\n\nexport function multiplyScalar(v: Point2D, scalar: number): Point2D\nexport function multiplyScalar<T extends Point2D>(v: Point2D, scalar: number, target: T): T\nexport function multiplyScalar(v: Point2D, scalar: number, target?: Point2D): Point2D {\n  if (!target) {\n    target = { x: 0, y: 0 }\n  }\n  target.x = v.x * scalar\n  target.y = v.y * scalar\n  return target\n}\n\nexport function divide(v1: Point2D, v2: Point2D): Point2D\nexport function divide<T extends Point2D>(v1: Point2D, v2: Point2D, target: T): T\nexport function divide(v1: Point2D, v2: Point2D, target?: Point2D): Point2D {\n  if (!target) {\n    target = { x: 0, y: 0 }\n  }\n  target.x = v1.x / v2.x\n  target.y = v1.y / v2.y\n  return target\n}\n\nexport function dot(v1: Point2D, v2: Point2D): number {\n  return v1.x * v2.x + v1.y * v2.y\n}\n\nexport function cross(v1: Point2D, v2: Point2D): number {\n  return v1.x * v2.y - v1.y * v2.x\n}\n\nexport function lengthSquared(v: Point2D): number {\n  return v.x * v.x + v.y * v.y\n}\n\nexport function length(v: Point2D): number {\n  return Math.sqrt(lengthSquared(v))\n}\n\nexport function distanceSquared(v1: Point2D, v2: Point2D): number {\n  const dx = v1.x - v2.x\n  const dy = v1.y - v2.y\n  return dx * dx + dy * dy\n}\n\nexport function distance(v1: Point2D, v2: Point2D): number {\n  return Math.sqrt(distanceSquared(v1, v2))\n}\n\nexport function normalize(v: Point2D): Point2D\nexport function normalize<T extends Point2D>(v: Point2D, target: T): T\nexport function normalize(v: Point2D, target?: Point2D): Point2D {\n  if (!target) {\n    target = { x: 0, y: 0 }\n  }\n  const len = length(v)\n  if (len === 0) {\n    target.x = 1\n    target.y = 0\n  } else {\n    divide(v, { x: len, y: len }, target)\n  }\n  return target\n}\n\nexport function rotate(v: Point2D, angle: number): Point2D\nexport function rotate<T extends Point2D>(v: Point2D, angle: number, target: T): T\nexport function rotate(v: Point2D, angle: number, target?: Point2D): Point2D {\n  if (!target) {\n    target = { x: 0, y: 0 }\n  }\n  // rotate in radians CCW from +X axis\n  const newX = v.x * Math.cos(angle) - v.y * Math.sin(angle)\n  const newY = v.x * Math.sin(angle) + v.y * Math.cos(angle)\n  target.x = newX\n  target.y = newY\n  return target\n}\n\nconst DEGREES = 180 / Math.PI\n\nfunction rad2deg(rad: number) {\n  return rad * DEGREES\n}\n\nexport function angle(v: Point2D) {\n  return Math.atan2(v.y, v.x)\n}\n\nexport function angleDegree(v: Point2D) {\n  return rad2deg(angle(v))\n}\n","import { Point2D } from \"./core\"\nimport { add, angle, angleDegree, cross, distance, distanceSquared, divide } from \"./methods\"\nimport { dot, length, lengthSquared, multiply, multiplyScalar, normalize } from \"./methods\"\nimport { rotate, subtract } from \"./methods\"\n\nexport class Vector2D implements Point2D {\n  public x: number\n  public y: number\n\n  static fromArray(array: number[]) {\n    return new Vector2D(array[0] || 0, array[1] || 0)\n  }\n\n  static fromObject(obj: Point2D) {\n    return new Vector2D(obj.x, obj.y)\n  }\n\n  constructor(x: number, y: number) {\n    this.x = x\n    this.y = y\n  }\n\n  // instance methods\n  add(v: Point2D): Vector2D {\n    return add(this, v, this)\n  }\n\n  subtract(v: Point2D): Vector2D {\n    return subtract(this, v, this)\n  }\n\n  multiply(v: Point2D): Vector2D {\n    return multiply(this, v, this)\n  }\n\n  multiplyScalar(scalar: number): Vector2D {\n    return multiplyScalar(this, scalar, this)\n  }\n\n  divide(v: Point2D): Vector2D {\n    return divide(this, v, this)\n  }\n\n  dot(v: Point2D): number {\n    return dot(this, v)\n  }\n\n  cross(v: Point2D): number {\n    return cross(this, v)\n  }\n\n  lengthSquared(): number {\n    return lengthSquared(this)\n  }\n\n  length(): number {\n    return length(this)\n  }\n\n  distanceSquared(v: Point2D): number {\n    return distanceSquared(this, v)\n  }\n\n  distance(v: Point2D): number {\n    return distance(this, v)\n  }\n\n  normalize(): Vector2D {\n    return normalize(this, this)\n  }\n\n  angle(): number {\n    return angle(this)\n  }\n\n  angleDegree(): number {\n    return angleDegree(this)\n  }\n\n  rotate(angle: number): Vector2D {\n    return rotate(this, angle, this)\n  }\n\n  isEqualTo(v: Point2D): boolean {\n    return this.x === v.x && this.y === v.y\n  }\n\n  clone(): Vector2D {\n    return new Vector2D(this.x, this.y)\n  }\n\n  toObject(): Point2D {\n    return { x: this.x, y: this.y }\n  }\n\n  toArray(): [number, number] {\n    return [this.x, this.y]\n  }\n}\n","export { Vector2D } from \"./vector2d\"\nexport * from \"./methods\"\n\nimport { Vector2D } from \"./vector2d\"\nimport * as V from \"./methods\"\n\nexport default {\n  Vector2D,\n  ...V\n}\n","import { LinePosition, Position } from \"@/common/types\"\nimport { Vector2D } from \"@/modules/vector2d\"\n\n// ---------------------------\n// Line information by vectors\n// ---------------------------\n\nexport class VectorLine {\n  public source: Vector2D\n  public target: Vector2D\n  public v: Vector2D\n\n  constructor(source: Vector2D, target: Vector2D, v: Vector2D) {\n    this.source = source\n    this.target = target\n    this.v = v\n  }\n\n  static fromLinePosition(line: LinePosition): VectorLine {\n    const source = Vector2D.fromObject(line.p1)\n    const target = Vector2D.fromObject(line.p2)\n    return new VectorLine(source, target, toLineVector(source, target))\n  }\n\n  static fromPositions(sourcePos: Position, targetPos: Position): VectorLine {\n    const source = Vector2D.fromObject(sourcePos)\n    const target = Vector2D.fromObject(targetPos)\n    return new VectorLine(source, target, toLineVector(source, target))\n  }\n\n  static fromVectors(source: Vector2D, target: Vector2D): VectorLine {\n    return new VectorLine(source, target, toLineVector(source, target))\n  }\n}\n\nexport function toLineVector(source: Vector2D, target: Vector2D): Vector2D {\n  return target.clone().subtract(source)\n}\n\nexport function toVectorsFromLinePosition(line: LinePosition): [Vector2D, Vector2D] {\n  return [Vector2D.fromObject(line.p1), Vector2D.fromObject(line.p2)]\n}\n\nexport function getCenterOfLinePosition(line: LinePosition): Vector2D {\n  return new Vector2D((line.p1.x + line.p2.x) / 2, (line.p1.y + line.p2.y) / 2)\n}\n\n// -------------------------------\n// Calculation functions for Lines\n// -------------------------------\n\n/**\n * Convert two `Position` to `LinePosition`\n * @param p1 source position of the line\n * @param p2 target position of the line\n * @returns `LinePosition` instance\n */\n export function toLinePosition(p1: Position, p2: Position): LinePosition {\n  return { p1, p2 }\n}\n\n/**\n * Calculates the line position to which the margin is applied.\n * @param linePos original position of the line\n * @param sourceMargin margin for source side\n * @param targetMargin margin for target side\n * @returns the line position\n */\n export function applyMargin(\n  linePos: LinePosition,\n  sourceMargin: number,\n  targetMargin: number\n): LinePosition {\n  const line = VectorLine.fromLinePosition(linePos)\n  return applyMarginInner(line, sourceMargin, targetMargin)\n}\n\nfunction applyMarginInner(\n  line: VectorLine,\n  sourceMargin: number,\n  targetMargin: number\n): LinePosition {\n  const normalized = line.v.clone().normalize()\n\n  const sv = line.source.clone().add(normalized.clone().multiplyScalar(sourceMargin))\n\n  const tv = line.target.clone().subtract(normalized.clone().multiplyScalar(targetMargin))\n\n  let p1 = sv.toObject()\n  let p2 = tv.toObject()\n\n  const check = toLineVector(sv, tv)\n  if (line.v.angle() * check.angle() < 0) {\n    // reversed\n    const c1 = new Vector2D((p1.x + p2.x) / 2, (p1.y + p2.y) / 2)\n    const c2 = c1.clone().add(normalized.multiplyScalar(0.5))\n    p1 = c1.toObject()\n    p2 = c2.toObject()\n  }\n\n  return { p1, p2 }\n}\n\nexport function inverseLine(line: LinePosition): LinePosition {\n  return { p1: line.p2, p2: line.p1 }\n}\n\nexport function calculatePerpendicularLine(line: VectorLine) {\n  const n1 = line.v\n    .clone()\n    .normalize()\n    .rotate(Math.PI / 2)\n  return VectorLine.fromVectors(line.target, line.target.clone().add(n1))\n}\n","import V, { Vector2D } from \"@/modules/vector2d\"\nimport { VectorLine } from \"./line\"\n\n/**\n * Calculate the nearest point from a point to a line.\n * @param p point\n * @param line line\n * @returns point on the line\n */\nexport function getNearestPoint(p: Vector2D, line: VectorLine): Vector2D {\n  const n = line.v.clone().normalize()\n\n  // Let `a` be a vector from any one point on a line to a point\n  const lp = line.source\n  const a = V.subtract(p, lp)\n\n  // Inner product of `n` and `a`\n  const dot = n.dot(a)\n\n  // The nearest point is the sum of a point on the line and a\n  // vector of n multiplied by dot.\n  const near = lp.clone().add(n.multiplyScalar(dot))\n\n  return near\n}\n\n// /**\n//  * Calculate the distance of nearest point from a point to a line.\n//  * @param p point\n//  * @param line line\n//  * @returns distance\n//  */\n// export function getDistanceToNearestPoint(p: Vector2D, line: VectorLine): number {\n//   const p2 = line.source\n//   const v2 = line.v\n\n//   const v2len = v2.lengthSquared()\n//   if (v2len === 0) {\n//     return 0\n//   }\n//   const t = V.dot(v2, V.subtract(p, p2)) / v2len\n//   const tv2 = V.multiplyScalar(v2, t)\n//   const h = p2.clone().add(tv2)\n//   return h.subtract(p).length()\n// }\n\nexport function getIntersectionOfLineTargetAndCircle(\n  source: Vector2D,\n  target: Vector2D,\n  center: Vector2D,\n  radius: number\n): Vector2D | null {\n  // Does the node contain a point?\n  const length = V.lengthSquared(V.subtract(target, center))\n  const contains = length - radius * radius <= Math.pow(1, -10)\n\n  if (!contains) return null // Not contained.\n\n  // If contained, calculate the intersection point.\n\n  // Find the nearest point `h` between `c` and the line\n  const line = VectorLine.fromVectors(source, target)\n  const h = getNearestPoint(center, line)\n\n  // Let `hp` be the vector from `c` to `h`.\n  const hpLen = V.length(V.subtract(h, center))\n\n  // If `hpLen` is larger than the radius of the circle,\n  // there is no intersection.\n  if (radius < hpLen) return null\n\n  // When a straight line and a circle are tangent, `hpLen` is `r`.\n  // Then the point of contact is the nearest point between the\n  // center and the line.\n  if (radius === hpLen) return h\n\n  // Let `t` be the distance from `h` to the contact point, and\n  // derive t from the Three Square Theorem.\n  const t = Math.sqrt(radius ** 2 - hpLen ** 2)\n\n  // Let `tv` be the vector of the normalized direction vector of\n  // the line multiplied by t\n  // - intersection point 1：p + tv\n  // - intersection point 2：p - tv\n  const tv = line.v.normalize().multiplyScalar(t)\n\n  // Calculate the addition or subtraction depending on which side\n  // of the line to focus on.\n  return h.subtract(tv)\n}\n\nexport function getIntersectionOfLineTargetAndCircle2(\n  source: Vector2D,\n  target: Vector2D,\n  center: Vector2D,\n  radius: number,\n  nearBy: Vector2D\n): Vector2D | null {\n  // Does the node contain a point?\n  const length = V.lengthSquared(V.subtract(target, center))\n  const contains = length - radius * radius <= Math.pow(1, -10)\n\n  if (!contains) return null // Not contained.\n\n  // If contained, calculate the intersection point.\n\n  // Find the nearest point `h` between `c` and the line\n  const line = VectorLine.fromVectors(source, target)\n  const h = getNearestPoint(center, line)\n\n  // Let `hp` be the vector from `c` to `h`.\n  const hpLen = V.length(V.subtract(h, center))\n\n  // If `hpLen` is larger than the radius of the circle,\n  // there is no intersection.\n  if (radius < hpLen) return null\n\n  // When a straight line and a circle are tangent, `hpLen` is `r`.\n  // Then the point of contact is the nearest point between the\n  // center and the line.\n  if (radius === hpLen) return h\n\n  // Let `t` be the distance from `h` to the contact point, and\n  // derive t from the Three Square Theorem.\n  const t = Math.sqrt(radius ** 2 - hpLen ** 2)\n\n  // Let `tv` be the vector of the normalized direction vector of\n  // the line multiplied by t\n  // - intersection point 1：p + tv\n  // - intersection point 2：p - tv\n  const tv = line.v.normalize().multiplyScalar(t)\n  const ip1 = h.clone().add(tv)\n  const ip2 = h.clone().subtract(tv)\n\n  const d1 = nearBy.distance(ip1)\n  const d2 = nearBy.distance(ip2)\n\n  if (Math.abs(d1 - d2) < 2) {\n    // Calculate the addition or subtraction depending on which side\n    // of the line to focus on.\n    return ip2\n  }\n\n  return d1 < d2 ? ip1 : ip2\n}\n\n/**\n * Calculate the intersection of two lines.\n * @param line1 line 1\n * @param line2 line 2\n * @returns intersection point\n */\nexport function getIntersectionPointOfLines(line1: VectorLine, line2: VectorLine): Vector2D {\n  const v = V.subtract(line2.source, line1.source)\n\n  const v1 = line1.v\n  const v2 = line2.v\n\n  const t2 = V.cross(v, v1) / V.cross(v1, v2)\n\n  return line2.source.clone().add(v2.clone().multiplyScalar(t2))\n}\n\nexport function getIntersectionOfCircles(\n  center1: Vector2D,\n  radius1: number,\n  center2: Vector2D,\n  radius2: number,\n  near: Vector2D\n): Vector2D | null {\n  const c1 = center1\n  const c2 = center2\n\n  // vector of C1-->C2\n  const vC1C2 = c2.clone().subtract(c1)\n\n  // length of C1--C2\n  const a = vC1C2.length()\n\n  const sumR = radius1 + radius2\n  if (sumR < a) return null // no overlap\n\n  // When a circle is contained, there is no contact point.\n  const subR = Math.abs(radius1 - radius2)\n  if (a < subR) return null\n\n  // When the circles are circumscribed, [a] and the sum of\n  // radius of two circles are equal. And there is only one\n  // contact point.\n  if (a === sumR) {\n    const n = vC1C2.clone().normalize()\n    const p = center1.clone().add(n.multiplyScalar(radius1))\n    return p\n  }\n\n  // When the circles are inscribed, [a] and the difference\n  // between the radius of two circles are equal. And there\n  // is only one point of contact.\n  if (a === subR) {\n    const n = vC1C2.clone().normalize()\n    const isLarge = radius1 > radius2\n    // Let [P] be the contact point:\n    // * C1 is larger : P = C1 + r1 * n\n    // * C1 is smaller: P = C1 - r1 * n\n    const p = center1.clone().add(n.multiplyScalar(isLarge ? radius1 : -radius1))\n    return p\n  }\n\n  // All three sides of triangle C1C2P are known.\n  // [b] := length of C1--P\n  // [c] := length of C2--P\n  const b = radius1\n  const c = radius2\n\n  // The cos θ of angle C1 is given by the cosine theorem:\n  const cos = (a ** 2 + b ** 2 - c ** 2) / (2 * a * b)\n\n  // Let [H] be the point where the vertical line from [P] to\n  // C1--C2 is dropped, and let [rc] be the length of C1--H.\n  const rc = b * cos\n\n  // Let the length of the H--P be [rs]\n  const rs = Math.sqrt(b ** 2 - rc ** 2)\n\n  // normalized vector of vC1C2\n  const n1 = vC1C2.clone().normalize()\n\n  // vector with n1 rotated 90 degrees to the left\n  const n2 = new Vector2D(-n1.y, n1.x)\n\n  // The point of intersection [P]\n  // P  = C1 + tn1 + sn2\n  // P' = C1 + tn1 - sn2\n  const tn1 = n1.clone().multiplyScalar(rc)\n  const sn2 = n2.clone().multiplyScalar(rs)\n\n  const result1 = center1.clone().add(tn1).add(sn2)\n  const result2 = center1.clone().add(tn1).subtract(sn2)\n\n  const d1 = result1.distance(near)\n  const d2 = result2.distance(near)\n\n  return d1 < d2 ? result1 : result2\n}\n","import { AnyShapeStyle, RectangleShapeStyle, StrokeStyle } from \"@/common/configs\"\nimport { EdgeLabelArea, LinePosition, Position } from \"@/common/types\"\nimport V, { Vector2D } from \"@/modules/vector2d\"\nimport * as PointUtils from \"./point\"\nimport * as LineUtils from \"./line\"\nimport { VectorLine } from \"./line\"\nimport minBy from \"lodash-es/minBy\"\n\n// /**\n//  * Calculate whether a point is contained in a circle.\n//  * @param point point\n//  * @param center center of the circle\n//  * @param radius radius of the circle\n//  * @returns whether point is contained in a circle\n//  */\n// export function isPointContainedInCircle(\n//   point: Position,\n//   center: Position,\n//   radius: number\n// ): boolean {\n//   const p = Vector2D.fromObject(point)\n//   const c = Vector2D.fromObject(center)\n//   const v = p.subtract(c)\n//   return v.lengthSquared() < radius * radius\n// }\n\n// /**\n//  * Calculate the distance of the line.\n//  * @param line line\n//  * @returns distance\n//  */\n// export function calculateDistance(line: LinePosition): number {\n//   return V.distance(line.p1, line.p2)\n// }\n\n/**\n * Get the distance that a line should be away from the\n * edge to avoid contacting a rounded rectangle.\n * @param sourcePos source position of the line\n * @param targetPos target position of the line\n * @param rect rectangle style\n * @param scale scale factor\n * @returns distance from target position\n */\nfunction calculateDistanceToAvoidOverlapsWithRect(\n  sourcePos: Position,\n  targetPos: Position, // position of the target rounded rectangle\n  rect: RectangleShapeStyle,\n  scale: number\n) {\n  const centerLine = VectorLine.fromPositions(sourcePos, targetPos)\n  const halfWidth = ((rect.width + rect.strokeWidth) / 2) * scale\n  const halfHeight = ((rect.height + rect.strokeWidth) / 2) * scale\n\n  const borderRadius =\n    rect.borderRadius > 0 ? (rect.borderRadius + rect.strokeWidth / 2) * scale : 0\n\n  // check whether it crosses over the vertical or horizontal boundary\n  const angleVRad = (centerLine.v.angle() - Math.PI / 2) % Math.PI\n  const angleHRad = Math.PI / 2 - (angleVRad % Math.PI)\n  const w = halfHeight * Math.abs(Math.tan(angleVRad))\n  const h = halfWidth * Math.abs(Math.tan(angleHRad))\n  const isCrossedVLine = w <= halfWidth - borderRadius\n  const isCrossedHLine = h <= halfHeight - borderRadius\n  if (isCrossedVLine || isCrossedHLine || borderRadius === 0) {\n    if (isCrossedVLine) {\n      return Math.sqrt(halfHeight ** 2 + w ** 2)\n    } else {\n      return Math.sqrt(halfWidth ** 2 + h ** 2)\n    }\n  } else {\n    // on the border radius: calculate the center of circles\n    const left = targetPos.x - halfWidth + borderRadius\n    const top = targetPos.y - halfHeight + borderRadius\n    const right = targetPos.x + halfWidth - borderRadius\n    const bottom = targetPos.y + halfHeight - borderRadius\n    const vertexes = [\n      new Vector2D(left, top),\n      new Vector2D(right, top),\n      new Vector2D(right, bottom),\n      new Vector2D(left, bottom),\n    ]\n    const index = Math.floor(((centerLine.v.angleDegree() + 360) % 360) / 90)\n    const centerOfNearestCircle = vertexes[index]\n    const point = PointUtils.getIntersectionOfLineTargetAndCircle(\n      centerLine.source,\n      PointUtils.getNearestPoint(centerOfNearestCircle, centerLine),\n      centerOfNearestCircle,\n      borderRadius\n    )\n    return point\n      ? LineUtils.toLineVector(point, centerLine.target).length()\n      : LineUtils.toLineVector(centerOfNearestCircle, centerLine.target).length() + borderRadius\n  }\n}\n\n/**\n * Calculate the position to display the edge label from the\n * positions of the edge.\n * @param linePos line segment between the outermost of the nodes\n * @param edgeStyle stroke style of edges\n * @param margin margin from line\n * @param padding padding from outside\n * @param scale scale factor\n * @returns edge label display area\n */\nexport function calculateEdgeLabelArea(\n  linePos: LinePosition,\n  edgeStyle: StrokeStyle,\n  margin: number,\n  padding: number,\n  scale: number\n): EdgeLabelArea {\n  // the line segment between the outermost of the nodes\n  const line = VectorLine.fromLinePosition(linePos)\n  const normalized = line.v.clone().normalize()\n\n  // source side\n  const sv =\n    padding === 0\n      ? line.source\n      : line.source.clone().add(normalized.clone().multiplyScalar(padding * scale))\n\n  // target side\n  const tv =\n    padding === 0\n      ? line.target\n      : line.target.clone().subtract(normalized.clone().multiplyScalar(padding * scale))\n\n  // margin for edges\n  const labelMargin = (edgeStyle.width / 2 + margin) * scale\n  const vMargin = new Vector2D(-normalized.y, normalized.x).multiplyScalar(labelMargin)\n  let sourceAbove = V.subtract(sv, vMargin)\n  let sourceBelow = V.add(sv, vMargin)\n  let targetAbove = V.subtract(tv, vMargin)\n  let targetBelow = V.add(tv, vMargin)\n\n  const angle = line.v.angleDegree()\n  if (angle < -90 || angle >= 90) {\n    // upside down\n    ;[sourceAbove, sourceBelow] = [sourceBelow, sourceAbove]\n    ;[targetAbove, targetBelow] = [targetBelow, targetAbove]\n  }\n  return {\n    source: { above: sourceAbove, below: sourceBelow },\n    target: { above: targetAbove, below: targetBelow },\n  }\n}\n\n/**\n * Calculate the distances between center of node and edge of node.\n * @param sourceNodePos position of source node\n * @param targetNodePos position of target node\n * @param sourceNodeShape shape config of source node\n * @param targetNodeShape shape config of target node\n * @returns the distances\n */\nexport function calculateDistancesFromCenterOfNodeToEndOfNode(\n  sourceNodePos: Position,\n  targetNodePos: Position,\n  sourceNodeShape: AnyShapeStyle,\n  targetNodeShape: AnyShapeStyle\n): [number, number] {\n  // source side\n  let distance1: number\n  if (sourceNodeShape.type === \"circle\") {\n    distance1 = sourceNodeShape.radius + (sourceNodeShape.strokeWidth / 2)\n  } else {\n    distance1 = calculateDistanceToAvoidOverlapsWithRect(\n      targetNodePos,\n      sourceNodePos,\n      sourceNodeShape,\n      1 // scale\n    )\n  }\n\n  // target side\n  let distance2: number\n  if (targetNodeShape.type === \"circle\") {\n    distance2 = targetNodeShape.radius + (targetNodeShape.strokeWidth / 2)\n  } else {\n    distance2 = calculateDistanceToAvoidOverlapsWithRect(\n      sourceNodePos,\n      targetNodePos,\n      targetNodeShape,\n      1 // scale\n    )\n  }\n\n  return [distance1, distance2]\n}\n\n/**\n * Calculates the position of a given distance along the circumference.\n * @param pos original position\n * @param center center of the circle\n * @param radian radius of the circle\n * @returns the moved position\n */\nexport function moveOnCircumference(pos: Position, center: Position, radian: number) {\n  const { x, y } = pos\n  const dx = x - center.x\n  const dy = y - center.y\n\n  return {\n    x: dx * Math.cos(radian) - dy * Math.sin(radian) + center.x,\n    y: dx * Math.sin(radian) + dy * Math.cos(radian) + center.y,\n  }\n}\n\n/**\n * Reverse the direction of the angle.\n * @param theta angle\n * @returns reversed angle\n */\nexport function reverseAngleRadian(theta: number): number {\n  if (theta > 0) {\n    return -(Math.PI * 2 - theta)\n  } else {\n    return Math.PI * 2 + theta\n  }\n}\n\nexport function calculateBezierCurveControlPoint(\n  p1: Vector2D,\n  center: Vector2D,\n  p2: Vector2D,\n  theta0: number\n): Vector2D[] {\n  const control: Vector2D[] = []\n  const centerToSource = VectorLine.fromVectors(center, p1)\n  const centerToTarget = VectorLine.fromVectors(center, p2)\n\n  let theta = calculateRelativeAngleRadian(centerToSource, centerToTarget)\n  if (theta0 * theta < 0) {\n    theta = reverseAngleRadian(theta)\n  }\n  const middle = Vector2D.fromObject(moveOnCircumference(p1, center, -theta / 2))\n  const centerToMp = VectorLine.fromVectors(center, middle)\n  const mpTangent = LineUtils.calculatePerpendicularLine(centerToMp)\n\n  const theta1 = calculateRelativeAngleRadian(centerToSource, centerToMp)\n  let tangent = LineUtils.calculatePerpendicularLine(centerToSource)\n  if (Math.abs(theta1) < Math.PI / 2) {\n    const cp = PointUtils.getIntersectionPointOfLines(tangent, mpTangent)\n    control.push(cp)\n  } else {\n    // If greater than 90 degrees, go through the midpoint.\n    const mp = Vector2D.fromObject(moveOnCircumference(middle, center, theta1 / 2))\n    const tangent2 = LineUtils.calculatePerpendicularLine(\n      VectorLine.fromVectors(center, Vector2D.fromObject(mp))\n    )\n    const cp1 = PointUtils.getIntersectionPointOfLines(tangent, tangent2)\n    const cp2 = PointUtils.getIntersectionPointOfLines(tangent2, mpTangent)\n    control.push(cp1, mp, cp2)\n  }\n\n  control.push(middle)\n\n  const theta2 = calculateRelativeAngleRadian(centerToTarget, centerToMp)\n  tangent = LineUtils.calculatePerpendicularLine(centerToTarget)\n  if (Math.abs(theta2) < Math.PI / 2) {\n    const cp = PointUtils.getIntersectionPointOfLines(tangent, mpTangent)\n    control.push(cp)\n  } else {\n    // If greater than 90 degrees, go through the midpoint.\n    const mp = Vector2D.fromObject(moveOnCircumference(middle, center, theta2 / 2))\n    const tangent2 = LineUtils.calculatePerpendicularLine(\n      VectorLine.fromVectors(center, Vector2D.fromObject(mp))\n    )\n    const cp1 = PointUtils.getIntersectionPointOfLines(mpTangent, tangent2)\n    const cp2 = PointUtils.getIntersectionPointOfLines(tangent2, tangent)\n    control.push(cp1, mp, cp2)\n  }\n\n  return control\n}\n\nexport function calculateRelativeAngleRadian(line1: VectorLine, line2: VectorLine) {\n  return Math.atan2(\n    line1.v.y * line2.v.x - line1.v.x * line2.v.y,\n    line1.v.x * line2.v.x + line1.v.y * line2.v.y\n  )\n}\n\nexport function calculateCircleCenterAndRadiusBy3Points(\n  p1: Vector2D,\n  p2: Vector2D,\n  p3: Vector2D\n): [Vector2D, number] {\n  const x1 = p1.x\n  const y1 = p1.y\n  const x2 = p2.x\n  const y2 = p2.y\n  const x3 = p3.x\n  const y3 = p3.y\n  const x12 = x1 - x2\n  const y12 = y1 - y2\n  const x32 = x3 - x2\n  const y32 = y3 - y2\n\n  const x =\n    (y32 * (x12 * (x1 + x2) + y12 * (y1 + y2)) - y12 * (x32 * (x3 + x2) + y32 * (y3 + y2))) /\n    (2 * x12 * y32 - 2 * y12 * x32)\n  const y =\n    (-x32 * (x12 * (x1 + x2) + y12 * (y1 + y2)) + x12 * (x32 * (x3 + x2) + y32 * (y3 + y2))) /\n    (2 * x12 * y32 - 2 * y12 * x32)\n\n  const radius = Math.sqrt(Math.pow(x1 - x, 2) + Math.pow(y1 - y, 2))\n  const center = new Vector2D(x, y)\n  return [center, radius]\n}\n","\nexport function convertToAscii(source: string): string {\n  if (typeof btoa === undefined) {\n    return Buffer.from(source).toString(\"base64\").replaceAll(\"=\", \"\")\n  } else {\n    return btoa(source).replaceAll(\"=\", \"\")\n  }\n}\n","import { reactive } from \"vue\"\nimport { MarkerStyle } from \"@/common/configs\"\nimport { convertToAscii } from \"@/utils/string\"\n\nexport type MarkerBuilder = (marker: MarkerStyle | null, isSource?: boolean) => string\n\nexport interface HeadMarker extends MarkerStyle {\n  color: string\n  isSource: boolean\n}\n\nexport interface MarkerState {\n  markers: Record<string, HeadMarker>\n  referenceCount: Record<string, number>\n}\n\nexport function makeMarkerState(): MarkerState {\n  const markers: Record<string, HeadMarker> = reactive({})\n  const referenceCount: Record<string, number> = {}\n  return { markers, referenceCount }\n}\n\nexport function useMarker(markerState: MarkerState) {\n  const { markers, referenceCount } = markerState\n\n  function addMarker(key: string, marker: HeadMarker) {\n    const m = referenceCount[key] ?? 0\n    referenceCount[key] = m + 1\n    if (!m) {\n      markers[key] = marker\n    }\n  }\n\n  function removeMarker(key: string) {\n    const m = referenceCount[key] ?? 0\n    if (m) {\n      if (m - 1 === 0) {\n        delete markers[key]\n        delete referenceCount[key]\n      } else {\n        referenceCount[key] = m - 1\n      }\n    }\n  }\n\n  function clearMarker(id: string | undefined) {\n    if (id) {\n      removeMarker(id)\n    }\n  }\n\n  function makeMarker(\n    marker: MarkerStyle,\n    isSource: boolean,\n    previousId: string | undefined,\n    strokeColor: string,\n    instanceId: number\n  ) {\n    if (marker.type === \"none\") {\n      clearMarker(previousId)\n      return undefined\n    }\n\n    if (marker.type === \"custom\") {\n      clearMarker(previousId)\n      return marker.customId\n    }\n\n    const headMarker = toHeadMarker(marker, isSource, strokeColor)\n    const id = buildKey(headMarker, instanceId)\n    if (id === previousId) {\n      return id\n    }\n    clearMarker(previousId)\n    addMarker(id, headMarker)\n    return id\n  }\n\n  return {\n    makeMarker,\n    clearMarker,\n  }\n}\n\nfunction toHeadMarker(marker: MarkerStyle, isSource: boolean, strokeColor: string) {\n  return {\n    ...marker,\n    color: marker.color ?? strokeColor,\n    isSource,\n  }\n}\n\nfunction buildKey(m: HeadMarker, instanceId: number) {\n  // If the same marker ID exists in the previous instance and is hidden by\n  // `display: none`, the marker in the other instance will disappear.\n  // For safety, marker IDs will be unique in the entire page.\n  const c = convertToAscii(m.color)\n  const d = m.isSource ? \"L\" : \"R\"\n  const u = m.units === \"strokeWidth\" ? \"rel\" : \"abs\"\n  return `marker_${instanceId}_${m.type}_${m.width}_${m.height}_${m.margin}_${c}_${d}_${u}`\n}\n","// Management states of objects\n\nimport { computed, ComputedRef, reactive, Ref, unref, UnwrapRef, watch } from \"vue\"\nimport { Reactive } from \"@/common/common\"\nimport { Config, ObjectConfigs, ZOrderConfig } from \"@/common/configs\"\n\ntype Objects<T> = Record<string, T>\n\ninterface ObjectStateDatumBase {\n  id: string\n  selected: boolean\n  hovered: boolean\n  selectable: ComputedRef<boolean | number>\n  zIndex: ComputedRef<number>\n}\ntype ObjectState<S extends ObjectStateDatumBase> = UnwrapRef<S>\n\ntype PartiallyPartial<T, K extends keyof T> = Pick<T, K> & Partial<Omit<T, K>>\ntype NewStateDatum<T extends ObjectStateDatumBase> = PartiallyPartial<T, keyof ObjectStateDatumBase>\n\nexport function useObjectState<\n  T,\n  S extends ObjectStateDatumBase,\n  E extends { id: string; zIndex: number } = ObjectState<S>\n>(\n  objects: Ref<Record<string, T>>,\n  config: ObjectConfigs<T>,\n  selected: Reactive<Set<string>>,\n  hovered: Reactive<Set<string>>,\n  createState: (obj: Ref<Objects<T>>, id: string, state: NewStateDatum<S>) => void,\n  terminateState?: (id: string, state: ObjectState<S>) => void,\n  entriesForZOrder?: () => E[]\n): {\n  states: Record<string, ObjectState<S>>\n  zOrderedList: ComputedRef<E[]>\n} {\n  // Object states\n  const states: Record<string, ObjectState<S>> = reactive({})\n\n  // Handle object added/removed\n  watch(\n    () => new Set(Object.keys(objects.value)),\n    (idSet, prev) => {\n      if (!prev) prev = new Set([])\n      for (const id of idSet) {\n        if (prev.has(id)) continue\n        // object added\n        createNewState(objects, states, id, false, config, createState)\n        // adding to layouts is done by layout handler\n      }\n\n      for (const id of prev) {\n        if (idSet.has(id)) continue\n        // object removed\n        selected.delete(id)\n        hovered.delete(id)\n        terminateState?.(id, states[id] as ObjectState<S>)\n        delete states[id]\n      }\n    },\n    { immediate: true }\n  )\n\n  // Object selection\n  // - update `{obj}.selected` flag\n  watch(\n    () => [...selected],\n    (objects, prev) => {\n      const append = prev ? objects.filter(n => !prev.includes(n)) : objects\n      const removed = prev ? prev.filter(n => !objects.includes(n)) : []\n      append.forEach(id => {\n        const state = states[id]\n        if (state && !state.selected) state.selected = true\n      })\n      removed.forEach(id => {\n        const state = states[id]\n        if (state && state.selected) state.selected = false\n      })\n    },\n    { immediate: true } // for specified from the beginning\n  )\n\n  // - update `node.hovered` flag\n  watch(\n    () => [...hovered],\n    (nodes, prev) => {\n      const append = nodes.filter(n => !prev.includes(n))\n      const removed = prev.filter(n => !nodes.includes(n))\n      append.forEach(id => {\n        const state = states[id]\n        if (state && !state.hovered) state.hovered = true\n      })\n      removed.forEach(id => {\n        const state = states[id]\n        if (state && state.hovered) state.hovered = false\n      })\n    }\n  )\n\n  // z-order\n  // z-index applied Object List\n  const zOrderedList = computed(() => {\n    const list: E[] = entriesForZOrder ? entriesForZOrder() : (Object.values(states) as E[])\n    if (config.zOrder.enabled) {\n      return makeZOrderedList(list, config.zOrder, hovered, selected)\n    } else {\n      return list\n    }\n  })\n\n  return { states, zOrderedList }\n}\n\nfunction createNewState<T, S extends ObjectStateDatumBase>(\n  objects: Ref<Objects<T>>,\n  states: Record<string, ObjectState<S>>,\n  id: string,\n  selected: boolean,\n  config: ObjectConfigs<T>,\n  createState: (obj: Ref<Objects<T>>, id: string, state: NewStateDatum<S>) => void\n) {\n  const stateObject = <NewStateDatum<S>>{\n    id,\n    selected,\n    hovered: false,\n    selectable: computed(() => {\n      if (!objects.value[id]) return unref(stateObject.selectable) // Return the previous value\n      return Config.value(config.selectable, objects.value[id])\n    }),\n    zIndex: computed(() => {\n      if (!objects.value[id]) return unref(stateObject.zIndex) // Return the previous value\n      return Config.value(config.zOrder.zIndex, objects.value[id])\n    }),\n  }\n  states[id] = stateObject as ObjectState<S>\n  createState(objects, id, states[id] as NewStateDatum<S> /* get reactive object */)\n}\n\nfunction makeZOrderedList<S extends { id: string; zIndex: number }, T>(\n  states: S[],\n  zOrder: ZOrderConfig<T>,\n  hovered: Reactive<Set<string>>,\n  selected: Reactive<Set<string>>\n) {\n  if (zOrder.bringToFrontOnHover && zOrder.bringToFrontOnSelected) {\n    return states.sort((a, b) => {\n      const hover1 = hovered.has(a.id)\n      const hover2 = hovered.has(b.id)\n      if (hover1 != hover2) {\n        return hover1 ? 1 : -1\n      }\n      const selected1 = selected.has(a.id)\n      const selected2 = selected.has(b.id)\n      if (selected1 != selected2) {\n        return selected1 ? 1 : -1\n      }\n      return a.zIndex - b.zIndex\n    })\n  } else if (zOrder.bringToFrontOnHover) {\n    return states.sort((a, b) => {\n      const hover1 = hovered.has(a.id)\n      const hover2 = hovered.has(b.id)\n      if (hover1 != hover2) {\n        return hover1 ? 1 : -1\n      }\n      return a.zIndex - b.zIndex\n    })\n  } else if (zOrder.bringToFrontOnSelected) {\n    return states.sort((a, b) => {\n      const selected1 = selected.has(a.id)\n      const selected2 = selected.has(b.id)\n      if (selected1 != selected2) {\n        return selected1 ? 1 : -1\n      }\n      return a.zIndex - b.zIndex\n    })\n  } else {\n    return states.sort((a, b) => {\n      return a.zIndex - b.zIndex\n    })\n  }\n}\n","// the states of nodes and edges\n\nimport { computed, ComputedRef, reactive, ref, Ref, toRef, unref } from \"vue\"\nimport { watch, watchEffect } from \"vue\"\nimport { inject, InjectionKey, provide } from \"vue\"\nimport { nonNull, Reactive } from \"@/common/common\"\nimport { Config, Configs, EdgeConfig, MarkerStyle, NodeConfig } from \"@/common/configs\"\nimport { StrokeStyle } from \"@/common/configs\"\nimport { Edge, Edges, Layouts, Node, Nodes, NodePositions, Path, Paths } from \"@/common/types\"\nimport { LinePosition } from \"@/common/types\"\nimport { useId } from \"@/composables/id\"\nimport * as NodeModel from \"@/models/node\"\nimport * as EdgeModel from \"@/models/edge\"\nimport * as EdgeGroup from \"@/modules/edge/group\"\nimport * as PathModel from \"@/models/path\"\nimport * as v2d from \"@/modules/calculation/2d\"\nimport * as LineUtils from \"@/modules/calculation/line\"\nimport { VectorLine } from \"@/modules/calculation/line\"\nimport { MarkerState, useMarker } from \"./marker\"\nimport { useObjectState } from \"./objectState\"\n\n// -----------------------------------------------------------------------\n// Type definitions\n// -----------------------------------------------------------------------\n\nexport type { EdgeGroupStates } from \"@/models/edge\"\n\n// States of nodes\n\n// Provide states\n\ninterface States {\n  nodeStates: NodeModel.NodeStates\n  edgeStates: EdgeModel.EdgeStates\n  edgeGroupStates: EdgeModel.EdgeGroupStates\n  summarizedEdgeStates: EdgeModel.SummarizedEdgeStates\n  pathStates: PathModel.PathStates\n  nodeZOrderedList: ComputedRef<NodeModel.NodeState[]>\n  edgeZOrderedList: ComputedRef<EdgeModel.EdgeEntry[]>\n  pathZOrderedList: ComputedRef<PathModel.PathState[]>\n  layouts: Layouts\n}\n\nexport type ReadonlyStates = Readonly<States>\n\ninterface InputObjects<T> {\n  objects: Ref<T>\n  selected: Reactive<Set<string>>\n  hovered: Reactive<Set<string>>\n}\n\nexport function makeStateInput<T>(\n  objects: Ref<T>,\n  selected: Reactive<Set<string>>,\n  hovered: Reactive<Set<string>>\n) {\n  return {\n    objects,\n    selected,\n    hovered,\n  }\n}\n\n// -----------------------------------------------------------------------\n// Constants\n// -----------------------------------------------------------------------\n\nconst statesKey = Symbol(\"states\") as InjectionKey<States>\n\nconst NONE_MARKER: MarkerStyle = {\n  type: \"none\",\n  width: 0,\n  height: 0,\n  margin: 0,\n  units: \"strokeWidth\",\n  color: null,\n}\n\n// -----------------------------------------------------------------------\n// Exported functions\n// -----------------------------------------------------------------------\n\nexport function provideStates(\n  nodes: InputObjects<Nodes>,\n  edges: InputObjects<Edges>,\n  paths: InputObjects<Paths>,\n  configs: Readonly<Configs>,\n  layouts: Reactive<Layouts>,\n  makerState: MarkerState,\n  scale: ComputedRef<number>\n) {\n  const summarizedEdgeStates: EdgeModel.SummarizedEdgeStates = reactive({})\n\n  // -----------------------------------------------------------------------\n  // States for nodes\n  // -----------------------------------------------------------------------\n\n  const {\n    states: nodeStates,\n    zOrderedList: nodeZOrderedList, //\n  } = useObjectState<Node, NodeModel.NodeStateDatum, NodeModel.NodeState>(\n    nodes.objects,\n    configs.node,\n    nodes.selected,\n    nodes.hovered,\n    (nodes, id, newState) => {\n      createNewNodeState(nodes, id, newState as NodeModel.NodeStateDatum, configs.node)\n    },\n    (nodeId, _state) => {\n      const positions = layouts.nodes\n      delete positions[nodeId]\n    }\n  )\n\n  // -----------------------------------------------------------------------\n  // States for edges\n  // -----------------------------------------------------------------------\n  // Instance ID number for using to make marker ID generation unique for the\n  // entire page.\n  // If the same marker ID exists in the previous instance and is hidden by\n  // `display: none`, the marker in the other instance will disappear.\n  // To be safe, markers should be unique in the entire page.\n  const instanceId = useId()\n\n  // grouping\n  const edgeGroupStates = EdgeGroup.makeEdgeGroupStates(nodes.objects, edges.objects, configs)\n\n  // edge entries for applying z-order\n  const edgeEntries = ref<EdgeModel.EdgeEntry[]>([])\n\n  const {\n    states: edgeStates,\n    zOrderedList: edgeZOrderedList, //\n  } = useObjectState<Edge, EdgeModel.EdgeStateDatum, EdgeModel.EdgeEntry>(\n    edges.objects,\n    configs.edge,\n    edges.selected,\n    edges.hovered,\n    (edges, id, newState) => {\n      createNewEdgeState(\n        edges,\n        id,\n        newState as EdgeModel.EdgeStateDatum,\n        configs.edge,\n        makerState,\n        nodeStates,\n        edgeGroupStates,\n        layouts.nodes,\n        scale,\n        instanceId\n      )\n    },\n    (_edgeId, state) => {\n      state.stopWatchHandle?.()\n    },\n    () => edgeEntries.value\n  )\n\n  // Edge item for display (an edge or summarized edges)\n  watchEffect(() => {\n    edgeEntries.value = createEdgeEntries(edgeGroupStates.edgeGroups, edgeStates)\n  })\n\n  watch(\n    edgeGroupStates.edgeGroups,\n    _ => createSummarizedEdgeStates(summarizedEdgeStates, edgeGroupStates, configs),\n    { immediate: true }\n  )\n\n  // -----------------------------------------------------------------------\n  // States for paths\n  // -----------------------------------------------------------------------\n\n  const {\n    states: pathStates,\n    zOrderedList: pathZOrderedList, //\n  } = useObjectState<Path, PathModel.PathStateDatum, PathModel.PathState>(\n    paths.objects,\n    configs.path,\n    paths.selected,\n    paths.hovered,\n    (paths, id, newState) => {\n      const state = newState as PathModel.PathStateDatum\n\n      state.clickable = computed(() => {\n        if (!paths.value[id]) return false\n        return Config.value(configs.path.clickable, paths.value[id])\n      })\n      state.hoverable = computed(() => {\n        if (!paths.value[id]) return false\n        return Config.value(configs.path.hoverable, paths.value[id])\n      })\n\n      state.path = paths.value[id]\n      state.edges = computed(() => {\n        const path = paths.value[id]\n        return path.edges\n          .map(edgeId => ({ edgeId, edge: edges.objects.value[edgeId] }))\n          .filter(e => e.edge)\n      })\n    }\n  )\n\n  const states = <States>{\n    nodeStates,\n    edgeStates,\n    edgeGroupStates,\n    summarizedEdgeStates,\n    pathStates,\n    layouts,\n    nodeZOrderedList,\n    edgeZOrderedList,\n    pathZOrderedList,\n  }\n  provide(statesKey, states)\n  return states\n}\n\nexport function isSummarizedEdges(item: EdgeModel.EdgeItem): item is EdgeModel.SummarizedEdgeItem {\n  return item.summarized\n}\n\nexport function useStates() {\n  return nonNull(inject(statesKey), \"states\") as ReadonlyStates\n}\n\n// -----------------------------------------------------------------------\n// Local functions\n// -----------------------------------------------------------------------\n\nfunction getNodeShape(node: Node, selected: boolean, hovered: boolean, config: NodeConfig) {\n  if (hovered && config.hover) {\n    return Config.values(config.hover, node)\n  } else {\n    return getNodeStaticShape(node, selected, config)\n  }\n}\n\nfunction getNodeStaticShape(node: Node, selected: boolean, config: NodeConfig) {\n  // get shape without hovered state\n  if (selected && config.selected) {\n    return Config.values(config.selected, node)\n  } else {\n    return Config.values(config.normal, node)\n  }\n}\n\nfunction createNewNodeState(\n  nodes: Ref<Nodes>,\n  id: string,\n  state: NodeModel.NodeStateDatum,\n  config: NodeConfig\n) {\n  state.shape = computed(() => {\n    if (!nodes.value[id]) return unref(state.shape) // Return the previous value\n    return getNodeShape(nodes.value[id], state.selected, state.hovered, config)\n  })\n\n  state.staticShape = computed(() => {\n    if (!nodes.value[id]) return unref(state.staticShape) // Return the previous value\n    return getNodeStaticShape(nodes.value[id], state.selected, config)\n  })\n\n  state.label = computed(() => {\n    if (!nodes.value[id]) return unref(state.label) // Return the previous value\n    return Config.values(config.label, nodes.value[id])\n  })\n\n  state.labelText = computed(() => {\n    if (config.label.text instanceof Function) {\n      return unref(state.label).text\n    } else {\n      if (!nodes.value[id]) return unref(state.labelText) // Return the previous value\n      return nodes.value[id]?.[unref(state.label).text] ?? \"\"\n    }\n  })\n\n  state.draggable = computed(() => {\n    if (!nodes.value[id]) return unref(state.draggable) // Return the previous value\n    return Config.value(config.draggable, nodes.value[id])\n  })\n}\n\nfunction getEdgeStroke(edge: Edge, selected: boolean, hovered: boolean, config: EdgeConfig) {\n  if (selected) {\n    return Config.values(config.selected, edge)\n  } else if (hovered && config.hover) {\n    return Config.values(config.hover, edge)\n  } else {\n    return Config.values(config.normal, edge)\n  }\n}\n\nfunction toEdgeMarker(marker: MarkerStyle): MarkerStyle {\n  if (marker.type === \"none\") {\n    return NONE_MARKER\n  } else {\n    return marker\n  }\n}\n\nfunction createNewEdgeState(\n  edges: Ref<Edges>,\n  id: string,\n  state: EdgeModel.EdgeStateDatum,\n  config: EdgeConfig,\n  makerState: MarkerState,\n  nodeStates: NodeModel.NodeStates,\n  edgeGroupStates: Reactive<EdgeModel.EdgeGroupStates>,\n  layouts: NodePositions,\n  scale: Ref<number>,\n  instanceId: number\n) {\n  const { makeMarker, clearMarker } = useMarker(makerState)\n\n  Object.assign(state, {\n    origin: { p1: { x: 0, y: 0 }, p2: { x: 0, y: 0 } },\n    labelPosition: { p1: { x: 0, y: 0 }, p2: { x: 0, y: 0 } },\n    position: { p1: { x: 0, y: 0 }, p2: { x: 0, y: 0 } },\n  })\n\n  const line = computed<EdgeModel.Line>(() => {\n    const edge = edges.value[id]\n    const stroke = getEdgeStroke(edge, state.selected, state.hovered, config)\n    // Minimum error checking required for drawing\n    if (isNaN(+stroke.width)) {\n      console.warn(\n        \"[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]\",\n        id,\n        stroke.width\n      )\n      stroke.width = 1\n    }\n    if (stroke.color === undefined || stroke.color === null) {\n      console.warn(\n        \"[v-network-graph] Edge color is invalid value. id=[%s] value=[%s]\",\n        id,\n        stroke.color\n      )\n      stroke.color = \"#000000\"\n    }\n    let normalWidth = Config.value(config.normal.width, edge)\n    if (isNaN(+normalWidth)) {\n      normalWidth = 1\n    }\n    const source = toEdgeMarker(Config.values(config.marker.source, [edge, stroke]))\n    const target = toEdgeMarker(Config.values(config.marker.target, [edge, stroke]))\n    return { stroke, normalWidth, source, target }\n  })\n  state.line = line\n  const edgeLayoutPoint: Ref<EdgeModel.EdgeLayoutPoint | undefined> = toRef(\n    edgeGroupStates.edgeLayoutPoints,\n    id\n  )\n  const isEdgeSummarized: Ref<true | undefined> = toRef(edgeGroupStates.summarizedEdges, id)\n\n  const stopCalcHandle = watchEffect(() => {\n    const edge = edges.value[id]\n    if (!edge) return\n\n    const source = layouts[edge?.source]\n    const target = layouts[edge?.target]\n\n    const sourceShape = nodeStates[edge?.source]?.staticShape\n    const targetShape = nodeStates[edge?.target]?.staticShape\n    if (!source || !target || !sourceShape || !targetShape) {\n      return\n    }\n\n    // calculate the line segment between center of nodes\n    const shiftedPosition = EdgeGroup.calculateEdgeShiftedPosition(\n      edgeLayoutPoint.value,\n      isEdgeSummarized.value ?? false,\n      source,\n      target,\n      scale.value,\n      config.keepOrder\n    )\n\n    const [sourceShapeMargin, targetShapeMargin] =\n      v2d.calculateDistancesFromCenterOfNodeToEndOfNode(source, target, sourceShape, targetShape)\n\n    const s = scale.value\n\n    // calculate the line segment between the outermost of the nodes\n    state.labelPosition = LineUtils.applyMargin(\n      shiftedPosition,\n      sourceShapeMargin * s,\n      targetShapeMargin * s\n    )\n\n    // calculate margins\n    let sourceMargin = 0\n    let targetMargin = 0\n    const l = line.value\n    if (l.source.type !== \"none\") {\n      const marker = l.source\n      sourceMargin = marker.margin + marker.width\n      if (marker.units === \"strokeWidth\") {\n        sourceMargin *= l.normalWidth\n      }\n    }\n    if (l.target.type !== \"none\") {\n      const marker = l.target\n      targetMargin = marker.margin + marker.width\n      if (marker.units === \"strokeWidth\") {\n        targetMargin *= l.normalWidth\n      }\n    }\n\n    if (config.margin === null || config.margin === undefined) {\n      if (l.source.type !== \"none\" || l.target.type !== \"none\") {\n        sourceMargin += sourceShapeMargin\n        targetMargin += targetShapeMargin\n      }\n    } else {\n      sourceMargin += config.margin + sourceShapeMargin\n      targetMargin += config.margin + targetShapeMargin\n    }\n\n    // calculate the line segments to be displayed with margins applied\n    const type = config.type\n    if (type === \"straight\") {\n      state.origin = shiftedPosition\n      state.curve = undefined\n      if (sourceMargin === 0 && targetMargin === 0) {\n        state.position = state.origin\n      } else {\n        state.position = LineUtils.applyMargin(state.origin, sourceMargin * s, targetMargin * s)\n      }\n    } else {\n      // curve\n      state.origin = LineUtils.toLinePosition(source, target)\n\n      const shift = edgeLayoutPoint.value // undefined after node deletion\n        ? edgeLayoutPoint.value.groupWidth / 2 - edgeLayoutPoint.value.pointInGroup\n        : 0\n\n      const [position, curve] = calculateCurvePositionAndState(\n        state.origin,\n        shiftedPosition,\n        shift,\n        sourceMargin * s,\n        targetMargin * s\n      )\n      state.position = position\n      state.curve = curve\n    }\n  })\n\n  const stopUpdateMarkerHandle = watchEffect(() => {\n    if (!edges.value[id]) return\n    state.sourceMarkerId = makeMarker(\n      line.value.source,\n      true /* isSource */,\n      state.sourceMarkerId,\n      line.value.stroke.color,\n      instanceId\n    )\n    state.targetMarkerId = makeMarker(\n      line.value.target,\n      false /* isSource */,\n      state.targetMarkerId,\n      line.value.stroke.color,\n      instanceId\n    )\n  })\n\n  state.stopWatchHandle = () => {\n    stopCalcHandle()\n    stopUpdateMarkerHandle()\n    clearMarker(state.sourceMarkerId)\n    clearMarker(state.targetMarkerId)\n  }\n}\n\nfunction createEdgeEntries(\n  edgeGroups: Record<string, EdgeModel.EdgeGroup>,\n  edgeStates: EdgeModel.EdgeStates\n) {\n  return Object.entries(edgeGroups)\n    .map(([key, group]) => {\n      if (group.summarize) {\n        return <EdgeModel.SummarizedEdgeItem>{\n          id: Object.keys(group.edges)[0] ?? key,\n          summarized: true,\n          key,\n          group,\n          zIndex: Object.keys(group.edges)\n            .map(id => edgeStates[id]?.zIndex ?? 0)\n            .reduce((s, z) => Math.max(s, z)),\n        }\n      } else {\n        return Object.entries(group.edges).map(\n          ([id, edge]) =>\n            <EdgeModel.SingleEdgeItem>{\n              id,\n              summarized: false,\n              key: id,\n              edge,\n              zIndex: edgeStates[id]?.zIndex ?? 0,\n            }\n        )\n      }\n    })\n    .flat()\n}\n\nfunction calculateCurvePositionAndState(\n  originPosition: LinePosition,\n  shiftedPosition: LinePosition,\n  shift: number,\n  sourceMargin: number,\n  targetMargin: number\n): [LinePosition, EdgeModel.Curve | undefined] {\n  // The curve is assumed to be part of a perfect circle and is drawn\n  // as a Bezier curve.\n\n  const origin = VectorLine.fromLinePosition(originPosition)\n  const shifted = VectorLine.fromLinePosition(shiftedPosition)\n  const shiftedCenter = LineUtils.getCenterOfLinePosition(shiftedPosition)\n\n  // Calculate the center and radius of the circle of the curve.\n  const [center, radius] = v2d.calculateCircleCenterAndRadiusBy3Points(\n    origin.source,\n    origin.target,\n    shiftedCenter\n  )\n\n  let position: LinePosition\n  let curve: EdgeModel.Curve | undefined = undefined\n\n  if (shift === 0) {\n    // The line connecting the centers of the nodes is regarded as a straight line.\n    if (sourceMargin === 0 && targetMargin === 0) {\n      position = originPosition\n    } else {\n      position = LineUtils.applyMargin(originPosition, sourceMargin, targetMargin)\n    }\n    return [position, curve]\n  }\n\n  // Apply margin to the line.\n  const centerToTop = VectorLine.fromVectors(center, shiftedCenter)\n\n  // Direction of rotation from source to center:\n  const theta0 = v2d.calculateRelativeAngleRadian(\n    VectorLine.fromVectors(center, origin.source),\n    centerToTop\n  )\n\n  if (sourceMargin === 0 && targetMargin === 0) {\n    position = originPosition\n  } else {\n    // The endpoints of the display line are the point on the circumference\n    // moved by the margin from the origin end points.\n    let sourceMoveRad = sourceMargin / radius\n    let targetMoveRad = targetMargin / radius\n\n    // Determine which direction to move.\n    if (theta0 > 0) {\n      sourceMoveRad *= -1\n      targetMoveRad *= -1\n    }\n    position = LineUtils.toLinePosition(\n      v2d.moveOnCircumference(origin.source, center, sourceMoveRad),\n      v2d.moveOnCircumference(origin.target, center, -targetMoveRad)\n    )\n\n    // If the endpoints are swapped by applying the margin,\n    // a short line is shown at the center.\n    let theta1 = v2d.calculateRelativeAngleRadian(\n      VectorLine.fromVectors(center, origin.source),\n      VectorLine.fromVectors(center, origin.target)\n    )\n    let theta2 = v2d.calculateRelativeAngleRadian(\n      VectorLine.fromPositions(center, position.p1),\n      VectorLine.fromPositions(center, position.p2)\n    )\n    if (theta0 * theta1 < 0) {\n      theta1 = v2d.reverseAngleRadian(theta1)\n      if (theta0 * theta2 < 0) {\n        theta2 = v2d.reverseAngleRadian(theta2)\n      }\n    }\n    if (theta1 * theta2 < 0) {\n      // reversed\n      const c = shiftedCenter.clone().add(shifted.v.normalize().multiplyScalar(0.5))\n      position = LineUtils.toLinePosition(shiftedCenter, c)\n      return [position, curve]\n    }\n  }\n\n  // Calculate the control/via points of a Bezier curve.\n  const [p1, p2] = LineUtils.toVectorsFromLinePosition(position)\n  const control = v2d\n    .calculateBezierCurveControlPoint(p1, center, p2, theta0)\n    .map(p => p.toObject())\n\n  curve = {\n    center: shiftedCenter,\n    theta: theta0,\n    circle: { center, radius },\n    control,\n  }\n  return [position, curve]\n}\n\nfunction createSummarizedEdgeStates(\n  summarizedEdgeStates: EdgeModel.SummarizedEdgeStates,\n  edgeGroupStates: Reactive<EdgeModel.EdgeGroupStates>,\n  configs: Configs\n) {\n  const groups = edgeGroupStates.edgeGroups\n  Object.entries(groups)\n    .filter(([id, group]) => group.summarize && !(id in summarizedEdgeStates))\n    .forEach(([id, group]) => {\n      const state = { stroke: undefined as any }\n      state.stroke = computed<StrokeStyle>(() =>\n        Config.values(configs.edge.summarized.stroke, group.edges)\n      )\n      summarizedEdgeStates[id] = state\n    })\n  Object.keys(summarizedEdgeStates).forEach(id => {\n    if (!edgeGroupStates.edgeGroups[id]?.summarize) {\n      delete summarizedEdgeStates[id]\n    }\n  })\n}\n","\nexport class MapUtil {\n  static valueOf<K, V>(map: Map<K, V>) {\n    return Array.from(map.values())\n  }\n}\n","import { Ref } from \"vue\"\nimport { Position } from \"@/common/types\"\n\nconst MOUSE_MOVE_DETECTION_THRESHOLD = 3 // Sensitivity to start dragging\nconst TOUCH_MOVE_DETECTION_THRESHOLD = 6 // Sensitivity to start dragging in touches\nexport const DOUBLE_CLICK_THRESHOLD = 500\n\nexport type ViewMode = \"default\" | \"node\" | \"edge\" | \"path\"\nexport type SelectionMode = \"container\" | \"node\" | \"edge\" | \"path\"\n\n// state for each pointer of multi touch\nexport interface NodePointerState {\n  pointerId: number // pointer ID provided by the event\n  nodeId: string // pointer down node ID\n  moveCounter: number // count for pointermove event occurred\n  dragBasePosition: Position // drag started position\n  nodeBasePosition: Position // node position at drag started\n  latestPosition: Position // latest position\n  eventTarget: EventTarget | null // event target\n}\n\nexport interface EdgePointerState {\n  pointerId: number // pointer ID provided by the event\n  id: string | string[] // pointer down edge ID\n  eventTarget: EventTarget | null // event target\n}\n\nexport interface PathPointerState {\n  pointerId: number // pointer ID provided by the event\n  id: string // pointer down path ID\n  eventTarget: EventTarget | null // event target\n}\n\nexport interface ClickState {\n  lastTime: number\n  count: number\n  id: string // clicked object ID\n}\n\nexport interface InteractionModes {\n  selectionMode: Ref<SelectionMode>\n  viewMode: Ref<ViewMode>\n}\n\nexport function getPointerMoveDetectionThreshold(type: string): number {\n  return type === \"touch\" ? TOUCH_MOVE_DETECTION_THRESHOLD : MOUSE_MOVE_DETECTION_THRESHOLD\n}\n\nexport function detectClicks(\n  clickStates: Map<number, ClickState>,\n  pointerId: number,\n  id: string,\n  event: MouseEvent,\n): [MouseEvent, MouseEvent | undefined] {\n  // search click states\n  let clickState = clickStates.get(pointerId)\n  if (clickState) {\n    if (clickState.id !== id) {\n      // click an other object\n      clickState = undefined\n    }\n  } else {\n    const idAndState = Array.from(clickStates.entries()).find(([_, state]) => state.id === id)\n    if (idAndState) {\n      const [oldPointerId, state] = idAndState\n      clickStates.delete(oldPointerId)\n      clickState = state\n    }\n  }\n\n  let clickEvent: MouseEvent, doubleClickEvent: MouseEvent | undefined\n  [clickState, clickEvent, doubleClickEvent] = createClickEvents(clickState, event, id)\n\n  // update\n  clickStates.set(pointerId, clickState)\n\n  return [ clickEvent, doubleClickEvent ]\n}\n\nexport function createClickEvents(\n  clickState: ClickState | undefined,\n  event: MouseEvent,\n  id: string\n): [ClickState, MouseEvent, MouseEvent | undefined] {\n  const now = Date.now()\n  if (clickState && now - clickState.lastTime <= DOUBLE_CLICK_THRESHOLD) {\n    // continuous clicked\n    clickState.count++\n    clickState.lastTime = now\n  } else {\n    // single clicked\n    clickState = { count: 1, lastTime: now, id }\n  }\n\n  const initDict = {\n    view: window,\n    screenX: event.screenX,\n    screenY: event.screenY,\n    clientX: event.clientX,\n    clientY: event.clientY,\n    ctrlKey: event.ctrlKey,\n    shiftKey: event.shiftKey,\n    altKey: event.altKey,\n    metaKey: event.metaKey,\n    button: event.button,\n    buttons: event.buttons,\n    detail: clickState.count,\n  }\n\n  let clickEvent: MouseEvent\n  let doubleClickEvent: MouseEvent | undefined = undefined\n  if (event instanceof PointerEvent) {\n    Object.assign(initDict, {\n      pointerId: event.pointerId,\n      width: event.width,\n      height: event.height,\n      pressure: event.pressure,\n      tangentialPressure: event.tangentialPressure,\n      tiltX: event.tiltX,\n      tiltY: event.tiltY,\n      twist: event.twist,\n      pointerType: event.pointerType,\n      isPrimary: event.isPrimary,\n    })\n    clickEvent = new PointerEvent(\"click\", initDict)\n    if (clickState.count === 2) {\n      doubleClickEvent = new PointerEvent(\"dblclick\", initDict)\n    }\n  } else {\n    clickEvent = new MouseEvent(\"click\", initDict)\n    if (clickState.count === 2) {\n      doubleClickEvent = new MouseEvent(\"dblclick\", initDict)\n    }\n  }\n\n  return [clickState, clickEvent, doubleClickEvent]\n}\n\nexport function cleanClickState(states: Map<number, ClickState>) {\n  const now = Date.now()\n  Array.from(states.entries())\n    .filter(([_, state]) => now - state.lastTime > DOUBLE_CLICK_THRESHOLD)\n    .map(([pointerId, _]) => states.delete(pointerId))\n}\n","import { watch } from \"vue\"\nimport { Emitter } from \"mitt\"\nimport { Reactive, ReadonlyRef } from \"@/common/common\"\nimport { Events, NodePositions, Position } from \"@/common/types\"\nimport { NodeStates } from \"@/models/node\"\nimport { entriesOf } from \"@/utils/object\"\nimport { MapUtil } from \"@/utils/map\"\nimport {\n  cleanClickState,\n  ClickState,\n  detectClicks,\n  getPointerMoveDetectionThreshold,\n  InteractionModes,\n  NodePointerState,\n} from \"./core\"\n\ntype PointerPosition = Pick<PointerEvent, \"pageX\" | \"pageY\" | \"pointerId\">\n\ninterface NodeInteractionState {\n  pointers: Map<number, NodePointerState> // <PointerId, ...>\n  follow: {\n    followedPointerId: number\n    nodeBasePositions: { [name: string]: Position }\n  }\n  hoveredNodesPre: Set<string> // to keep the hover state while dragging\n  clicks: Map<number, ClickState> // <PointerId, ...>\n}\n\nexport function makeNodeInteractionHandlers(\n  nodeStates: NodeStates,\n  nodePositions: Readonly<NodePositions>,\n  modes: InteractionModes,\n  hoveredNodes: Reactive<Set<string>>,\n  selectedNodes: Reactive<Set<string>>,\n  zoomLevel: ReadonlyRef<number>,\n  emitter: Emitter<Events>\n) {\n  const state: NodeInteractionState = {\n    pointers: new Map(),\n    follow: {\n      followedPointerId: -1,\n      nodeBasePositions: {},\n    },\n    hoveredNodesPre: new Set(),\n    clicks: new Map(),\n  }\n\n  const nodePointerHandlers = {\n    pointermove: handleNodePointerMoveEvent,\n    pointerup: handleNodePointerUpEvent,\n    pointercancel: handleNodePointerCancelEvent,\n  }\n\n  function _updateFollowNodes(pointerState: NodePointerState) {\n    const isFollowed = state.follow.followedPointerId === pointerState.pointerId\n    const isSelectedNode = selectedNodes.has(pointerState.nodeId)\n\n    const removed = !(pointerState.pointerId in state.pointers)\n    if ((isFollowed && removed) || (isFollowed && !isSelectedNode)) {\n      // selected => unselected\n      const candidate = MapUtil.valueOf(state.pointers).find(p => selectedNodes.has(p.nodeId))\n      if (!candidate) {\n        state.follow = { followedPointerId: -1, nodeBasePositions: {} }\n        return\n      }\n      pointerState = candidate\n      state.follow.followedPointerId = pointerState.pointerId\n    } else {\n      const followed = state.pointers.get(state.follow.followedPointerId)\n      if (!followed) {\n        state.follow = { followedPointerId: -1, nodeBasePositions: {} }\n        return\n      }\n      pointerState = followed\n    }\n\n    if (isFollowed || isSelectedNode) {\n      // reset state for following:\n      // followed by selected nodes without user grabs\n      const userGrabs = MapUtil.valueOf(state.pointers).map(n => n.nodeId)\n      state.follow.nodeBasePositions = Object.fromEntries(\n        Array.from(selectedNodes)\n          .filter(n => !userGrabs.includes(n))\n          .filter(n => nodeStates[n]?.draggable)\n          .map(n => [n, _unwrapNodePosition(nodePositions, n)])\n      )\n      pointerState.dragBasePosition = { ...pointerState.latestPosition }\n      pointerState.nodeBasePosition = _unwrapNodePosition(nodePositions, pointerState.nodeId)\n    }\n  }\n\n  watch(selectedNodes, selected => {\n    const pointerState = state.pointers.get(state.follow.followedPointerId)\n    if (pointerState) {\n      _updateFollowNodes(pointerState)\n    }\n    if (selected.size > 0 && modes.selectionMode.value !== \"node\") {\n      modes.selectionMode.value = \"node\"\n    } else if (selected.size === 0 && modes.selectionMode.value === \"node\") {\n      modes.selectionMode.value = \"container\"\n    }\n  })\n\n  watch(modes.selectionMode, mode => {\n    if (mode !== \"node\") {\n      selectedNodes.clear()\n    }\n  })\n\n  function _calculateNodeNewPosition(pointerState: NodePointerState, event: PointerPosition) {\n    const dx = pointerState.dragBasePosition.x - event.pageX\n    const dy = pointerState.dragBasePosition.y - event.pageY\n    const positions =\n      state.follow.followedPointerId == pointerState.pointerId\n        ? {\n            [pointerState.nodeId]: pointerState.nodeBasePosition,\n            ...state.follow.nodeBasePositions,\n          }\n        : { [pointerState.nodeId]: pointerState.nodeBasePosition }\n    const z = zoomLevel.value\n\n    return Object.fromEntries(\n      Object.entries(positions).map(([node, pos]) => [\n        node,\n        {\n          x: pos.x - dx / z,\n          y: pos.y - dy / z,\n        },\n      ])\n    )\n  }\n\n  function handleNodeClickEvent(node: string, event: MouseEvent) {\n    if (event.isTrusted) return // native event\n    // When a finger is placed on any object and another object is tapped,\n    // no click event is fired. Thus, click events are emulated by using\n    // pointerdown/up. The following is processing for emulated events only.\n\n    if (event.shiftKey && ![\"container\", \"node\"].includes(modes.selectionMode.value)) {\n      return\n    }\n    modes.selectionMode.value = \"node\"\n\n    const selectable = nodeStates[node]?.selectable ?? false\n    if (selectable) {\n      const isTouchAnySelectedNode =\n        MapUtil.valueOf(state.pointers).filter(p => selectedNodes.has(p.nodeId)).length > 0\n      if (event.shiftKey || isTouchAnySelectedNode) {\n        // select multiple nodes\n        if (selectedNodes.has(node)) {\n          selectedNodes.delete(node)\n        } else if (!(typeof selectable === \"number\" && selectedNodes.size >= selectable)) {\n          selectedNodes.add(node)\n        }\n      } else if (!selectedNodes.has(node)) {\n        // make the selectedNodes the clicked one\n        selectedNodes.clear()\n        selectedNodes.add(node)\n      }\n    }\n    emitter.emit(\"node:click\", { node, event })\n  }\n\n  function handleNodeDoubleClickEvent(node: string, event: MouseEvent) {\n    if (event.isTrusted) return // native event\n    emitter.emit(\"node:dblclick\", { node, event })\n  }\n\n  function handleNodePointerMoveEvent(event: PointerEvent) {\n    event.stopPropagation()\n\n    const pointerState = state.pointers.get(event.pointerId)\n    if (!pointerState) {\n      return\n    }\n    pointerState.latestPosition = { x: event.pageX, y: event.pageY }\n    pointerState.moveCounter++\n\n    const threshold = getPointerMoveDetectionThreshold(event.pointerType)\n    if (pointerState.moveCounter <= threshold) {\n      return // pending for click and drag distinguish\n    }\n\n    if (!nodeStates[pointerState.nodeId]?.draggable) {\n      return\n    }\n\n    if (pointerState.moveCounter === threshold + 1) {\n      const draggingNodes = _calculateNodeNewPosition(pointerState, {\n        pointerId: pointerState.pointerId,\n        pageX: pointerState.dragBasePosition.x,\n        pageY: pointerState.dragBasePosition.y,\n      })\n      emitter.emit(\"node:dragstart\", draggingNodes)\n    }\n    const draggingNodes = _calculateNodeNewPosition(pointerState, event)\n    emitter.emit(\"node:pointermove\", draggingNodes)\n  }\n\n  function handleNodePointerCancelEvent(event: PointerEvent) {\n    event.stopPropagation()\n\n    let pointerState = state.pointers.get(event.pointerId)\n    if (!pointerState) {\n      return\n    }\n\n    for (pointerState of state.pointers.values()) {\n      const node = pointerState.nodeId\n\n      const threshold = getPointerMoveDetectionThreshold(event.pointerType)\n      const isMoved = pointerState.moveCounter > threshold\n      if (isMoved) {\n        // pageX/Y in cancel event are zero => use latest position\n        const draggingNodes = _calculateNodeNewPosition(pointerState, {\n          pointerId: pointerState.pointerId,\n          pageX: pointerState.latestPosition.x,\n          pageY: pointerState.latestPosition.y,\n        })\n        emitter.emit(\"node:dragend\", draggingNodes)\n      }\n      emitter.emit(\"node:pointerup\", { node, event })\n    }\n\n    // reset state\n    state.pointers.clear()\n    state.follow = { followedPointerId: -1, nodeBasePositions: {} }\n    entriesOf(nodePointerHandlers).forEach(([ev, handler]) => {\n      document.removeEventListener(ev, handler)\n    })\n    modes.viewMode.value = \"default\"\n  }\n\n  function handleNodePointerUpEvent(event: PointerEvent) {\n    event.stopPropagation()\n\n    const pointerState = state.pointers.get(event.pointerId)\n    if (!pointerState) {\n      return\n    }\n\n    state.pointers.delete(event.pointerId)\n\n    const node = pointerState.nodeId\n\n    const threshold = getPointerMoveDetectionThreshold(event.pointerType)\n    const isMoved = pointerState.moveCounter > threshold\n    if (isMoved) {\n      if (nodeStates[pointerState.nodeId]?.draggable) {\n        const draggingNodes = _calculateNodeNewPosition(pointerState, event)\n        emitter.emit(\"node:dragend\", draggingNodes)\n        emitter.emit(\"node:pointerup\", { node, event })\n      }\n    } else {\n      emitter.emit(\"node:pointerup\", { node, event })\n    }\n\n    if (!isMoved /* Don't fire the click event if the node is being dragged */) {\n      // click handling\n      const [clickEvent, doubleClickEvent] = detectClicks(\n        state.clicks,\n        pointerState.pointerId,\n        node,\n        event\n      )\n      pointerState.eventTarget?.dispatchEvent(clickEvent)\n      if (doubleClickEvent) {\n        pointerState.eventTarget?.dispatchEvent(doubleClickEvent)\n      }\n    }\n\n    if (state.pointers.size === 0) {\n      // re-initialize state\n      state.follow = { followedPointerId: -1, nodeBasePositions: {} }\n      entriesOf(nodePointerHandlers).forEach(([ev, handler]) => {\n        document.removeEventListener(ev, handler)\n      })\n      cleanClickState(state.clicks)\n      modes.viewMode.value = \"default\"\n    } else {\n      _updateFollowNodes(pointerState)\n    }\n\n    // reflect changes while dragging.\n    hoveredNodes.clear()\n    state.hoveredNodesPre.forEach(hoveredNodes.add, hoveredNodes)\n  }\n\n  function handleNodePointerDownEvent(node: string, event: PointerEvent) {\n    if (event.button == 2 /* right button */) {\n      return\n    }\n    event.stopPropagation()\n\n    if (![\"default\", \"node\"].includes(modes.viewMode.value)) {\n      return\n    }\n\n    if (state.pointers.size == 0) {\n      // Add event listeners\n      modes.viewMode.value = \"node\"\n      entriesOf(nodePointerHandlers).forEach(([ev, handler]) => {\n        document.addEventListener(ev, handler)\n      })\n    }\n\n    // Create new pointer state\n    const pointerState: NodePointerState = {\n      pointerId: event.pointerId,\n      nodeId: node,\n      moveCounter: 0,\n      nodeBasePosition: _unwrapNodePosition(nodePositions, node),\n      dragBasePosition: { x: event.pageX, y: event.pageY },\n      latestPosition: { x: event.pageX, y: event.pageY },\n      eventTarget: event.currentTarget,\n    }\n    state.pointers.set(event.pointerId, pointerState)\n\n    if (selectedNodes.has(node)) {\n      if (state.follow.followedPointerId < 0) {\n        // pointer followed by selected nodes\n        state.follow.followedPointerId = event.pointerId\n        _updateFollowNodes(pointerState)\n      } else {\n        // current pointer is in charge of this node.\n        // do not follow another node anymore.\n        delete state.follow.nodeBasePositions[pointerState.nodeId]\n      }\n    }\n\n    emitter.emit(\"node:pointerdown\", { node, event })\n  }\n\n  function handleNodePointerOverEvent(node: string, event: PointerEvent) {\n    state.hoveredNodesPre.add(node)\n    if (state.pointers.size > 0) {\n      return // dragging\n    }\n    hoveredNodes.add(node)\n    emitter.emit(\"node:pointerover\", { node, event })\n  }\n\n  function handleNodePointerOutEvent(node: string, event: PointerEvent) {\n    state.hoveredNodesPre.delete(node)\n    if (state.pointers.size > 0) {\n      return // dragging\n    }\n    hoveredNodes.delete(node)\n    emitter.emit(\"node:pointerout\", { node, event })\n  }\n\n  function handleNodeContextMenu(node: string, event: MouseEvent) {\n    event.stopPropagation()\n    emitter.emit(\"node:contextmenu\", { node, event })\n  }\n\n  return {\n    handleNodePointerDownEvent,\n    handleNodePointerOverEvent,\n    handleNodePointerOutEvent,\n    handleNodeClickEvent,\n    handleNodeDoubleClickEvent,\n    handleNodeContextMenu,\n  }\n}\n\nfunction _unwrapNodePosition(nodes: Readonly<NodePositions>, node: string) {\n  const pos = nodes[node] ?? { x: 0, y: 0 }\n  return { ...pos } // unwrap reactivity\n}\n","import { watch } from \"vue\"\nimport { Emitter } from \"mitt\"\nimport { Reactive } from \"@/common/common\"\nimport { Events, EdgeEvent } from \"@/common/types\"\nimport { EdgeStates } from \"@/models/edge\"\nimport { entriesOf } from \"@/utils/object\"\nimport { MapUtil } from \"@/utils/map\"\nimport {\n  cleanClickState,\n  ClickState,\n  createClickEvents,\n  detectClicks,\n  EdgePointerState,\n  InteractionModes,\n} from \"./core\"\n\nexport function makeEdgeInteractionHandlers(\n  edgeStates: EdgeStates,\n  modes: InteractionModes,\n  hoveredEdges: Reactive<Set<string>>,\n  selectedEdges: Reactive<Set<string>>,\n  emitter: Emitter<Events>\n) {\n  const state = {\n    pointers: new Map<number, EdgePointerState>(), // <PointerId, ...>\n    pointerPeekCount: 0,\n    clicks: new Map<number, ClickState>(),\n  }\n\n  const edgePointerHandlers = {\n    pointerup: handleEdgePointerUpEvent,\n    pointercancel: handleEdgePointerCancelEvent,\n  }\n\n  watch(selectedEdges, selected => {\n    if (selected.size > 0 && modes.selectionMode.value !== \"edge\") {\n      modes.selectionMode.value = \"edge\"\n    } else if (selected.size === 0 && modes.selectionMode.value === \"edge\") {\n      modes.selectionMode.value = \"container\"\n    }\n  })\n\n  watch(modes.selectionMode, mode => {\n    if (mode !== \"edge\") {\n      selectedEdges.clear()\n    }\n  })\n\n  function handleEdgePointerDownEvent(edge: string, event: PointerEvent) {\n    if (event.button == 2 /* right button */) {\n      return\n    }\n    event.stopPropagation()\n\n    if (![\"default\", \"edge\"].includes(modes.viewMode.value)) {\n      return\n    }\n\n    if (state.pointers.size == 0) {\n      // Add event listeners\n      modes.viewMode.value = \"edge\"\n      entriesOf(edgePointerHandlers).forEach(([ev, handler]) => {\n        document.addEventListener(ev, handler)\n      })\n      state.pointerPeekCount = 0\n    }\n\n    state.pointerPeekCount++\n\n    // Create new pointer state\n    const pointerState: EdgePointerState = {\n      pointerId: event.pointerId,\n      id: edge,\n      eventTarget: event.currentTarget,\n    }\n    state.pointers.set(event.pointerId, pointerState)\n\n    emitter.emit(\"edge:pointerdown\", _makeEdgeEventObject(edge, event))\n  }\n\n  function handleEdgePointerUpEvent(event: PointerEvent) {\n    event.stopPropagation()\n\n    const pointerState = state.pointers.get(event.pointerId)\n    if (!pointerState) {\n      return\n    }\n\n    state.pointers.delete(event.pointerId)\n\n    const edge = pointerState.id\n    emitter.emit(\"edge:pointerup\", _makeEdgeEventObject(edge, event))\n\n    // click handling\n    const [clickEvent, doubleClickEvent] = detectClicks(\n      state.clicks,\n      pointerState.pointerId,\n      edge instanceof Array ? edge.join(\",\") : edge,\n      event,\n    )\n    pointerState.eventTarget?.dispatchEvent(clickEvent)\n    if (doubleClickEvent) {\n      pointerState.eventTarget?.dispatchEvent(doubleClickEvent)\n    }\n\n    if (state.pointers.size === 0) {\n      // reset state\n      state.pointerPeekCount = 0\n      entriesOf(edgePointerHandlers).forEach(([ev, handler]) => {\n        document.removeEventListener(ev, handler)\n      })\n      cleanClickState(state.clicks)\n      modes.viewMode.value = \"default\"\n    }\n  }\n\n  function handleEdgePointerCancelEvent(event: PointerEvent) {\n    event.stopPropagation()\n\n    const pointerState = state.pointers.get(event.pointerId)\n    if (!pointerState) {\n      return\n    }\n\n    for (const pointerState of state.pointers.values()) {\n      const edge = pointerState.id\n      emitter.emit(\"edge:pointerup\", _makeEdgeEventObject(edge, event))\n    }\n\n    // reset state\n    state.pointers.clear()\n    state.pointerPeekCount = 0\n    entriesOf(edgePointerHandlers).forEach(([ev, handler]) => {\n      document.removeEventListener(ev, handler)\n    })\n    emitter.emit(\"view:mode\", \"default\")\n  }\n\n  function handleEdgeClickEvent(edge: string | string[], event: MouseEvent) {\n    if (event.isTrusted) return // native event\n    // When a finger is placed on any object and another object is tapped,\n    // no click event is fired. Thus, click events are emulated by using\n    // pointerdown/up. The following is processing for emulated events only.\n\n    if (event.shiftKey && ![\"container\", \"edge\"].includes(modes.selectionMode.value)) {\n      return\n    }\n    modes.selectionMode.value = \"edge\"\n\n    const edges = edge instanceof Array ? edge : [edge]\n\n    const isTouchAnySelectedEdge =\n      MapUtil.valueOf(state.pointers).filter(p => {\n        const edges = p.id instanceof Array ? p.id : [p.id]\n        return edges.every(edge => selectedEdges.has(edge))\n      }).length > 0\n\n    if (edge instanceof Array) {\n      // select only selectable edge\n      const selectableEdges = edges.find(edge => edgeStates[edge]?.selectable)\n      if (selectableEdges) {\n        if (event.shiftKey || isTouchAnySelectedEdge) {\n          if (edges.some(edge => selectedEdges.has(edge))) {\n            edges.forEach(edge => selectedEdges.delete(edge))\n          } else {\n            edges.forEach(edge => {\n              const selectable = edgeStates[edge]?.selectable\n              if (!(typeof selectable === \"number\" && selectedEdges.size >= selectable)) {\n                selectedEdges.add(edge)\n              }\n            })\n          }\n        } else {\n          // make the selectedEdges the clicked summarized one\n          selectedEdges.clear()\n          edges.forEach(edge => selectedEdges.add(edge))\n        }\n      }\n    } else {\n      const selectable = edgeStates[edge]?.selectable\n      if (selectable) {\n        if (event.shiftKey || isTouchAnySelectedEdge) {\n          if (selectedEdges.has(edge)) {\n            selectedEdges.delete(edge)\n          } else if (!(typeof selectable === \"number\" && selectedEdges.size >= selectable)) {\n            selectedEdges.add(edge)\n          }\n        } else if (!selectedEdges.has(edge)) {\n          // make the selectedEdges the clicked one\n          selectedEdges.clear()\n          selectedEdges.add(edge)\n        }\n      }\n    }\n    emitter.emit(\"edge:click\", _makeEdgeEventObject(edge, event))\n  }\n\n  function handleEdgeDoubleClickEvent(edge: string | string[], event: MouseEvent) {\n    if (event.isTrusted) return // native event\n    emitter.emit(\"edge:dblclick\", _makeEdgeEventObject(edge, event))\n  }\n\n  function handleEdgePointerOverEvent(edge: string, event: PointerEvent) {\n    hoveredEdges.add(edge)\n    emitter.emit(\"edge:pointerover\", _makeEdgeEventObject(edge, event))\n  }\n\n  function handleEdgePointerOutEvent(edge: string, event: PointerEvent) {\n    hoveredEdges.delete(edge)\n    emitter.emit(\"edge:pointerout\", _makeEdgeEventObject(edge, event))\n  }\n\n  function handleEdgeContextMenu(edge: string, event: MouseEvent) {\n    event.stopPropagation()\n    emitter.emit(\"edge:contextmenu\", _makeEdgeEventObject(edge, event))\n  }\n\n  function handleEdgesPointerDownEvent(edges: string[], event: PointerEvent) {\n    if (event.button == 2 /* right button */) {\n      return\n    }\n    event.stopPropagation()\n\n    if (![\"default\", \"edge\"].includes(modes.viewMode.value)) {\n      return\n    }\n\n    if (state.pointers.size == 0) {\n      // Add event listeners\n      modes.viewMode.value = \"edge\"\n      entriesOf(edgePointerHandlers).forEach(([ev, handler]) => {\n        document.addEventListener(ev, handler)\n      })\n      state.pointerPeekCount = 0\n    }\n\n    state.pointerPeekCount++\n\n    // Create new pointer state\n    const pointerState: EdgePointerState = {\n      pointerId: event.pointerId,\n      id: edges,\n      eventTarget: event.currentTarget,\n    }\n    state.pointers.set(event.pointerId, pointerState)\n    emitter.emit(\"edge:pointerdown\", _makeEdgeEventObject(edges, event))\n  }\n\n  function handleEdgesPointerOverEvent(edges: string[], event: PointerEvent) {\n    edges.forEach(edge => hoveredEdges.add(edge))\n    emitter.emit(\"edge:pointerover\", _makeEdgeEventObject(edges, event))\n  }\n\n  function handleEdgesPointerOutEvent(edges: string[], event: PointerEvent) {\n    edges.forEach(edge => hoveredEdges.delete(edge))\n    emitter.emit(\"edge:pointerout\", _makeEdgeEventObject(edges, event))\n  }\n\n  function handleEdgesClickEvent(edges: string[], event: MouseEvent) {\n    handleEdgeClickEvent(edges, event)\n  }\n\n  function handleEdgesDoubleClickEvent(edges: string[], event: MouseEvent) {\n    handleEdgeDoubleClickEvent(edges, event)\n  }\n\n  function handleEdgesContextMenu(edges: string[], event: MouseEvent) {\n    event.stopPropagation()\n    emitter.emit(\"edge:contextmenu\", _makeEdgeEventObject(edges, event))\n  }\n\n  return {\n    handleEdgePointerDownEvent,\n    handleEdgePointerOverEvent,\n    handleEdgePointerOutEvent,\n    handleEdgeClickEvent,\n    handleEdgeDoubleClickEvent,\n    handleEdgeContextMenu,\n    handleEdgesPointerDownEvent,\n    handleEdgesPointerOverEvent,\n    handleEdgesPointerOutEvent,\n    handleEdgesClickEvent,\n    handleEdgesDoubleClickEvent,\n    handleEdgesContextMenu,\n  }\n}\n\nfunction _makeEdgeEventObject<T extends Event>(edge: string | string[], event: T): EdgeEvent<T> {\n  if (edge instanceof Array) {\n    return {\n      edges: edge,\n      event,\n      summarized: true,\n    }\n  } else {\n    return {\n      edge,\n      edges: [edge],\n      event,\n      summarized: false,\n    }\n  }\n}\n","import { onMounted, onUnmounted, Ref, watch } from \"vue\"\nimport { Emitter } from \"mitt\"\nimport { Events } from \"@/common/types\"\nimport { entriesOf } from \"@/utils/object\"\nimport {\n  ClickState,\n  createClickEvents,\n  getPointerMoveDetectionThreshold,\n  InteractionModes,\n} from \"./core\"\n\nexport function setupContainerInteractionHandlers(\n  container: Ref<SVGElement | undefined>,\n  modes: InteractionModes,\n  isSvgWheelZoomEnabled: Ref<boolean>,\n  emitter: Emitter<Events>\n) {\n  const state = {\n    moveCounter: 0,\n    pointerCounter: 0,\n    clickState: undefined as ClickState | undefined,\n  }\n\n  // measure the number of move events in the pointerdown state\n  // and use it to determine the click when pointerup.\n  const containerPointerHandlers = {\n    pointermove: handleContainerPointerMoveEvent,\n    pointerup: handleContainerPointerUpEvent,\n    pointercancel: handleContainerPointerUpEvent,\n  }\n\n  function handleContainerPointerDownEvent(_: PointerEvent) {\n    state.moveCounter = 0\n    if (state.pointerCounter === 0) {\n      // Add to event listener\n      entriesOf(containerPointerHandlers).forEach(([ev, handler]) => {\n        document.addEventListener(ev, handler, { passive: true })\n      })\n    }\n    state.pointerCounter++\n  }\n\n  function handleContainerPointerMoveEvent(_: PointerEvent) {\n    state.moveCounter++\n  }\n\n  function handleContainerPointerUpEvent(event: PointerEvent) {\n    state.pointerCounter--\n    if (state.pointerCounter <= 0) {\n      state.pointerCounter = 0\n      // Remove from event listener\n      entriesOf(containerPointerHandlers).forEach(([ev, handler]) => {\n        document.removeEventListener(ev, handler)\n      })\n      const threshold = getPointerMoveDetectionThreshold(event.pointerType)\n      if (state.moveCounter <= threshold) {\n        // Click container (without mouse move)\n        if (event.shiftKey && modes.selectionMode.value !== \"container\") {\n          return\n        }\n        modes.selectionMode.value = \"container\"\n\n        // click handling\n        const [clickState, clickEvent, doubleClickEvent] = createClickEvents(\n          state.clickState,\n          event,\n          \"view\"\n        )\n        state.clickState = clickState\n        container.value!.dispatchEvent(clickEvent)\n        if (doubleClickEvent) {\n          container.value!.dispatchEvent(doubleClickEvent)\n        }\n      }\n    }\n  }\n\n  function handleContainerClickEvent(event: MouseEvent) {\n    if (event.isTrusted) return // native event\n    // When a finger is placed on any object and another object is tapped,\n    // no click event is fired. Thus, click events are emulated by using\n    // pointerdown/up. The following is processing for emulated events only.\n    event.stopPropagation()\n    emitter.emit(\"view:click\", { event })\n  }\n\n  function handleContainerDoubleClickEvent(event: MouseEvent) {\n    if (event.isTrusted) return // native event\n    event.stopPropagation()\n    emitter.emit(\"view:dblclick\", { event })\n  }\n\n  function handleContainerContextMenuEvent(event: MouseEvent) {\n    emitter.emit(\"view:contextmenu\", { event })\n\n    if (state.pointerCounter > 0) {\n      // reset pointer down state\n      state.pointerCounter = 0\n      // Remove from event listener\n      entriesOf(containerPointerHandlers).forEach(([ev, handler]) => {\n        container.value?.removeEventListener(ev, handler)\n      })\n    }\n  }\n\n  const preventDefault = (e: MouseEvent) => {\n    e.preventDefault()\n  }\n\n  onMounted(() => {\n    const c = container.value\n    if (!c) return\n    c.addEventListener(\"pointerdown\", handleContainerPointerDownEvent, { passive: true })\n    c.addEventListener(\"click\", handleContainerClickEvent, { passive: false })\n    c.addEventListener(\"dblclick\", handleContainerDoubleClickEvent, { passive: false })\n    c.addEventListener(\"contextmenu\", handleContainerContextMenuEvent, { passive: false })\n    if (isSvgWheelZoomEnabled.value) {\n      c.addEventListener(\"wheel\", preventDefault, { passive: false })\n    }\n  })\n\n  onUnmounted(() => {\n    const c = container.value\n    if (!c) return\n    c.removeEventListener(\"pointerdown\", handleContainerPointerDownEvent)\n    c.removeEventListener(\"click\", handleContainerClickEvent)\n    c.removeEventListener(\"dblclick\", handleContainerDoubleClickEvent)\n    c.removeEventListener(\"contextmenu\", handleContainerContextMenuEvent)\n    if (isSvgWheelZoomEnabled.value) {\n      c.removeEventListener(\"wheel\", preventDefault)\n    }\n  })\n\n  watch(isSvgWheelZoomEnabled, (enabled, old) => {\n    const c = container.value\n    if (!c || enabled === old) return\n\n    if (enabled) {\n      c.addEventListener(\"wheel\", preventDefault, { passive: false })\n    } else {\n      c.removeEventListener(\"wheel\", preventDefault)\n    }\n  })\n}\n","import { Ref, watch } from \"vue\"\nimport { Reactive } from \"@/common/common\"\nimport { Events, PathEvent } from \"@/common/types\"\nimport { PathStates } from \"@/models/path\"\nimport {\n  cleanClickState,\n  ClickState,\n  detectClicks,\n  InteractionModes,\n  PathPointerState,\n} from \"./core\"\nimport { entriesOf } from \"@/utils/object\"\nimport { MapUtil } from \"@/utils/map\"\nimport { Emitter } from \"mitt\"\n\nexport function makePathInteractionHandlers(\n  pathStates: PathStates,\n  modes: InteractionModes,\n  hoveredPaths: Reactive<Set<string>>,\n  selectedPaths: Reactive<Set<string>>,\n  isInCompatibilityModeForPath: Ref<boolean>,\n  emitter: Emitter<Events>\n) {\n  const state = {\n    pointers: new Map<number, PathPointerState>(), // <PointerId, ...>\n    pointerPeekCount: 0,\n    clicks: new Map<number, ClickState>(),\n  }\n\n  function _makePathEventObject<T extends Event>(path: string, event: T): PathEvent<T> {\n    if (isInCompatibilityModeForPath.value) {\n      return { path: (pathStates[path]?.path ?? path) as any, event }\n    } else {\n      return { path, event }\n    }\n  }\n\n  const pathPointerHandlers = {\n    pointerup: handlePathPointerUpEvent,\n    pointercancel: handlePathPointerCancelEvent,\n  }\n\n  watch(selectedPaths, selected => {\n    if (selected.size > 0 && modes.selectionMode.value !== \"path\") {\n      modes.selectionMode.value = \"path\"\n    } else if (selected.size === 0 && modes.selectionMode.value === \"path\") {\n      modes.selectionMode.value = \"container\"\n    }\n  })\n\n  watch(modes.selectionMode, mode => {\n    if (mode !== \"path\") {\n      selectedPaths.clear()\n    }\n  })\n\n  function handlePathPointerDownEvent(path: string, event: PointerEvent) {\n    if (!pathStates[path]?.clickable) {\n      return\n    }\n\n    if (event.button == 2 /* right button */) {\n      return\n    }\n    event.stopPropagation()\n\n    if (![\"default\", \"path\"].includes(modes.viewMode.value)) {\n      return\n    }\n\n    if (state.pointers.size == 0) {\n      // Add event listeners\n      modes.viewMode.value = \"path\"\n      entriesOf(pathPointerHandlers).forEach(([ev, handler]) => {\n        document.addEventListener(ev, handler)\n      })\n      state.pointerPeekCount = 0\n    }\n\n    state.pointerPeekCount++\n\n    // Create new pointer state\n    const pointerState: PathPointerState = {\n      pointerId: event.pointerId,\n      id: path,\n      eventTarget: event.currentTarget,\n    }\n    state.pointers.set(event.pointerId, pointerState)\n\n    emitter.emit(\"path:pointerdown\", _makePathEventObject(path, event))\n  }\n\n  function handlePathPointerUpEvent(event: PointerEvent) {\n    const pointerState = state.pointers.get(event.pointerId)\n    if (!pointerState) {\n      return\n    }\n\n    event.stopPropagation()\n\n    state.pointers.delete(event.pointerId)\n\n    const path = pointerState.id\n    emitter.emit(\"path:pointerup\", _makePathEventObject(path, event))\n\n    // click handling\n    const [clickEvent, doubleClickEvent] = detectClicks(\n      state.clicks,\n      pointerState.pointerId,\n      path,\n      event\n    )\n    pointerState.eventTarget?.dispatchEvent(clickEvent)\n    if (doubleClickEvent) {\n      pointerState.eventTarget?.dispatchEvent(doubleClickEvent)\n    }\n\n    if (state.pointers.size === 0) {\n      // reset state\n      state.pointerPeekCount = 0\n      entriesOf(pathPointerHandlers).forEach(([ev, handler]) => {\n        document.removeEventListener(ev, handler)\n      })\n      cleanClickState(state.clicks)\n      modes.viewMode.value = \"default\"\n    }\n  }\n\n  function handlePathPointerCancelEvent(event: PointerEvent) {\n    const pointerState = state.pointers.get(event.pointerId)\n    if (!pointerState) {\n      return\n    }\n\n    event.stopPropagation()\n\n    for (const pointerState of state.pointers.values()) {\n      const path = pointerState.id\n      emitter.emit(\"path:pointerup\", _makePathEventObject(path, event))\n    }\n\n    // reset state\n    state.pointers.clear()\n    state.pointerPeekCount = 0\n    entriesOf(pathPointerHandlers).forEach(([ev, handler]) => {\n      document.removeEventListener(ev, handler)\n    })\n    emitter.emit(\"view:mode\", \"default\")\n  }\n\n  function handlePathPointerOverEvent(path: string, event: PointerEvent) {\n    if (!pathStates[path]?.hoverable) {\n      return\n    }\n    hoveredPaths.add(path)\n    emitter.emit(\"path:pointerover\", _makePathEventObject(path, event))\n  }\n\n  function handlePathPointerOutEvent(path: string, event: PointerEvent) {\n    if (!pathStates[path]?.hoverable) {\n      return\n    }\n    hoveredPaths.delete(path)\n    emitter.emit(\"path:pointerout\", _makePathEventObject(path, event))\n  }\n\n  function handlePathClickEvent(path: string, event: MouseEvent) {\n    if (event.isTrusted) return // native event\n    // When a finger is placed on any object and another object is tapped,\n    // no click event is fired. Thus, click events are emulated by using\n    // pointerdown/up. The following is processing for emulated events only.\n\n    if (!pathStates[path]?.clickable) {\n      return\n    }\n\n    if (event.shiftKey && ![\"container\", \"path\"].includes(modes.selectionMode.value)) {\n      return\n    }\n    modes.selectionMode.value = \"path\"\n\n    const selectable = pathStates[path]?.selectable ?? false\n    if (selectable) {\n      const isTouchAnySelectedPath =\n        MapUtil.valueOf(state.pointers).filter(p => selectedPaths.has(p.id)).length > 0\n      if (event.shiftKey || isTouchAnySelectedPath) {\n        // select multiple nodes\n        if (selectedPaths.has(path)) {\n          selectedPaths.delete(path)\n        } else if (!(typeof selectable === \"number\" && selectedPaths.size >= selectable)) {\n          selectedPaths.add(path)\n        }\n      } else if (!selectedPaths.has(path)) {\n        // make the selectedPaths the clicked one\n        selectedPaths.clear()\n        selectedPaths.add(path)\n      }\n    }\n    emitter.emit(\"path:click\", _makePathEventObject(path, event))\n  }\n\n  function handlePathDoubleClickEvent(path: string, event: MouseEvent) {\n    if (event.isTrusted) return // native event\n    if (!pathStates[path]?.clickable) {\n      return\n    }\n    emitter.emit(\"path:dblclick\", _makePathEventObject(path, event))\n  }\n\n  function handlePathContextMenu(path: string, event: MouseEvent) {\n    if (!pathStates[path]?.clickable) {\n      return\n    }\n    event.stopPropagation()\n    emitter.emit(\"path:contextmenu\", _makePathEventObject(path, event))\n  }\n\n  return {\n    handlePathPointerDownEvent,\n    handlePathPointerOverEvent,\n    handlePathPointerOutEvent,\n    handlePathClickEvent,\n    handlePathDoubleClickEvent,\n    handlePathContextMenu,\n  }\n}\n","// Module responsible for selection state and mouse/touch operations\n\nimport { inject, InjectionKey, provide, ref, Ref, watch } from \"vue\"\nimport { Emitter } from \"mitt\"\nimport { nonNull, Reactive, ReadonlyRef } from \"@/common/common\"\nimport { Events, NodePositions } from \"@/common/types\"\nimport { NodeStates } from \"@/models/node\"\nimport { EdgeStates } from \"@/models/edge\"\nimport { InteractionModes } from \"./core\"\nimport { makeNodeInteractionHandlers } from \"./node\"\nimport { makeEdgeInteractionHandlers } from \"./edge\"\nimport { setupContainerInteractionHandlers } from \"./container\"\nimport { PathStates } from \"@/models/path\"\nimport { makePathInteractionHandlers } from \"./path\"\n\ntype NodeEventHandler<T extends Event = PointerEvent> = (node: string, event: T) => void\ntype EdgeEventHandler<T extends Event = PointerEvent> = (edge: string, event: T) => void\ntype EdgesEventHandler<T extends Event = PointerEvent> = (edges: string[], event: T) => void\ntype PathEventHandler<T extends Event = PointerEvent> = (path: string, event: T) => void\n\ninterface MouseEventHandlers {\n  selectedNodes: Reactive<Set<string>>\n  hoveredNodes: Reactive<Set<string>>\n  selectedEdges: Reactive<Set<string>>\n  hoveredEdges: Reactive<Set<string>>\n  selectedPaths: Reactive<Set<string>>\n  hoveredPaths: Reactive<Set<string>>\n\n  // for Nodes\n  handleNodePointerDownEvent: NodeEventHandler\n  handleNodePointerOverEvent: NodeEventHandler\n  handleNodePointerOutEvent: NodeEventHandler\n  handleNodeClickEvent: NodeEventHandler<MouseEvent>\n  handleNodeDoubleClickEvent: NodeEventHandler<MouseEvent>\n  handleNodeContextMenu: NodeEventHandler<MouseEvent>\n\n  // for Edges\n  handleEdgePointerDownEvent: EdgeEventHandler\n  handleEdgePointerOverEvent: EdgeEventHandler\n  handleEdgePointerOutEvent: EdgeEventHandler\n  handleEdgeClickEvent: EdgeEventHandler<MouseEvent>\n  handleEdgeDoubleClickEvent: EdgeEventHandler<MouseEvent>\n  handleEdgeContextMenu: EdgeEventHandler<MouseEvent>\n  handleEdgesPointerDownEvent: EdgesEventHandler\n  handleEdgesPointerOverEvent: EdgesEventHandler\n  handleEdgesPointerOutEvent: EdgesEventHandler\n  handleEdgesClickEvent: EdgesEventHandler<MouseEvent>\n  handleEdgesDoubleClickEvent: EdgesEventHandler<MouseEvent>\n  handleEdgesContextMenu: EdgesEventHandler<MouseEvent>\n\n  // for Paths\n  handlePathPointerDownEvent: PathEventHandler\n  handlePathPointerOverEvent: PathEventHandler\n  handlePathPointerOutEvent: PathEventHandler\n  handlePathClickEvent: PathEventHandler<MouseEvent>\n  handlePathDoubleClickEvent: PathEventHandler<MouseEvent>\n  handlePathContextMenu: PathEventHandler<MouseEvent>\n}\nconst mouseEventHandlersKey = Symbol(\"mouseEventHandlers\") as InjectionKey<MouseEventHandlers>\n\nexport function provideMouseOperation(\n  container: Ref<SVGElement | undefined>,\n  nodePositions: Readonly<NodePositions>,\n  zoomLevel: ReadonlyRef<number>,\n  nodeStates: NodeStates,\n  edgeStates: EdgeStates,\n  pathStates: PathStates,\n  selectedNodes: Reactive<Set<string>>,\n  selectedEdges: Reactive<Set<string>>,\n  selectedPaths: Reactive<Set<string>>,\n  hoveredNodes: Reactive<Set<string>>,\n  hoveredEdges: Reactive<Set<string>>,\n  hoveredPaths: Reactive<Set<string>>,\n  isInCompatibilityModeForPath: Ref<boolean>,\n  isSvgWheelZoomEnabled: Ref<boolean>,\n  emitter: Emitter<Events>\n): MouseEventHandlers {\n  const modes: InteractionModes = {\n    selectionMode: ref(\"container\"),\n    viewMode: ref(\"default\"),\n  }\n\n  if (selectedNodes.size > 0) {\n    modes.selectionMode.value = \"node\"\n  } else if (selectedEdges.size > 0) {\n    modes.selectionMode.value = \"edge\"\n  } else if (selectedPaths.size > 0) {\n    modes.selectionMode.value = \"path\"\n  }\n\n  watch(modes.viewMode, mode => {\n    emitter.emit(\"view:mode\", mode)\n  })\n\n  setupContainerInteractionHandlers(container, modes, isSvgWheelZoomEnabled, emitter)\n\n  const provides = <MouseEventHandlers>{\n    selectedNodes,\n    hoveredNodes,\n    selectedEdges,\n    hoveredEdges,\n    selectedPaths,\n    hoveredPaths,\n    ...makeNodeInteractionHandlers(\n      nodeStates,\n      nodePositions,\n      modes,\n      hoveredNodes,\n      selectedNodes,\n      zoomLevel,\n      emitter\n    ),\n    ...makeEdgeInteractionHandlers(\n      edgeStates,\n      modes,\n      hoveredEdges,\n      selectedEdges,\n      emitter\n    ),\n    ...makePathInteractionHandlers(\n      pathStates,\n      modes,\n      hoveredPaths,\n      selectedPaths,\n      isInCompatibilityModeForPath,\n      emitter\n    ),\n  }\n  provide(mouseEventHandlersKey, provides)\n  return provides\n}\n\nexport function useMouseOperation(): MouseEventHandlers {\n  return nonNull(inject(mouseEventHandlersKey), \"mouseEventHandlers\")\n}\n","export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import { provide, inject, InjectionKey } from \"vue\"\nimport mitt, { Emitter } from \"mitt\"\nimport { nonNull } from \"@/common/common\"\nimport { Events } from \"@/common/types\"\n\nconst eventEmitterKey = Symbol(\"emitter\") as InjectionKey<Emitter<Events>>\n\nexport function provideEventEmitter(): Emitter<Events> {\n  // event bus\n  const emitter = mitt<Events>()\n  provide(eventEmitterKey, emitter)\n  return emitter\n}\n\nexport function useEventEmitter(): Emitter<Events> {\n  return nonNull(inject(eventEmitterKey), \"event emitter\")\n}\n","module.exports = {\n  /**\n   * Get global this object\n   *\n   * @return {Object}        global this object\n   */\n  getGlobalThis: function () {\n    if (typeof globalThis !== \"undefined\") return globalThis;\n    if (typeof self !== \"undefined\") return self;\n    if (typeof window !== \"undefined\") return window;\n    if (typeof global !== \"undefined\") return global;\n    // Note: this might still return the wrong result!\n    if (typeof this !== \"undefined\") return this;\n    throw new Error(\"Unable to locate global `this`\");\n  },\n\n  /**\n   * Extends an object\n   *\n   * @param  {Object} target object to extend\n   * @param  {Object} source object to take properties from\n   * @return {Object}        extended object\n   */\n  extend: function (target, source) {\n    target = target || {};\n    for (var prop in source) {\n      // Go recursively\n      if (this.isObject(source[prop])) {\n        target[prop] = this.extend(target[prop], source[prop]);\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n    return target;\n  },\n\n  /**\n   * Checks if an object is a DOM element\n   *\n   * @param  {Object}  o HTML element or String\n   * @return {Boolean}   returns true if object is a DOM element\n   */\n  isElement: function (o) {\n    return (\n      o instanceof HTMLElement ||\n      o instanceof SVGElement ||\n      o instanceof SVGSVGElement || //DOM2\n      (o &&\n        typeof o === \"object\" &&\n        o !== null &&\n        o.nodeType === 1 &&\n        typeof o.nodeName === \"string\")\n    );\n  },\n\n  /**\n   * Checks if an object is an Object\n   *\n   * @param  {Object}  o Object\n   * @return {Boolean}   returns true if object is an Object\n   */\n  isObject: function (o) {\n    return Object.prototype.toString.call(o) === \"[object Object]\";\n  },\n\n  /**\n   * Checks if variable is Number\n   *\n   * @param  {Integer|Float}  n\n   * @return {Boolean}   returns true if variable is Number\n   */\n  isNumber: function (n) {\n    return !isNaN(parseFloat(n)) && isFinite(n);\n  },\n\n  /**\n   * Search for an SVG element\n   *\n   * @param  {Object|String} elementOrSelector DOM Element or selector String\n   * @return {Object|Null}                   SVG or null\n   */\n  getSvg: function (elementOrSelector) {\n    var element, svg;\n\n    if (!this.isElement(elementOrSelector)) {\n      // If selector provided\n      if (\n        typeof elementOrSelector === \"string\" ||\n        elementOrSelector instanceof String\n      ) {\n        // Try to find the element\n        element = document.querySelector(elementOrSelector);\n\n        if (!element) {\n          throw new Error(\n            \"Provided selector did not find any elements. Selector: \" +\n              elementOrSelector\n          );\n          return null;\n        }\n      } else {\n        throw new Error(\"Provided selector is not an HTML object nor String\");\n        return null;\n      }\n    } else {\n      element = elementOrSelector;\n    }\n\n    if (element.tagName.toLowerCase() === \"svg\") {\n      svg = element;\n    } else {\n      if (element.tagName.toLowerCase() === \"object\") {\n        svg = element.contentDocument.documentElement;\n      } else {\n        if (element.tagName.toLowerCase() === \"embed\") {\n          svg = element.getSVGDocument().documentElement;\n        } else {\n          if (element.tagName.toLowerCase() === \"img\") {\n            throw new Error(\n              'Cannot script an SVG in an \"img\" element. Please use an \"object\" element or an in-line SVG.'\n            );\n          } else {\n            throw new Error(\"Cannot get SVG.\");\n          }\n          return null;\n        }\n      }\n    }\n\n    return svg;\n  },\n\n  /**\n   * Attach a given context to a function\n   * @param  {Function} fn      Function\n   * @param  {Object}   context Context\n   * @return {Function}           Function with certain context\n   */\n  proxy: function (fn, context) {\n    return function () {\n      return fn.apply(context, arguments);\n    };\n  },\n\n  /**\n   * Returns object type\n   * Uses toString that returns [object SVGPoint]\n   * And than parses object type from string\n   *\n   * @param  {Object} o Any object\n   * @return {String}   Object type\n   */\n  getType: function (o) {\n    return Object.prototype.toString\n      .apply(o)\n      .replace(/^\\[object\\s/, \"\")\n      .replace(/\\]$/, \"\");\n  },\n\n  /**\n   * If it is a touch event than add clientX and clientY to event object\n   *\n   * @param  {Event} evt\n   * @param  {SVGSVGElement} svg\n   */\n  mouseAndTouchNormalize: function (evt, svg) {\n    // If no clientX then fallback\n    if (evt.clientX === void 0 || evt.clientX === null) {\n      // Fallback\n      evt.clientX = 0;\n      evt.clientY = 0;\n\n      // If it is a touch event\n      if (evt.touches !== void 0 && evt.touches.length) {\n        if (evt.touches[0].clientX !== void 0) {\n          evt.clientX = evt.touches[0].clientX;\n          evt.clientY = evt.touches[0].clientY;\n        } else if (evt.touches[0].pageX !== void 0) {\n          var rect = svg.getBoundingClientRect();\n\n          evt.clientX = evt.touches[0].pageX - rect.left;\n          evt.clientY = evt.touches[0].pageY - rect.top;\n        }\n        // If it is a custom event\n      } else if (evt.originalEvent !== void 0) {\n        if (evt.originalEvent.clientX !== void 0) {\n          evt.clientX = evt.originalEvent.clientX;\n          evt.clientY = evt.originalEvent.clientY;\n        }\n      }\n    }\n  },\n\n  /**\n   * If it is a touch event than add clientX and clientY to event object\n   *\n   * @param  {Event} evt\n   * @param  {SVGSVGElement} svg\n   * @param  {Number} touch\n   */\n  touchNormalize: function (evt, svg, touch) {\n    // If it is a touch event\n    if (evt.touches !== void 0 && evt.touches.length) {\n      if (evt.touches[touch].clientX !== void 0) {\n        evt.clientX = evt.touches[touch].clientX;\n        evt.clientY = evt.touches[touch].clientY;\n      } else if (evt.touches[touch].pageX !== void 0) {\n        var rect = svg.getBoundingClientRect();\n\n        evt.clientX = evt.touches[touch].pageX - rect.left;\n        evt.clientY = evt.touches[touch].pageY - rect.top;\n      }\n      // If it is a custom event\n    } else {\n      // If no clientX then fallback\n      if (evt.clientX === void 0 || evt.clientX === null) {\n        // Fallback\n        evt.clientX = 0;\n        evt.clientY = 0;\n        if (evt.originalEvent !== void 0) {\n          if (evt.originalEvent.clientX !== void 0) {\n            evt.clientX = evt.originalEvent.clientX;\n            evt.clientY = evt.originalEvent.clientY;\n          }\n        }\n      }\n    }\n  },\n\n  /**\n   * Check if an event is a double click/tap\n   * TODO: For touch gestures use a library (hammer.js) that takes in account other events\n   * (touchmove and touchend). It should take in account tap duration and traveled distance\n   *\n   * @param  {Event}  evt\n   * @param  {Event}  prevEvt Previous Event\n   * @return {Boolean}\n   */\n  isDblClick: function (evt, prevEvt) {\n    // Double click detected by browser\n    if (evt.detail === 2) {\n      return true;\n    }\n    // Try to compare events\n    else if (prevEvt !== void 0 && prevEvt !== null) {\n      var timeStampDiff = evt.timeStamp - prevEvt.timeStamp, // should be lower than 250 ms\n        touchesDistance = Math.sqrt(\n          Math.pow(evt.clientX - prevEvt.clientX, 2) +\n            Math.pow(evt.clientY - prevEvt.clientY, 2)\n        );\n\n      return timeStampDiff < 250 && touchesDistance < 10;\n    }\n\n    // Nothing found\n    return false;\n  },\n\n  /**\n   * Returns current timestamp as an integer\n   *\n   * @return {Number}\n   */\n  now:\n    Date.now ||\n    function () {\n      return new Date().getTime();\n    },\n\n  // From underscore.\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  throttle: function (func, wait, options) {\n    var that = this;\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) {\n      options = {};\n    }\n    var later = function () {\n      previous = options.leading === false ? 0 : that.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) {\n        context = args = null;\n      }\n    };\n    return function () {\n      var now = that.now();\n      if (!previous && options.leading === false) {\n        previous = now;\n      }\n      var remaining = wait - (now - previous);\n      context = this; // eslint-disable-line consistent-this\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) {\n          context = args = null;\n        }\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  },\n\n  /**\n   * Create a requestAnimationFrame simulation\n   *\n   * @param  {Number|String} refreshRate\n   * @return {Function}\n   */\n  createRequestAnimationFrame: function (refreshRate) {\n    var timeout = null;\n\n    // Convert refreshRate to timeout\n    if (refreshRate !== \"auto\" && refreshRate < 60 && refreshRate > 1) {\n      timeout = Math.floor(1000 / refreshRate);\n    }\n\n    if (timeout === null) {\n      return window.requestAnimationFrame || requestTimeout(33);\n    } else {\n      return requestTimeout(timeout);\n    }\n  },\n\n  /**\n   * Calculate distance of points\n   *\n   * @param  {SVGPoint} point1\n   * @param  {SVGPoint} point2\n   * @return {Number}\n   */\n  calculateDistance: function (point1, point2) {\n    var dx = point1.x - point2.x;\n    var dy = point1.y - point2.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  },\n};\n\n/**\n * Create a callback that will execute after a given timeout\n *\n * @param  {Function} timeout\n * @return {Function}\n */\nfunction requestTimeout(timeout) {\n  return function (callback) {\n    window.setTimeout(callback, timeout);\n  };\n}\n","// uniwheel 0.1.2 (customized)\n// A unified cross browser mouse wheel event handler\n// https://github.com/teemualap/uniwheel\n\nvar Utils = require(\"./utilities\");\n\nmodule.exports = (function() {\n  //Full details: https://developer.mozilla.org/en-US/docs/Web/Reference/Events/wheel\n\n  var prefix = \"\",\n    _addEventListener,\n    _removeEventListener,\n    support,\n    fns = [];\n  var passiveTrueOption = { passive: true };\n  var passiveFalseOption = { passive: false };\n\n  // detect event model\n  if (Utils.getGlobalThis().addEventListener) {\n    _addEventListener = \"addEventListener\";\n    _removeEventListener = \"removeEventListener\";\n  } else {\n    _addEventListener = \"attachEvent\";\n    _removeEventListener = \"detachEvent\";\n    prefix = \"on\";\n  }\n\n  function getSupport() {\n    if (!support) {\n      support =\n        \"onwheel\" in document.createElement(\"div\")\n          ? \"wheel\" // Modern browsers support \"wheel\"\n          : document.onmousewheel !== undefined\n          ? \"mousewheel\" // Webkit and IE support at least \"mousewheel\"\n          : \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n    }\n    return support;\n  }\n\n  function createCallback(element, callback) {\n    // detect available wheel event\n\n    var fn = function(originalEvent) {\n      !originalEvent && (originalEvent = window.event);\n\n      // create a normalized event object\n      var event = {\n        // keep a ref to the original event object\n        originalEvent: originalEvent,\n        target: originalEvent.target || originalEvent.srcElement,\n        type: \"wheel\",\n        deltaMode: originalEvent.type == \"MozMousePixelScroll\" ? 0 : 1,\n        deltaX: 0,\n        delatZ: 0,\n        preventDefault: function() {\n          originalEvent.preventDefault\n            ? originalEvent.preventDefault()\n            : (originalEvent.returnValue = false);\n        }\n      };\n\n      // calculate deltaY (and deltaX) according to the event\n      if (getSupport() == \"mousewheel\") {\n        event.deltaY = (-1 / 40) * originalEvent.wheelDelta;\n        // Webkit also support wheelDeltaX\n        originalEvent.wheelDeltaX &&\n          (event.deltaX = (-1 / 40) * originalEvent.wheelDeltaX);\n      } else {\n        event.deltaY = originalEvent.detail;\n      }\n\n      // it's time to fire the callback\n      return callback(event);\n    };\n\n    fns.push({\n      element: element,\n      fn: fn\n    });\n\n    return fn;\n  }\n\n  function getCallback(element) {\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i].element === element) {\n        return fns[i].fn;\n      }\n    }\n    return function() {};\n  }\n\n  function removeCallback(element) {\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i].element === element) {\n        return fns.splice(i, 1);\n      }\n    }\n  }\n\n  function _addWheelListener(elem, eventName, callback, isPassiveListener) {\n    var cb;\n\n    if (getSupport() === \"wheel\") {\n      cb = callback;\n    } else {\n      cb = createCallback(elem, callback);\n    }\n\n    elem[_addEventListener](\n      prefix + eventName,\n      cb,\n      isPassiveListener ? passiveTrueOption : passiveFalseOption\n    );\n  }\n\n  function _removeWheelListener(elem, eventName, callback, isPassiveListener) {\n    var cb;\n\n    if (getSupport() === \"wheel\") {\n      cb = callback;\n    } else {\n      cb = getCallback(elem);\n    }\n\n    elem[_removeEventListener](\n      prefix + eventName,\n      cb,\n      isPassiveListener ? passiveTrueOption : passiveFalseOption\n    );\n\n    removeCallback(elem);\n  }\n\n  function addWheelListener(elem, callback, isPassiveListener) {\n    _addWheelListener(elem, getSupport(), callback, isPassiveListener);\n\n    // handle MozMousePixelScroll in older Firefox\n    if (getSupport() == \"DOMMouseScroll\") {\n      _addWheelListener(\n        elem,\n        \"MozMousePixelScroll\",\n        callback,\n        isPassiveListener\n      );\n    }\n  }\n\n  function removeWheelListener(elem, callback, isPassiveListener) {\n    _removeWheelListener(elem, getSupport(), callback, isPassiveListener);\n\n    // handle MozMousePixelScroll in older Firefox\n    if (getSupport() == \"DOMMouseScroll\") {\n      _removeWheelListener(\n        elem,\n        \"MozMousePixelScroll\",\n        callback,\n        isPassiveListener\n      );\n    }\n  }\n\n  return {\n    on: addWheelListener,\n    off: removeWheelListener\n  };\n})();\n","var Utils = require(\"./utilities\"),\n  _browser = \"unknown\";\n\n// http://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\nif (\n  /*@cc_on!@*/ false ||\n  (typeof document != \"undefined\" && !!document.documentMode)\n) {\n  // internet explorer\n  _browser = \"ie\";\n}\n\nmodule.exports = {\n  svgNS: \"http://www.w3.org/2000/svg\",\n  xmlNS: \"http://www.w3.org/XML/1998/namespace\",\n  xmlnsNS: \"http://www.w3.org/2000/xmlns/\",\n  xlinkNS: \"http://www.w3.org/1999/xlink\",\n  evNS: \"http://www.w3.org/2001/xml-events\",\n\n  /**\n   * Get svg dimensions: width and height\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {Object}     {width: 0, height: 0}\n   */\n  getBoundingClientRectNormalized: function (svg) {\n    if (svg.clientWidth && svg.clientHeight) {\n      return { width: svg.clientWidth, height: svg.clientHeight };\n    } else if (!!svg.getBoundingClientRect()) {\n      return svg.getBoundingClientRect();\n    } else {\n      throw new Error(\"Cannot get BoundingClientRect for SVG.\");\n    }\n  },\n\n  /**\n   * Gets g element with class of \"viewport\" or creates it if it doesn't exist\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {SVGElement}     g (group) element\n   */\n  getOrCreateViewport: function (svg, selector) {\n    var viewport = null;\n\n    if (Utils.isElement(selector)) {\n      viewport = selector;\n    } else {\n      viewport = svg.querySelector(selector);\n    }\n\n    // Check if there is just one main group in SVG\n    if (!viewport) {\n      var childNodes = Array.prototype.slice\n        .call(svg.childNodes || svg.children)\n        .filter(function (el) {\n          return el.nodeName !== \"defs\" && el.nodeName !== \"#text\";\n        });\n\n      // Node name should be SVGGElement and should have no transform attribute\n      // Groups with transform are not used as viewport because it involves parsing of all transform possibilities\n      if (\n        childNodes.length === 1 &&\n        childNodes[0].nodeName === \"g\" &&\n        childNodes[0].getAttribute(\"transform\") === null\n      ) {\n        viewport = childNodes[0];\n      }\n    }\n\n    // If no favorable group element exists then create one\n    if (!viewport) {\n      var viewportId =\n        \"viewport-\" + new Date().toISOString().replace(/\\D/g, \"\");\n      viewport = document.createElementNS(this.svgNS, \"g\");\n      viewport.setAttribute(\"id\", viewportId);\n\n      // Internet Explorer (all versions?) can't use childNodes, but other browsers prefer (require?) using childNodes\n      var svgChildren = svg.childNodes || svg.children;\n      if (!!svgChildren && svgChildren.length > 0) {\n        for (var i = svgChildren.length; i > 0; i--) {\n          // Move everything into viewport except defs\n          if (svgChildren[svgChildren.length - i].nodeName !== \"defs\") {\n            viewport.appendChild(svgChildren[svgChildren.length - i]);\n          }\n        }\n      }\n      svg.appendChild(viewport);\n    }\n\n    // Parse class names\n    var classNames = [];\n    if (viewport.getAttribute(\"class\")) {\n      classNames = viewport.getAttribute(\"class\").split(\" \");\n    }\n\n    // Set class (if not set already)\n    if (!~classNames.indexOf(\"svg-pan-zoom_viewport\")) {\n      classNames.push(\"svg-pan-zoom_viewport\");\n      viewport.setAttribute(\"class\", classNames.join(\" \"));\n    }\n\n    return viewport;\n  },\n\n  /**\n   * Set SVG attributes\n   *\n   * @param  {SVGSVGElement} svg\n   */\n  setupSvgAttributes: function (svg) {\n    // Setting default attributes\n    svg.setAttribute(\"xmlns\", this.svgNS);\n    svg.setAttributeNS(this.xmlnsNS, \"xmlns:xlink\", this.xlinkNS);\n    svg.setAttributeNS(this.xmlnsNS, \"xmlns:ev\", this.evNS);\n\n    // Needed for Internet Explorer, otherwise the viewport overflows\n    if (svg.parentNode !== null) {\n      var style = svg.getAttribute(\"style\") || \"\";\n      if (style.toLowerCase().indexOf(\"overflow\") === -1) {\n        svg.setAttribute(\"style\", \"overflow: hidden; \" + style);\n      }\n    }\n  },\n\n  /**\n   * How long Internet Explorer takes to finish updating its display (ms).\n   */\n  internetExplorerRedisplayInterval: 300,\n\n  /**\n   * Forces the browser to redisplay all SVG elements that rely on an\n   * element defined in a 'defs' section. It works globally, for every\n   * available defs element on the page.\n   * The throttling is intentionally global.\n   *\n   * This is only needed for IE. It is as a hack to make markers (and 'use' elements?)\n   * visible after pan/zoom when there are multiple SVGs on the page.\n   * See bug report: https://connect.microsoft.com/IE/feedback/details/781964/\n   * also see svg-pan-zoom issue: https://github.com/ariutta/svg-pan-zoom/issues/62\n   */\n  refreshDefsGlobal: Utils.throttle(\n    function () {\n      var allDefs = document.querySelectorAll(\"defs\");\n      var allDefsCount = allDefs.length;\n      for (var i = 0; i < allDefsCount; i++) {\n        var thisDefs = allDefs[i];\n        thisDefs.parentNode.insertBefore(thisDefs, thisDefs);\n      }\n    },\n    this ? this.internetExplorerRedisplayInterval : null\n  ),\n\n  /**\n   * Sets the current transform matrix of an element\n   *\n   * @param {SVGElement} element\n   * @param {SVGMatrix} matrix  CTM\n   * @param {SVGElement} defs\n   */\n  setCTM: function (element, matrix, defs) {\n    var that = this,\n      s =\n        \"matrix(\" +\n        matrix.a +\n        \",\" +\n        matrix.b +\n        \",\" +\n        matrix.c +\n        \",\" +\n        matrix.d +\n        \",\" +\n        matrix.e +\n        \",\" +\n        matrix.f +\n        \")\";\n\n    element.setAttributeNS(null, \"transform\", s);\n    if (\"transform\" in element.style) {\n      element.style.transform = s;\n    } else if (\"-ms-transform\" in element.style) {\n      element.style[\"-ms-transform\"] = s;\n    } else if (\"-webkit-transform\" in element.style) {\n      element.style[\"-webkit-transform\"] = s;\n    }\n\n    // IE has a bug that makes markers disappear on zoom (when the matrix \"a\" and/or \"d\" elements change)\n    // see http://stackoverflow.com/questions/17654578/svg-marker-does-not-work-in-ie9-10\n    // and http://srndolha.wordpress.com/2013/11/25/svg-line-markers-may-disappear-in-internet-explorer-11/\n    if (_browser === \"ie\" && !!defs) {\n      // this refresh is intended for redisplaying the SVG during zooming\n      defs.parentNode.insertBefore(defs, defs);\n      // this refresh is intended for redisplaying the other SVGs on a page when panning a given SVG\n      // it is also needed for the given SVG itself, on zoomEnd, if the SVG contains any markers that\n      // are located under any other element(s).\n      window.setTimeout(function () {\n        that.refreshDefsGlobal();\n      }, that.internetExplorerRedisplayInterval);\n    }\n  },\n\n  /**\n   * Instantiate an SVGPoint object with given event coordinates\n   *\n   * @param {Event} evt\n   * @param  {SVGSVGElement} svg\n   * @return {SVGPoint}     point\n   */\n  getEventPoint: function (evt, svg) {\n    var point = svg.createSVGPoint();\n\n    Utils.mouseAndTouchNormalize(evt, svg);\n\n    point.x = evt.clientX;\n    point.y = evt.clientY;\n\n    return point;\n  },\n\n  /**\n   * Instantiate an SVGPoint object with given touch event coordinates\n   *\n   * @param {Event} evt\n   * @param  {SVGSVGElement} svg\n   * @param  {Number} touch\n   * @return {SVGPoint}     point\n   */\n  getTouchPoint: function (evt, svg, touch) {\n    var point = svg.createSVGPoint();\n\n    Utils.touchNormalize(evt, svg, touch);\n\n    point.x = evt.clientX;\n    point.y = evt.clientY;\n\n    return point;\n  },\n\n  /**\n   * Get SVG center point\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {SVGPoint}\n   */\n  getSvgCenterPoint: function (svg, width, height) {\n    return this.createSVGPoint(svg, width / 2, height / 2);\n  },\n\n  /**\n   * Create a SVGPoint with given x and y\n   *\n   * @param  {SVGSVGElement} svg\n   * @param  {Number} x\n   * @param  {Number} y\n   * @return {SVGPoint}\n   */\n  createSVGPoint: function (svg, x, y) {\n    var point = svg.createSVGPoint();\n    point.x = x;\n    point.y = y;\n\n    return point;\n  },\n};\n","var SvgUtils = require(\"./svg-utilities\");\n\nmodule.exports = {\n  enable: function (instance) {\n    // Select (and create if necessary) defs\n    var defs = instance.svg.querySelector(\"defs\");\n    if (!defs) {\n      defs = document.createElementNS(SvgUtils.svgNS, \"defs\");\n      instance.svg.appendChild(defs);\n    }\n\n    // Check for style element, and create it if it doesn't exist\n    var styleEl = defs.querySelector(\"style#svg-pan-zoom-controls-styles\");\n    if (!styleEl) {\n      var style = document.createElementNS(SvgUtils.svgNS, \"style\");\n      style.setAttribute(\"id\", \"svg-pan-zoom-controls-styles\");\n      style.setAttribute(\"type\", \"text/css\");\n      style.textContent =\n        \".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }\";\n      defs.appendChild(style);\n    }\n\n    // Zoom Group\n    var zoomGroup = document.createElementNS(SvgUtils.svgNS, \"g\");\n    zoomGroup.setAttribute(\"id\", \"svg-pan-zoom-controls\");\n    zoomGroup.setAttribute(\n      \"transform\",\n      \"translate(\" +\n        (instance.width - 70) +\n        \" \" +\n        (instance.height - 76) +\n        \") scale(0.75)\"\n    );\n    zoomGroup.setAttribute(\"class\", \"svg-pan-zoom-control\");\n\n    // Control elements\n    zoomGroup.appendChild(this._createZoomIn(instance));\n    zoomGroup.appendChild(this._createZoomReset(instance));\n    zoomGroup.appendChild(this._createZoomOut(instance));\n\n    // Finally append created element\n    instance.svg.appendChild(zoomGroup);\n\n    // Cache control instance\n    instance.controlIcons = zoomGroup;\n  },\n\n  _createZoomIn: function (instance) {\n    var zoomIn = document.createElementNS(SvgUtils.svgNS, \"g\");\n    zoomIn.setAttribute(\"id\", \"svg-pan-zoom-zoom-in\");\n    zoomIn.setAttribute(\"transform\", \"translate(30.5 5) scale(0.015)\");\n    zoomIn.setAttribute(\"class\", \"svg-pan-zoom-control\");\n    zoomIn.addEventListener(\n      \"click\",\n      function () {\n        instance.getPublicInstance().zoomIn();\n      },\n      false\n    );\n    zoomIn.addEventListener(\n      \"touchstart\",\n      function () {\n        instance.getPublicInstance().zoomIn();\n      },\n      false\n    );\n\n    var zoomInBackground = document.createElementNS(SvgUtils.svgNS, \"rect\"); // TODO change these background space fillers to rounded rectangles so they look prettier\n    zoomInBackground.setAttribute(\"x\", \"0\");\n    zoomInBackground.setAttribute(\"y\", \"0\");\n    zoomInBackground.setAttribute(\"width\", \"1500\"); // larger than expected because the whole group is transformed to scale down\n    zoomInBackground.setAttribute(\"height\", \"1400\");\n    zoomInBackground.setAttribute(\"class\", \"svg-pan-zoom-control-background\");\n    zoomIn.appendChild(zoomInBackground);\n\n    var zoomInShape = document.createElementNS(SvgUtils.svgNS, \"path\");\n    zoomInShape.setAttribute(\n      \"d\",\n      \"M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z\"\n    );\n    zoomInShape.setAttribute(\"class\", \"svg-pan-zoom-control-element\");\n    zoomIn.appendChild(zoomInShape);\n\n    return zoomIn;\n  },\n\n  _createZoomReset: function (instance) {\n    // reset\n    var resetPanZoomControl = document.createElementNS(SvgUtils.svgNS, \"g\");\n    resetPanZoomControl.setAttribute(\"id\", \"svg-pan-zoom-reset-pan-zoom\");\n    resetPanZoomControl.setAttribute(\"transform\", \"translate(5 35) scale(0.4)\");\n    resetPanZoomControl.setAttribute(\"class\", \"svg-pan-zoom-control\");\n    resetPanZoomControl.addEventListener(\n      \"click\",\n      function () {\n        instance.getPublicInstance().reset();\n      },\n      false\n    );\n    resetPanZoomControl.addEventListener(\n      \"touchstart\",\n      function () {\n        instance.getPublicInstance().reset();\n      },\n      false\n    );\n\n    var resetPanZoomControlBackground = document.createElementNS(\n      SvgUtils.svgNS,\n      \"rect\"\n    ); // TODO change these background space fillers to rounded rectangles so they look prettier\n    resetPanZoomControlBackground.setAttribute(\"x\", \"2\");\n    resetPanZoomControlBackground.setAttribute(\"y\", \"2\");\n    resetPanZoomControlBackground.setAttribute(\"width\", \"182\"); // larger than expected because the whole group is transformed to scale down\n    resetPanZoomControlBackground.setAttribute(\"height\", \"58\");\n    resetPanZoomControlBackground.setAttribute(\n      \"class\",\n      \"svg-pan-zoom-control-background\"\n    );\n    resetPanZoomControl.appendChild(resetPanZoomControlBackground);\n\n    var resetPanZoomControlShape1 = document.createElementNS(\n      SvgUtils.svgNS,\n      \"path\"\n    );\n    resetPanZoomControlShape1.setAttribute(\n      \"d\",\n      \"M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z\"\n    );\n    resetPanZoomControlShape1.setAttribute(\n      \"class\",\n      \"svg-pan-zoom-control-element\"\n    );\n    resetPanZoomControl.appendChild(resetPanZoomControlShape1);\n\n    var resetPanZoomControlShape2 = document.createElementNS(\n      SvgUtils.svgNS,\n      \"path\"\n    );\n    resetPanZoomControlShape2.setAttribute(\n      \"d\",\n      \"M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z\"\n    );\n    resetPanZoomControlShape2.setAttribute(\n      \"class\",\n      \"svg-pan-zoom-control-element\"\n    );\n    resetPanZoomControl.appendChild(resetPanZoomControlShape2);\n\n    return resetPanZoomControl;\n  },\n\n  _createZoomOut: function (instance) {\n    // zoom out\n    var zoomOut = document.createElementNS(SvgUtils.svgNS, \"g\");\n    zoomOut.setAttribute(\"id\", \"svg-pan-zoom-zoom-out\");\n    zoomOut.setAttribute(\"transform\", \"translate(30.5 70) scale(0.015)\");\n    zoomOut.setAttribute(\"class\", \"svg-pan-zoom-control\");\n    zoomOut.addEventListener(\n      \"click\",\n      function () {\n        instance.getPublicInstance().zoomOut();\n      },\n      false\n    );\n    zoomOut.addEventListener(\n      \"touchstart\",\n      function () {\n        instance.getPublicInstance().zoomOut();\n      },\n      false\n    );\n\n    var zoomOutBackground = document.createElementNS(SvgUtils.svgNS, \"rect\"); // TODO change these background space fillers to rounded rectangles so they look prettier\n    zoomOutBackground.setAttribute(\"x\", \"0\");\n    zoomOutBackground.setAttribute(\"y\", \"0\");\n    zoomOutBackground.setAttribute(\"width\", \"1500\"); // larger than expected because the whole group is transformed to scale down\n    zoomOutBackground.setAttribute(\"height\", \"1400\");\n    zoomOutBackground.setAttribute(\"class\", \"svg-pan-zoom-control-background\");\n    zoomOut.appendChild(zoomOutBackground);\n\n    var zoomOutShape = document.createElementNS(SvgUtils.svgNS, \"path\");\n    zoomOutShape.setAttribute(\n      \"d\",\n      \"M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z\"\n    );\n    zoomOutShape.setAttribute(\"class\", \"svg-pan-zoom-control-element\");\n    zoomOut.appendChild(zoomOutShape);\n\n    return zoomOut;\n  },\n\n  disable: function (instance) {\n    if (instance.controlIcons) {\n      instance.controlIcons.parentNode.removeChild(instance.controlIcons);\n      instance.controlIcons = null;\n    }\n  },\n};\n","var SvgUtils = require(\"./svg-utilities\"),\n  Utils = require(\"./utilities\");\n\nvar ShadowViewport = function (viewport, options) {\n  this.init(viewport, options);\n};\n\n/**\n * Initialization\n *\n * @param  {SVGElement} viewport\n * @param  {Object} options\n */\nShadowViewport.prototype.init = function (viewport, options) {\n  // DOM Elements\n  this.viewport = viewport;\n  this.options = options;\n\n  // State cache\n  this.originalState = { zoom: 1, x: 0, y: 0 };\n  this.activeState = { zoom: 1, x: 0, y: 0 };\n\n  this.updateCTMCached = Utils.proxy(this.updateCTM, this);\n\n  // Create a custom requestAnimationFrame taking in account refreshRate\n  this.requestAnimationFrame = Utils.createRequestAnimationFrame(\n    this.options.refreshRate\n  );\n\n  // ViewBox\n  this.viewBox = { x: 0, y: 0, width: 0, height: 0 };\n  this.cacheViewBox();\n\n  // Process CTM\n  var newCTM = this.processCTM();\n\n  // Update viewport CTM and cache zoom and pan\n  this.setCTM(newCTM);\n\n  // Update CTM in this frame\n  this.updateCTM();\n};\n\n/**\n * Cache initial viewBox value\n * If no viewBox is defined, then use viewport size/position instead for viewBox values\n */\nShadowViewport.prototype.cacheViewBox = function () {\n  var svgViewBox = this.options.svg.getAttribute(\"viewBox\");\n\n  if (svgViewBox) {\n    var viewBoxValues = svgViewBox\n      .split(/[\\s\\,]/)\n      .filter(function (v) {\n        return v;\n      })\n      .map(parseFloat);\n\n    // Cache viewbox x and y offset\n    this.viewBox.x = viewBoxValues[0];\n    this.viewBox.y = viewBoxValues[1];\n    this.viewBox.width = viewBoxValues[2];\n    this.viewBox.height = viewBoxValues[3];\n\n    var zoom = Math.min(\n      this.options.width / this.viewBox.width,\n      this.options.height / this.viewBox.height\n    );\n\n    // Update active state\n    this.activeState.zoom = zoom;\n    this.activeState.x = (this.options.width - this.viewBox.width * zoom) / 2;\n    this.activeState.y = (this.options.height - this.viewBox.height * zoom) / 2;\n\n    // Force updating CTM\n    this.updateCTMOnNextFrame();\n\n    this.options.svg.removeAttribute(\"viewBox\");\n  } else {\n    this.simpleViewBoxCache();\n  }\n};\n\n/**\n * Recalculate viewport sizes and update viewBox cache\n */\nShadowViewport.prototype.simpleViewBoxCache = function () {\n  var bBox = this.viewport.getBBox();\n\n  this.viewBox.x = bBox.x;\n  this.viewBox.y = bBox.y;\n  this.viewBox.width = bBox.width;\n  this.viewBox.height = bBox.height;\n};\n\n/**\n * Returns a viewbox object. Safe to alter\n *\n * @return {Object} viewbox object\n */\nShadowViewport.prototype.getViewBox = function () {\n  return Utils.extend({}, this.viewBox);\n};\n\n/**\n * Get initial zoom and pan values. Save them into originalState\n * Parses viewBox attribute to alter initial sizes\n *\n * @return {CTM} CTM object based on options\n */\nShadowViewport.prototype.processCTM = function () {\n  var newCTM = this.getCTM();\n\n  if (this.options.fit || this.options.contain) {\n    var newScale;\n    if (this.options.fit) {\n      newScale = Math.min(\n        this.options.width / this.viewBox.width,\n        this.options.height / this.viewBox.height\n      );\n    } else {\n      newScale = Math.max(\n        this.options.width / this.viewBox.width,\n        this.options.height / this.viewBox.height\n      );\n    }\n\n    newCTM.a = newScale; //x-scale\n    newCTM.d = newScale; //y-scale\n    newCTM.e = -this.viewBox.x * newScale; //x-transform\n    newCTM.f = -this.viewBox.y * newScale; //y-transform\n  }\n\n  if (this.options.center) {\n    var offsetX =\n        (this.options.width -\n          (this.viewBox.width + this.viewBox.x * 2) * newCTM.a) *\n        0.5,\n      offsetY =\n        (this.options.height -\n          (this.viewBox.height + this.viewBox.y * 2) * newCTM.a) *\n        0.5;\n\n    newCTM.e = offsetX;\n    newCTM.f = offsetY;\n  }\n\n  // Cache initial values. Based on activeState and fix+center opitons\n  this.originalState.zoom = newCTM.a;\n  this.originalState.x = newCTM.e;\n  this.originalState.y = newCTM.f;\n\n  return newCTM;\n};\n\n/**\n * Return originalState object. Safe to alter\n *\n * @return {Object}\n */\nShadowViewport.prototype.getOriginalState = function () {\n  return Utils.extend({}, this.originalState);\n};\n\n/**\n * Return actualState object. Safe to alter\n *\n * @return {Object}\n */\nShadowViewport.prototype.getState = function () {\n  return Utils.extend({}, this.activeState);\n};\n\n/**\n * Get zoom scale\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.getZoom = function () {\n  return this.activeState.zoom;\n};\n\n/**\n * Get zoom scale for pubilc usage\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.getRelativeZoom = function () {\n  return this.activeState.zoom / this.originalState.zoom;\n};\n\n/**\n * Compute zoom scale for pubilc usage\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.computeRelativeZoom = function (scale) {\n  return scale / this.originalState.zoom;\n};\n\n/**\n * Get pan\n *\n * @return {Object}\n */\nShadowViewport.prototype.getPan = function () {\n  return { x: this.activeState.x, y: this.activeState.y };\n};\n\n/**\n * Return cached viewport CTM value that can be safely modified\n *\n * @return {SVGMatrix}\n */\nShadowViewport.prototype.getCTM = function () {\n  var safeCTM = this.options.svg.createSVGMatrix();\n\n  // Copy values manually as in FF they are not itterable\n  safeCTM.a = this.activeState.zoom;\n  safeCTM.b = 0;\n  safeCTM.c = 0;\n  safeCTM.d = this.activeState.zoom;\n  safeCTM.e = this.activeState.x;\n  safeCTM.f = this.activeState.y;\n\n  return safeCTM;\n};\n\n/**\n * Set a new CTM\n *\n * @param {SVGMatrix} newCTM\n */\nShadowViewport.prototype.setCTM = function (newCTM) {\n  var willZoom = this.isZoomDifferent(newCTM),\n    willPan = this.isPanDifferent(newCTM);\n\n  if (willZoom || willPan) {\n    // Before zoom\n    if (willZoom) {\n      // If returns false then cancel zooming\n      if (\n        this.options.beforeZoom(\n          this.getRelativeZoom(),\n          this.computeRelativeZoom(newCTM.a)\n        ) === false\n      ) {\n        newCTM.a = newCTM.d = this.activeState.zoom;\n        willZoom = false;\n      } else {\n        this.updateCache(newCTM);\n        this.options.onZoom(this.getRelativeZoom());\n      }\n    }\n\n    // Before pan\n    if (willPan) {\n      var preventPan = this.options.beforePan(this.getPan(), {\n          x: newCTM.e,\n          y: newCTM.f,\n        }),\n        // If prevent pan is an object\n        preventPanX = false,\n        preventPanY = false;\n\n      // If prevent pan is Boolean false\n      if (preventPan === false) {\n        // Set x and y same as before\n        newCTM.e = this.getPan().x;\n        newCTM.f = this.getPan().y;\n\n        preventPanX = preventPanY = true;\n      } else if (Utils.isObject(preventPan)) {\n        // Check for X axes attribute\n        if (preventPan.x === false) {\n          // Prevent panning on x axes\n          newCTM.e = this.getPan().x;\n          preventPanX = true;\n        } else if (Utils.isNumber(preventPan.x)) {\n          // Set a custom pan value\n          newCTM.e = preventPan.x;\n        }\n\n        // Check for Y axes attribute\n        if (preventPan.y === false) {\n          // Prevent panning on x axes\n          newCTM.f = this.getPan().y;\n          preventPanY = true;\n        } else if (Utils.isNumber(preventPan.y)) {\n          // Set a custom pan value\n          newCTM.f = preventPan.y;\n        }\n      }\n\n      // Update willPan flag\n      // Check if newCTM is still different\n      if ((preventPanX && preventPanY) || !this.isPanDifferent(newCTM)) {\n        willPan = false;\n      } else {\n        this.updateCache(newCTM);\n        this.options.onPan(this.getPan());\n      }\n    }\n\n    // Check again if should zoom or pan\n    if (willZoom || willPan) {\n      this.updateCTMOnNextFrame();\n    }\n  }\n};\n\nShadowViewport.prototype.isZoomDifferent = function (newCTM) {\n  return this.activeState.zoom !== newCTM.a;\n};\n\nShadowViewport.prototype.isPanDifferent = function (newCTM) {\n  return this.activeState.x !== newCTM.e || this.activeState.y !== newCTM.f;\n};\n\n/**\n * Update cached CTM and active state\n *\n * @param {SVGMatrix} newCTM\n */\nShadowViewport.prototype.updateCache = function (newCTM) {\n  this.activeState.zoom = newCTM.a;\n  this.activeState.x = newCTM.e;\n  this.activeState.y = newCTM.f;\n};\n\nShadowViewport.prototype.pendingUpdate = false;\n\n/**\n * Place a request to update CTM on next Frame\n */\nShadowViewport.prototype.updateCTMOnNextFrame = function () {\n  if (!this.pendingUpdate) {\n    // Lock\n    this.pendingUpdate = true;\n\n    // Throttle next update\n    this.requestAnimationFrame.call(window, this.updateCTMCached);\n  }\n};\n\n/**\n * Update viewport CTM with cached CTM\n */\nShadowViewport.prototype.updateCTM = function () {\n  var ctm = this.getCTM();\n\n  // Updates SVG element\n  SvgUtils.setCTM(this.viewport, ctm, this.defs);\n\n  // Free the lock\n  this.pendingUpdate = false;\n\n  // Notify about the update\n  if (this.options.onUpdatedCTM) {\n    this.options.onUpdatedCTM(ctm);\n  }\n};\n\nmodule.exports = function (viewport, options) {\n  return new ShadowViewport(viewport, options);\n};\n","var Wheel = require(\"./uniwheel\"),\n  ControlIcons = require(\"./control-icons\"),\n  Utils = require(\"./utilities\"),\n  SvgUtils = require(\"./svg-utilities\"),\n  ShadowViewport = require(\"./shadow-viewport\");\n\nvar SvgPanZoom = function (svg, options) {\n  this.init(svg, options);\n};\n\nvar optionsDefaults = {\n  viewportSelector: \".svg-pan-zoom_viewport\", // Viewport selector. Can be querySelector string or SVGElement\n  panEnabled: true, // enable or disable panning (default enabled)\n  controlIconsEnabled: false, // insert icons to give user an option in addition to mouse events to control pan/zoom (default disabled)\n  zoomEnabled: true, // enable or disable zooming (default enabled)\n  dblClickZoomEnabled: true, // enable or disable zooming by double clicking (default enabled)\n  mouseWheelZoomEnabled: true, // enable or disable zooming by mouse wheel (default enabled)\n  preventMouseEventsDefault: true, // enable or disable preventDefault for mouse events\n  zoomScaleSensitivity: 0.1, // Zoom sensitivity\n  minZoom: 0.5, // Minimum Zoom level\n  maxZoom: 10, // Maximum Zoom level\n  fit: true, // enable or disable viewport fit in SVG (default true)\n  contain: false, // enable or disable viewport contain the svg (default false)\n  center: true, // enable or disable viewport centering in SVG (default true)\n  refreshRate: \"auto\", // Maximum number of frames per second (altering SVG's viewport)\n  beforeZoom: null,\n  onZoom: null,\n  beforePan: null,\n  onPan: null,\n  customEventsHandler: null,\n  eventsListenerElement: null,\n  onUpdatedCTM: null,\n};\n\nvar passiveListenerTrueOption = { passive: true };\nvar passiveListenerFalseOption = { passive: false };\n\nSvgPanZoom.prototype.init = function (svg, options) {\n  var that = this;\n\n  this.svg = svg;\n  this.defs = svg.querySelector(\"defs\");\n\n  // Add default attributes to SVG\n  SvgUtils.setupSvgAttributes(this.svg);\n\n  // Set options\n  this.options = Utils.extend(Utils.extend({}, optionsDefaults), options);\n\n  // Set default state\n  this.state = \"none\";\n\n  // Get dimensions\n  var boundingClientRectNormalized =\n    SvgUtils.getBoundingClientRectNormalized(svg);\n  this.width = boundingClientRectNormalized.width;\n  this.height = boundingClientRectNormalized.height;\n\n  // Init shadow viewport\n  this.viewport = ShadowViewport(\n    SvgUtils.getOrCreateViewport(this.svg, this.options.viewportSelector),\n    {\n      svg: this.svg,\n      width: this.width,\n      height: this.height,\n      fit: this.options.fit,\n      contain: this.options.contain,\n      center: this.options.center,\n      refreshRate: this.options.refreshRate,\n      // Put callbacks into functions as they can change through time\n      beforeZoom: function (oldScale, newScale) {\n        if (that.viewport && that.options.beforeZoom) {\n          return that.options.beforeZoom(oldScale, newScale);\n        }\n      },\n      onZoom: function (scale) {\n        if (that.viewport && that.options.onZoom) {\n          return that.options.onZoom(scale);\n        }\n      },\n      beforePan: function (oldPoint, newPoint) {\n        if (that.viewport && that.options.beforePan) {\n          return that.options.beforePan(oldPoint, newPoint);\n        }\n      },\n      onPan: function (point) {\n        if (that.viewport && that.options.onPan) {\n          return that.options.onPan(point);\n        }\n      },\n      onUpdatedCTM: function (ctm) {\n        if (that.viewport && that.options.onUpdatedCTM) {\n          return that.options.onUpdatedCTM(ctm);\n        }\n      },\n    }\n  );\n\n  // Wrap callbacks into public API context\n  var publicInstance = this.getPublicInstance();\n  publicInstance.setBeforeZoom(this.options.beforeZoom);\n  publicInstance.setOnZoom(this.options.onZoom);\n  publicInstance.setBeforePan(this.options.beforePan);\n  publicInstance.setOnPan(this.options.onPan);\n  publicInstance.setOnUpdatedCTM(this.options.onUpdatedCTM);\n\n  if (this.options.controlIconsEnabled) {\n    ControlIcons.enable(this);\n  }\n\n  // Init events handlers\n  this.lastMouseWheelEventTime = Date.now();\n  this.setupHandlers();\n};\n\n/**\n * Register event handlers\n */\nSvgPanZoom.prototype.setupHandlers = function () {\n  var that = this,\n    prevEvt = null; // use for touchstart event to detect double tap\n\n  this.eventListeners = {\n    // Mouse down group\n    pointerdown: function (evt) {\n      if (evt.pointerType === \"touch\") return;\n      var result = that.handleMouseDown(evt, prevEvt);\n      prevEvt = evt;\n      return result;\n    },\n    touchstart: function (evt) {\n      var result = that.handleTouchStart(evt, prevEvt);\n      prevEvt = evt;\n      return result;\n    },\n\n    // Mouse up group\n    pointerup: function (evt) {\n      if (evt.pointerType === \"touch\") return;\n      return that.handleMouseUp(evt);\n    },\n    touchend: function (evt) {\n      return that.handleTouchEnd(evt);\n    },\n\n    // Mouse move group\n    pointermove: function (evt) {\n      if (evt.pointerType === \"touch\") return;\n      return that.handleMouseMove(evt);\n    },\n    touchmove: function (evt) {\n      return that.handleTouchMove(evt);\n    },\n\n    // Mouse leave group\n    pointerleave: function (evt) {\n      if (evt.pointerType === \"touch\") return;\n      return that.handleMouseUp(evt);\n    },\n    pointercancel: function (evt) {\n      if (evt.pointerType === \"touch\") return;\n      return that.handleMouseUp(evt);\n    },\n    touchleave: function (evt) {\n      return that.handleTouchEnd(evt);\n    },\n    touchcancel: function (evt) {\n      return that.handleTouchEnd(evt);\n    },\n  };\n\n  // Init custom events handler if available\n  // eslint-disable-next-line eqeqeq\n  if (this.options.customEventsHandler != null) {\n    this.options.customEventsHandler.init({\n      svgElement: this.svg,\n      eventsListenerElement: this.options.eventsListenerElement,\n      instance: this.getPublicInstance(),\n    });\n\n    // Custom event handler may halt builtin listeners\n    var haltEventListeners =\n      this.options.customEventsHandler.haltEventListeners;\n    if (haltEventListeners && haltEventListeners.length) {\n      for (var i = haltEventListeners.length - 1; i >= 0; i--) {\n        if (this.eventListeners.hasOwnProperty(haltEventListeners[i])) {\n          delete this.eventListeners[haltEventListeners[i]];\n        }\n      }\n    }\n  }\n\n  // Bind eventListeners\n  for (var event in this.eventListeners) {\n    // Attach event to eventsListenerElement or SVG if not available\n    (this.options.eventsListenerElement || this.svg).addEventListener(\n      event,\n      this.eventListeners[event],\n      !this.options.preventMouseEventsDefault\n        ? passiveListenerTrueOption\n        : passiveListenerFalseOption\n    );\n  }\n\n  // Zoom using mouse wheel\n  if (this.options.mouseWheelZoomEnabled) {\n    this.options.mouseWheelZoomEnabled = false; // set to false as enable will set it back to true\n    this.enableMouseWheelZoom();\n  }\n};\n\n/**\n * Enable ability to zoom using mouse wheel\n */\nSvgPanZoom.prototype.enableMouseWheelZoom = function () {\n  if (!this.options.mouseWheelZoomEnabled) {\n    var that = this;\n\n    // Mouse wheel listener\n    this.wheelListener = function (evt) {\n      return that.handleMouseWheel(evt);\n    };\n\n    // Bind wheelListener\n    var isPassiveListener = !this.options.preventMouseEventsDefault;\n    Wheel.on(\n      this.options.eventsListenerElement || this.svg,\n      this.wheelListener,\n      isPassiveListener\n    );\n\n    this.options.mouseWheelZoomEnabled = true;\n  }\n};\n\n/**\n * Disable ability to zoom using mouse wheel\n */\nSvgPanZoom.prototype.disableMouseWheelZoom = function () {\n  if (this.options.mouseWheelZoomEnabled) {\n    var isPassiveListener = !this.options.preventMouseEventsDefault;\n    Wheel.off(\n      this.options.eventsListenerElement || this.svg,\n      this.wheelListener,\n      isPassiveListener\n    );\n    this.options.mouseWheelZoomEnabled = false;\n  }\n};\n\n/**\n * Handle mouse wheel event\n *\n * @param  {Event} evt\n */\nSvgPanZoom.prototype.handleMouseWheel = function (evt) {\n  if (!this.options.zoomEnabled || this.state !== \"none\") {\n    return;\n  }\n\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  // Default delta in case that deltaY is not available\n  var delta = evt.deltaY || 1,\n    timeDelta = Date.now() - this.lastMouseWheelEventTime,\n    divider = 3 + Math.max(0, 30 - timeDelta);\n\n  // Update cache\n  this.lastMouseWheelEventTime = Date.now();\n\n  // Make empirical adjustments for browsers that give deltaY in pixels (deltaMode=0)\n  if (\"deltaMode\" in evt && evt.deltaMode === 0 && evt.wheelDelta) {\n    delta = evt.deltaY === 0 ? 0 : Math.abs(evt.wheelDelta) / evt.deltaY;\n  }\n\n  delta =\n    -0.3 < delta && delta < 0.3\n      ? delta\n      : ((delta > 0 ? 1 : -1) * Math.log(Math.abs(delta) + 10)) / divider;\n\n  var inversedScreenCTM = this.svg.getScreenCTM().inverse(),\n    relativeMousePoint = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n      inversedScreenCTM\n    ),\n    zoom = Math.pow(1 + this.options.zoomScaleSensitivity, -1 * delta); // multiplying by neg. 1 so as to make zoom in/out behavior match Google maps behavior\n\n  this.zoomAtPoint(zoom, relativeMousePoint);\n};\n\n/**\n * Zoom in at a SVG point\n *\n * @param  {SVGPoint} point\n * @param  {Float} zoomScale    Number representing how much to zoom\n * @param  {Boolean} zoomAbsolute Default false. If true, zoomScale is treated as an absolute value.\n *                                Otherwise, zoomScale is treated as a multiplied (e.g. 1.10 would zoom in 10%)\n */\nSvgPanZoom.prototype.zoomAtPoint = function (zoomScale, point, zoomAbsolute) {\n  var originalState = this.viewport.getOriginalState();\n\n  if (!zoomAbsolute) {\n    // Fit zoomScale in set bounds\n    if (\n      this.getZoom() * zoomScale <\n      this.options.minZoom * originalState.zoom\n    ) {\n      zoomScale = (this.options.minZoom * originalState.zoom) / this.getZoom();\n    } else if (\n      this.getZoom() * zoomScale >\n      this.options.maxZoom * originalState.zoom\n    ) {\n      zoomScale = (this.options.maxZoom * originalState.zoom) / this.getZoom();\n    }\n  } else {\n    // Fit zoomScale in set bounds\n    zoomScale = Math.max(\n      this.options.minZoom * originalState.zoom,\n      Math.min(this.options.maxZoom * originalState.zoom, zoomScale)\n    );\n    // Find relative scale to achieve desired scale\n    zoomScale = zoomScale / this.getZoom();\n  }\n\n  var oldCTM = this.viewport.getCTM(),\n    relativePoint = point.matrixTransform(oldCTM.inverse()),\n    modifier = this.svg\n      .createSVGMatrix()\n      .translate(relativePoint.x, relativePoint.y)\n      .scale(zoomScale)\n      .translate(-relativePoint.x, -relativePoint.y),\n    newCTM = oldCTM.multiply(modifier);\n\n  if (newCTM.a !== oldCTM.a) {\n    this.viewport.setCTM(newCTM);\n  }\n};\n\n/**\n * Zoom at center point\n *\n * @param  {Float} scale\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.zoom = function (scale, absolute) {\n  this.zoomAtPoint(\n    scale,\n    SvgUtils.getSvgCenterPoint(this.svg, this.width, this.height),\n    absolute\n  );\n};\n\n/**\n * Zoom used by public instance\n *\n * @param  {Float} scale\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.publicZoom = function (scale, absolute) {\n  if (absolute) {\n    scale = this.computeFromRelativeZoom(scale);\n  }\n\n  this.zoom(scale, absolute);\n};\n\n/**\n * Zoom at point used by public instance\n *\n * @param  {Float} scale\n * @param  {SVGPoint|Object} point    An object that has x and y attributes\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.publicZoomAtPoint = function (scale, point, absolute) {\n  if (absolute) {\n    // Transform zoom into a relative value\n    scale = this.computeFromRelativeZoom(scale);\n  }\n\n  // If not a SVGPoint but has x and y then create a SVGPoint\n  if (Utils.getType(point) !== \"SVGPoint\") {\n    if (\"x\" in point && \"y\" in point) {\n      point = SvgUtils.createSVGPoint(this.svg, point.x, point.y);\n    } else {\n      throw new Error(\"Given point is invalid\");\n    }\n  }\n\n  this.zoomAtPoint(scale, point, absolute);\n};\n\n/**\n * Get zoom scale\n *\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.getZoom = function () {\n  return this.viewport.getZoom();\n};\n\n/**\n * Get zoom scale for public usage\n *\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.getRelativeZoom = function () {\n  return this.viewport.getRelativeZoom();\n};\n\n/**\n * Compute actual zoom from public zoom\n *\n * @param  {Float} zoom\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.computeFromRelativeZoom = function (zoom) {\n  return zoom * this.viewport.getOriginalState().zoom;\n};\n\n/**\n * Set zoom to initial state\n */\nSvgPanZoom.prototype.resetZoom = function () {\n  var originalState = this.viewport.getOriginalState();\n\n  this.zoom(originalState.zoom, true);\n};\n\n/**\n * Set pan to initial state\n */\nSvgPanZoom.prototype.resetPan = function () {\n  this.pan(this.viewport.getOriginalState());\n};\n\n/**\n * Set pan and zoom to initial state\n */\nSvgPanZoom.prototype.reset = function () {\n  this.resetZoom();\n  this.resetPan();\n};\n\n/**\n * Handle double click event\n * See handleMouseDown() for alternate detection method\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleDblClick = function (evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  // Check if target was a control button\n  if (this.options.controlIconsEnabled) {\n    var targetClass = evt.target.getAttribute(\"class\") || \"\";\n    if (targetClass.indexOf(\"svg-pan-zoom-control\") > -1) {\n      return false;\n    }\n  }\n\n  var zoomFactor;\n\n  if (evt.shiftKey) {\n    zoomFactor = 1 / ((1 + this.options.zoomScaleSensitivity) * 2); // zoom out when shift key pressed\n  } else {\n    zoomFactor = (1 + this.options.zoomScaleSensitivity) * 2;\n  }\n\n  var point = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n    this.svg.getScreenCTM().inverse()\n  );\n  this.zoomAtPoint(zoomFactor, point);\n};\n\n/**\n * Handle click event\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleMouseDown = function (evt, prevEvt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  Utils.mouseAndTouchNormalize(evt, this.svg);\n\n  // Double click detection; more consistent than ondblclick\n  if (this.options.dblClickZoomEnabled && Utils.isDblClick(evt, prevEvt)) {\n    this.handleDblClick(evt);\n  } else {\n    // Pan mode\n    this.state = \"pan\";\n    this.firstEventCTM = this.viewport.getCTM();\n    this.stateOrigin = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n      this.firstEventCTM.inverse()\n    );\n  }\n};\n\n/**\n * Handle mouse move event\n *\n * @param  {Event} evt\n */\nSvgPanZoom.prototype.handleMouseMove = function (evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  if (this.state === \"pan\" && this.options.panEnabled) {\n    // Pan mode\n    var point = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n        this.firstEventCTM.inverse()\n      ),\n      viewportCTM = this.firstEventCTM.translate(\n        point.x - this.stateOrigin.x,\n        point.y - this.stateOrigin.y\n      );\n\n    this.viewport.setCTM(viewportCTM);\n  }\n};\n\n/**\n * Handle mouse button release event\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleMouseUp = function (evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  if (this.state === \"pan\") {\n    // Quit pan mode\n    this.state = \"none\";\n  }\n};\n\n/**\n * Handle click event\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleTouchStart = function (evt, prevEvt) {\n  if (evt.touches.length == 1) {\n    this.handleMouseDown(evt, prevEvt);\n  } else {\n    if (this.options.preventMouseEventsDefault) {\n      if (evt.preventDefault) {\n        evt.preventDefault();\n      } else {\n        evt.returnValue = false;\n      }\n    }\n\n    this.firstEventCTM = this.viewport.getCTM();\n    var touch1 = SvgUtils.getTouchPoint(evt, this.svg, 0);\n    var touch2 = SvgUtils.getTouchPoint(evt, this.svg, 1);\n    this.firstDistance = Utils.calculateDistance(touch1, touch2);\n    touch1.x = (touch1.x + touch2.x) / 2;\n    touch1.y = (touch1.y + touch2.y) / 2;\n    this.stateOrigin = touch1.matrixTransform(this.firstEventCTM.inverse());\n    this.firstZoomLevel = this.getZoom();\n  }\n};\n\n/**\n * Handle mouse move event\n *\n * @param  {Event} evt\n */\nSvgPanZoom.prototype.handleTouchMove = function (evt) {\n  if (evt.touches.length == 1) {\n    this.handleMouseMove(evt);\n  } else {\n    // pan and zoom\n    if (this.options.preventMouseEventsDefault) {\n      if (evt.preventDefault) {\n        evt.preventDefault();\n      } else {\n        evt.returnValue = false;\n      }\n    }\n    if (!this.options.panEnabled && !this.options.zoomEnabled) {\n      return;\n    }\n\n    var touch1 = SvgUtils.getTouchPoint(evt, this.svg, 0);\n    var touch2 = SvgUtils.getTouchPoint(evt, this.svg, 1);\n    var center = this.svg.createSVGPoint();\n    center.x = (touch1.x + touch2.x) / 2;\n    center.y = (touch1.y + touch2.y) / 2;\n\n    if (this.state === \"pan\" && this.options.panEnabled) {\n      // Pan mode\n      var point = center.matrixTransform(this.firstEventCTM.inverse());\n      var viewportCTM = this.firstEventCTM.translate(\n        point.x - this.stateOrigin.x,\n        point.y - this.stateOrigin.y\n      );\n      this.viewport.setCTM(viewportCTM);\n    }\n\n    if (this.options.zoomEnabled) {\n      // zoom\n      var distance = Utils.calculateDistance(touch1, touch2);\n      var scale = distance / this.firstDistance;\n      var inversedScreenCTM = this.svg.getScreenCTM().inverse();\n      var relativeTouchPoint = center.matrixTransform(inversedScreenCTM);\n      this.zoomAtPoint(this.firstZoomLevel * scale, relativeTouchPoint, true);\n    }\n  }\n};\n\n/**\n * Handle mouse button release event\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleTouchEnd = function (evt) {\n  if (evt.touches.length == 0) {\n    this.handleMouseUp(evt);\n  } else {\n    if (this.options.preventMouseEventsDefault) {\n      if (evt.preventDefault) {\n        evt.preventDefault();\n      } else {\n        evt.returnValue = false;\n      }\n    }\n\n    this.firstEventCTM = this.viewport.getCTM();\n    if (evt.touches.length == 1) {\n      this.stateOrigin = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n        this.firstEventCTM.inverse()\n      );\n    } else {\n      var touch1 = SvgUtils.getTouchPoint(evt, this.svg, 0);\n      var touch2 = SvgUtils.getTouchPoint(evt, this.svg, 1);\n      this.firstDistance = Utils.calculateDistance(touch1, touch2);\n      touch1.x = (touch1.x + touch2.x) / 2;\n      touch1.y = (touch1.y + touch2.y) / 2;\n      this.stateOrigin = touch1.matrixTransform(this.firstEventCTM.inverse());\n    }\n  }\n};\n\n/**\n * Adjust viewport size (only) so it will fit in SVG\n * Does not center image\n */\nSvgPanZoom.prototype.fit = function () {\n  var viewBox = this.viewport.getViewBox(),\n    newScale = Math.min(\n      this.width / viewBox.width,\n      this.height / viewBox.height\n    );\n\n  this.zoom(newScale, true);\n};\n\n/**\n * Adjust viewport size (only) so it will contain the SVG\n * Does not center image\n */\nSvgPanZoom.prototype.contain = function () {\n  var viewBox = this.viewport.getViewBox(),\n    newScale = Math.max(\n      this.width / viewBox.width,\n      this.height / viewBox.height\n    );\n\n  this.zoom(newScale, true);\n};\n\n/**\n * Adjust viewport pan (only) so it will be centered in SVG\n * Does not zoom/fit/contain image\n */\nSvgPanZoom.prototype.center = function () {\n  var viewBox = this.viewport.getViewBox(),\n    offsetX =\n      (this.width - (viewBox.width + viewBox.x * 2) * this.getZoom()) * 0.5,\n    offsetY =\n      (this.height - (viewBox.height + viewBox.y * 2) * this.getZoom()) * 0.5;\n\n  this.getPublicInstance().pan({ x: offsetX, y: offsetY });\n};\n\n/**\n * Update content cached BorderBox\n * Use when viewport contents change\n */\nSvgPanZoom.prototype.updateBBox = function () {\n  this.viewport.simpleViewBoxCache();\n};\n\n/**\n * Pan to a rendered position\n *\n * @param  {Object} point {x: 0, y: 0}\n */\nSvgPanZoom.prototype.pan = function (point) {\n  var viewportCTM = this.viewport.getCTM();\n  viewportCTM.e = point.x;\n  viewportCTM.f = point.y;\n  this.viewport.setCTM(viewportCTM);\n};\n\n/**\n * Relatively pan the graph by a specified rendered position vector\n *\n * @param  {Object} point {x: 0, y: 0}\n */\nSvgPanZoom.prototype.panBy = function (point) {\n  var viewportCTM = this.viewport.getCTM();\n  viewportCTM.e += point.x;\n  viewportCTM.f += point.y;\n  this.viewport.setCTM(viewportCTM);\n};\n\n/**\n * Get pan vector\n *\n * @return {Object} {x: 0, y: 0}\n */\nSvgPanZoom.prototype.getPan = function () {\n  var state = this.viewport.getState();\n\n  return { x: state.x, y: state.y };\n};\n\n/**\n * Recalculates cached svg dimensions and controls position\n */\nSvgPanZoom.prototype.resize = function () {\n  // Get dimensions\n  var boundingClientRectNormalized = SvgUtils.getBoundingClientRectNormalized(\n    this.svg\n  );\n  this.width = boundingClientRectNormalized.width;\n  this.height = boundingClientRectNormalized.height;\n\n  // Recalculate original state\n  var viewport = this.viewport;\n  viewport.options.width = this.width;\n  viewport.options.height = this.height;\n  viewport.processCTM();\n\n  // Reposition control icons by re-enabling them\n  if (this.options.controlIconsEnabled) {\n    this.getPublicInstance().disableControlIcons();\n    this.getPublicInstance().enableControlIcons();\n  }\n};\n\n/**\n * Unbind mouse events, free callbacks and destroy public instance\n */\nSvgPanZoom.prototype.destroy = function () {\n  var that = this;\n\n  // Free callbacks\n  this.beforeZoom = null;\n  this.onZoom = null;\n  this.beforePan = null;\n  this.onPan = null;\n  this.onUpdatedCTM = null;\n\n  // Destroy custom event handlers\n  // eslint-disable-next-line eqeqeq\n  if (this.options.customEventsHandler != null) {\n    this.options.customEventsHandler.destroy({\n      svgElement: this.svg,\n      eventsListenerElement: this.options.eventsListenerElement,\n      instance: this.getPublicInstance(),\n    });\n  }\n\n  // Unbind eventListeners\n  for (var event in this.eventListeners) {\n    (this.options.eventsListenerElement || this.svg).removeEventListener(\n      event,\n      this.eventListeners[event],\n      !this.options.preventMouseEventsDefault\n        ? passiveListenerTrueOption\n        : passiveListenerFalseOption\n    );\n  }\n\n  // Unbind wheelListener\n  this.disableMouseWheelZoom();\n\n  // Remove control icons\n  this.getPublicInstance().disableControlIcons();\n\n  // Remove instance from instancesStore\n  instancesStore = instancesStore.filter(function (instance) {\n    return instance.svg !== that.svg;\n  });\n\n  // Delete options and its contents\n  delete this.options;\n\n  // Delete viewport to make public shadow viewport functions uncallable\n  delete this.viewport;\n\n  // Destroy public instance and rewrite getPublicInstance\n  delete this.publicInstance;\n  delete this.pi;\n  this.getPublicInstance = function () {\n    return null;\n  };\n};\n\n/**\n * Returns a public instance object\n *\n * @return {Object} Public instance object\n */\nSvgPanZoom.prototype.getPublicInstance = function () {\n  var that = this;\n\n  // Create cache\n  if (!this.publicInstance) {\n    this.publicInstance = this.pi = {\n      // Pan\n      enablePan: function () {\n        that.options.panEnabled = true;\n        return that.pi;\n      },\n      disablePan: function () {\n        that.options.panEnabled = false;\n        return that.pi;\n      },\n      isPanEnabled: function () {\n        return !!that.options.panEnabled;\n      },\n      pan: function (point) {\n        that.pan(point);\n        return that.pi;\n      },\n      panBy: function (point) {\n        that.panBy(point);\n        return that.pi;\n      },\n      getPan: function () {\n        return that.getPan();\n      },\n      // Pan event\n      setBeforePan: function (fn) {\n        that.options.beforePan =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      setOnPan: function (fn) {\n        that.options.onPan =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      // Zoom and Control Icons\n      enableZoom: function () {\n        that.options.zoomEnabled = true;\n        return that.pi;\n      },\n      disableZoom: function () {\n        that.options.zoomEnabled = false;\n        return that.pi;\n      },\n      isZoomEnabled: function () {\n        return !!that.options.zoomEnabled;\n      },\n      enableControlIcons: function () {\n        if (!that.options.controlIconsEnabled) {\n          that.options.controlIconsEnabled = true;\n          ControlIcons.enable(that);\n        }\n        return that.pi;\n      },\n      disableControlIcons: function () {\n        if (that.options.controlIconsEnabled) {\n          that.options.controlIconsEnabled = false;\n          ControlIcons.disable(that);\n        }\n        return that.pi;\n      },\n      isControlIconsEnabled: function () {\n        return !!that.options.controlIconsEnabled;\n      },\n      // Double click zoom\n      enableDblClickZoom: function () {\n        that.options.dblClickZoomEnabled = true;\n        return that.pi;\n      },\n      disableDblClickZoom: function () {\n        that.options.dblClickZoomEnabled = false;\n        return that.pi;\n      },\n      isDblClickZoomEnabled: function () {\n        return !!that.options.dblClickZoomEnabled;\n      },\n      // Mouse wheel zoom\n      enableMouseWheelZoom: function () {\n        that.enableMouseWheelZoom();\n        return that.pi;\n      },\n      disableMouseWheelZoom: function () {\n        that.disableMouseWheelZoom();\n        return that.pi;\n      },\n      isMouseWheelZoomEnabled: function () {\n        return !!that.options.mouseWheelZoomEnabled;\n      },\n      // Zoom scale and bounds\n      setZoomScaleSensitivity: function (scale) {\n        that.options.zoomScaleSensitivity = scale;\n        return that.pi;\n      },\n      setMinZoom: function (zoom) {\n        that.options.minZoom = zoom;\n        return that.pi;\n      },\n      setMaxZoom: function (zoom) {\n        that.options.maxZoom = zoom;\n        return that.pi;\n      },\n      // Zoom event\n      setBeforeZoom: function (fn) {\n        that.options.beforeZoom =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      setOnZoom: function (fn) {\n        that.options.onZoom =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      // Zooming\n      zoom: function (scale) {\n        that.publicZoom(scale, true);\n        return that.pi;\n      },\n      zoomBy: function (scale) {\n        that.publicZoom(scale, false);\n        return that.pi;\n      },\n      zoomAtPoint: function (scale, point) {\n        that.publicZoomAtPoint(scale, point, true);\n        return that.pi;\n      },\n      zoomAtPointBy: function (scale, point) {\n        that.publicZoomAtPoint(scale, point, false);\n        return that.pi;\n      },\n      zoomIn: function () {\n        this.zoomBy(1 + that.options.zoomScaleSensitivity);\n        return that.pi;\n      },\n      zoomOut: function () {\n        this.zoomBy(1 / (1 + that.options.zoomScaleSensitivity));\n        return that.pi;\n      },\n      getZoom: function () {\n        return that.getRelativeZoom();\n      },\n      // CTM update\n      setOnUpdatedCTM: function (fn) {\n        that.options.onUpdatedCTM =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      // Reset\n      resetZoom: function () {\n        that.resetZoom();\n        return that.pi;\n      },\n      resetPan: function () {\n        that.resetPan();\n        return that.pi;\n      },\n      reset: function () {\n        that.reset();\n        return that.pi;\n      },\n      // Fit, Contain and Center\n      fit: function () {\n        that.fit();\n        return that.pi;\n      },\n      contain: function () {\n        that.contain();\n        return that.pi;\n      },\n      center: function () {\n        that.center();\n        return that.pi;\n      },\n      // Size and Resize\n      updateBBox: function () {\n        that.updateBBox();\n        return that.pi;\n      },\n      resize: function () {\n        that.resize();\n        return that.pi;\n      },\n      getSizes: function () {\n        return {\n          width: that.width,\n          height: that.height,\n          realZoom: that.getZoom(),\n          viewBox: that.viewport.getViewBox(),\n        };\n      },\n      // Destroy\n      destroy: function () {\n        that.destroy();\n        return that.pi;\n      },\n    };\n  }\n\n  return this.publicInstance;\n};\n\n/**\n * Stores pairs of instances of SvgPanZoom and SVG\n * Each pair is represented by an object {svg: SVGSVGElement, instance: SvgPanZoom}\n *\n * @type {Array}\n */\nvar instancesStore = [];\n\nvar svgPanZoom = function (elementOrSelector, options) {\n  var svg = Utils.getSvg(elementOrSelector);\n\n  if (svg === null) {\n    return null;\n  } else {\n    // Look for existent instance\n    for (var i = instancesStore.length - 1; i >= 0; i--) {\n      if (instancesStore[i].svg === svg) {\n        return instancesStore[i].instance.getPublicInstance();\n      }\n    }\n\n    // If instance not found - create one\n    instancesStore.push({\n      svg: svg,\n      instance: new SvgPanZoom(svg, options),\n    });\n\n    // Return just pushed instance\n    return instancesStore[\n      instancesStore.length - 1\n    ].instance.getPublicInstance();\n  }\n};\n\nmodule.exports = svgPanZoom;\n","import svgPanZoom, * as SvgPanZoom from \"@dash14/svg-pan-zoom\"\n\nexport interface Box {\n  top: number\n  bottom: number\n  left: number\n  right: number\n}\n\ninterface ViewArea {\n  box: Box\n  center: SvgPanZoom.Point\n}\n\nexport interface SvgPanZoomInstance extends SvgPanZoom.Instance {\n  fitToContents(): SvgPanZoomInstance\n  getViewArea(): ViewArea\n  getViewBox(): Box\n  setViewBox(box: Box): void\n  getRealZoom(): number\n  applyAbsoluteZoomLevel(zoomLevel: number, minZoomLevel: number, maxZoomLevel: number): void\n  setPanEnabled(enabled: boolean): SvgPanZoomInstance\n  setZoomEnabled(enabled: boolean): SvgPanZoomInstance\n}\n\nexport interface CustomEventOptions {\n  svgElement: SVGSVGElement;\n  instance: SvgPanZoomInstance;\n}\n\nexport interface CustomEventHandler {\n  init: (options: CustomEventOptions) => void;\n  haltEventListeners: string[];\n  destroy: (options: CustomEventOptions) => void;\n}\n\nexport interface SvgPanZoomOptions extends Omit<SvgPanZoom.Options, \"customEventsHandler\"> {\n  customEventsHandler?: CustomEventHandler; // (default null)\n}\n\nexport interface SvgPanZoomInternal extends SvgPanZoomInstance {\n  _isPanEnabled: boolean\n  _isZoomEnabled: boolean\n  _internalIsPanEnabled(): boolean\n  _internalEnablePan(): void\n  _internalDisablePan(): void\n  _internalIsZoomEnabled(): boolean\n  _internalEnableZoom(): void\n  _internalDisableZoom(): void\n}\n\nconst methods: Partial<SvgPanZoomInternal> = {\n  fitToContents(this: SvgPanZoomInternal) {\n    this.fit()\n      .center()\n      .zoomOut() // Zoom out two steps.\n      .zoomOut()\n    return this\n  },\n  getViewArea(this: SvgPanZoomInternal) {\n    const sizes = this.getSizes()\n    const pan = this.getPan()\n    const scale = sizes.realZoom\n    pan.x /= scale\n    pan.y /= scale\n    const viewport = {\n      width: sizes.width / scale,\n      height: sizes.height / scale,\n    }\n    return {\n      box: {\n        top: -pan.y,\n        bottom: viewport.height - pan.y,\n        left: -pan.x,\n        right: viewport.width - pan.x,\n      },\n      center: {\n        x: viewport.width / 2 - pan.x,\n        y: viewport.height / 2 - pan.y,\n      },\n    }\n  },\n  getViewBox(this: SvgPanZoomInternal): Box {\n    return this.getViewArea().box\n  },\n  setViewBox(this: SvgPanZoomInternal, box: Box) {\n    // Adjust zoom and pan to include the box.\n    // If the aspect ratio is different from the box, pan to\n    // include the box with keeping the center.\n    const width = box.right - box.left\n    const height = box.bottom - box.top\n    const { width: sizeWidth, height: sizeHeight } = this.getSizes()\n    const ratio = width / height\n    const currentRatio = sizeWidth / sizeHeight\n    const newWidth = ratio < currentRatio ? height * currentRatio : width\n    const newHeight = ratio > currentRatio ? width / currentRatio : height\n    const absoluteZoom = Math.min(\n      sizeWidth / newWidth,\n      sizeHeight / newHeight\n    )\n    const realZoom = this.getRealZoom()\n    const relativeZoom = this.getZoom()\n    const originalZoom = realZoom / relativeZoom\n    this.zoom(absoluteZoom / originalZoom)\n\n    const center = {\n      x: (box.left + width / 2) * absoluteZoom,\n      y: (box.top + height / 2) * absoluteZoom\n    }\n    this.pan({\n      x: -(center.x) + newWidth / 2 * absoluteZoom,\n      y: -(center.y) + newHeight / 2 * absoluteZoom\n    })\n  },\n  getRealZoom(this: SvgPanZoomInternal) {\n    return this.getSizes().realZoom\n  },\n  applyAbsoluteZoomLevel(this: SvgPanZoomInternal, zoomLevel: number, minZoomLevel: number, maxZoomLevel: number) {\n    // normalize\n    const min = Math.max(0.0001, minZoomLevel)\n    const max = Math.max(min, maxZoomLevel)\n    const zoom = Math.max(Math.min(max, zoomLevel), min)\n\n    const realZoom = this.getRealZoom()\n    const relativeZoom = this.getZoom()\n    const originalZoom = realZoom / relativeZoom\n\n    this.setMinZoom(min / originalZoom)\n      .setMaxZoom(max / originalZoom)\n      .zoom(zoom / originalZoom)\n  },\n  isPanEnabled(this: SvgPanZoomInternal) {\n    return this._isPanEnabled\n  },\n  enablePan(this: SvgPanZoomInternal) {\n    this._isPanEnabled = true\n    this._internalEnablePan()\n    return this\n  },\n  disablePan(this: SvgPanZoomInternal) {\n    this._isPanEnabled = false\n    this._internalDisablePan()\n    return this\n  },\n  isZoomEnabled(this: SvgPanZoomInternal) {\n    return this._isZoomEnabled\n  },\n  enableZoom(this: SvgPanZoomInternal) {\n    this._isZoomEnabled = true\n    this._internalEnableZoom()\n    return this\n  },\n  disableZoom(this: SvgPanZoomInternal) {\n    this._isZoomEnabled = false\n    this._internalDisableZoom()\n    return this\n  },\n  setPanEnabled(this: SvgPanZoomInternal, enabled: boolean) {\n    if (enabled) {\n      this.enablePan()\n    } else {\n      this.disablePan()\n    }\n    return this\n  },\n  setZoomEnabled(this: SvgPanZoomInternal, enabled: boolean) {\n    if (enabled) {\n      this.enableZoom()\n      this.enableDblClickZoom()\n    } else {\n      this.disableZoom()\n      this.disableDblClickZoom()\n    }\n    return this\n  },\n}\n\nfunction constructor(\n  svgPanZoom: SvgPanZoom.Instance,\n  options: SvgPanZoomOptions,\n): SvgPanZoomInternal {\n  const instance = svgPanZoom as SvgPanZoomInternal\n  instance._isPanEnabled = options.panEnabled ?? true\n  instance._isZoomEnabled = options?.zoomEnabled ?? true\n  instance._internalIsPanEnabled = instance.isPanEnabled\n  instance._internalEnablePan = instance.enablePan\n  instance._internalDisablePan = instance.disablePan\n  instance._internalIsZoomEnabled = instance.isZoomEnabled\n  instance._internalEnableZoom = instance.enableZoom\n  instance._internalDisableZoom = instance.disableZoom\n  Object.assign(svgPanZoom, methods)\n  return instance\n}\n\nexport function createSvgPanZoomEx(\n  svg: SVGElement,\n  options: SvgPanZoomOptions\n): SvgPanZoomInstance {\n\n  const userInit = options.customEventsHandler?.init ?? ((_: any) => {})\n  const userDestroy = options.customEventsHandler?.destroy ?? ((_: any) => {})\n  const haltEventListeners = options.customEventsHandler?.haltEventListeners ?? []\n\n  if (options.mouseWheelZoomEnabled === undefined) {\n    options.mouseWheelZoomEnabled = options.zoomEnabled\n  }\n\n  options.customEventsHandler = {\n    init: o => {\n      constructor(o.instance, options)\n      userInit(o)\n    },\n    destroy: o => userDestroy(o),\n    haltEventListeners\n  }\n\n  return svgPanZoom(svg, options as SvgPanZoom.Options) as SvgPanZoomInternal\n}\n","import { ref, Ref, onMounted, onUnmounted } from \"vue\"\nimport { nonNull } from \"@/common/common\"\nimport { createSvgPanZoomEx, SvgPanZoomInstance, SvgPanZoomOptions } from \"@/modules/svg-pan-zoom-ex\"\n\ntype Callback = () => void\n\nenum State {\n  INITIAL = 0,\n  MOUNTED = 1,\n  UNMOUNTED = 2\n}\n\nexport function useSvgPanZoom(svg: Ref<SVGSVGElement | undefined>, options: SvgPanZoomOptions) {\n  const instance = ref<SvgPanZoomInstance>()\n  let state = State.INITIAL\n  const mountedCallbacks: Callback[] = []\n  const unmountedCallbacks: Callback[] = []\n\n  const instanceMounted = () => {\n    state = State.MOUNTED\n    mountedCallbacks.forEach(c => c())\n    mountedCallbacks.length = 0 // clear\n  }\n\n  const instanceUnmounted = () => {\n    state = State.UNMOUNTED\n    unmountedCallbacks.forEach(c => c())\n    unmountedCallbacks.length = 0 // clear\n  }\n\n  onMounted(() => {\n    const element = nonNull(svg.value, \"<svg>\")\n    // hook init/destroy custom events\n    const userInit = options.customEventsHandler?.init ?? ((_: any) => {})\n    const userDestroy = options.customEventsHandler?.destroy ?? ((_: any) => {})\n    const haltEventListeners = options.customEventsHandler?.haltEventListeners ?? []\n\n    options.customEventsHandler = {\n      init: o => {\n        instance.value = o.instance\n        userInit(o)\n        instanceMounted()\n      },\n      destroy: o => {\n        instanceUnmounted()\n        userDestroy(o)\n      },\n      haltEventListeners\n    }\n\n    const initialize = () => {\n      const rect = element.getBoundingClientRect()\n      // In svg-pan-zoom, the shadow viewport is generated based with\n      // size on initialization. At this time, if the width and height\n      // are zero, an exception will occur during the calculation.\n      // Therefore, initialization is performed after allocating the area.\n      // Note that even after onMounted, the area is not allocated at\n      // the time of page switching with Nuxt.\n      if (rect.width !== 0 && rect.height !== 0) {\n        createSvgPanZoomEx(element, options)\n      } else {\n        setTimeout(initialize, 200)\n      }\n    }\n    initialize()\n  })\n\n  onUnmounted(() => {\n    instance.value?.destroy()\n    instance.value = undefined\n  })\n\n  const onSvgPanZoomMounted = (callback: Callback) => {\n    if (state === State.INITIAL) {\n      mountedCallbacks.push(callback)\n    } else if (state === State.MOUNTED) {\n      callback()\n    }\n  }\n\n  const onSvgPanZoomUnmounted = (callback: Callback) => {\n    if (state === State.INITIAL || state === State.MOUNTED) {\n      unmountedCallbacks.push(callback)\n    } else {\n      callback()\n    }\n  }\n\n  return { svgPanZoom: instance, onSvgPanZoomMounted, onSvgPanZoomUnmounted }\n}\n","import { provide, inject, InjectionKey, Ref, computed } from \"vue\"\nimport { nonNull } from \"@/common/common\"\nimport { ViewConfig } from \"@/common/configs\"\n\ninterface ZoomProvides {\n  zoomLevel: Ref<number>,\n  scale: Ref<number>\n}\n\nconst zoomLevelKey = Symbol(\"zoomLevel\") as InjectionKey<ZoomProvides>\n\nexport function provideZoomLevel(zoomLevel: Ref<number>, viewStyle: ViewConfig) {\n  const scale = computed(() => {\n    return viewStyle.scalingObjects ? 1 : (1 / zoomLevel.value)\n  })\n  provide(zoomLevelKey, {\n    zoomLevel,\n    scale\n  })\n  return { scale }\n}\n\nexport function useZoomLevel(): ZoomProvides {\n  return nonNull(inject(zoomLevelKey), \"zoomLevel\")\n}\n","import { nextTick, ref } from \"vue\"\n\ntype TimingFunction = \"ease\" | \"linear\" | \"ease-in\" | \"ease-out\" | \"ease-in-out\" | string\n\n/** Parameters of transition */\ninterface TransitionParameters {\n  enabled: boolean\n  duration: number\n  timingFunction: TimingFunction\n}\n\ntype Function = () => void | Promise<void>\n\nfunction isPromise(obj: any): boolean {\n  return obj instanceof Promise || (obj && typeof obj.then === \"function\")\n}\n\nexport function useTransitionWhile() {\n  let timerId: number | null = null\n  const transitionOption = ref<TransitionParameters>({\n    enabled: false,\n    duration: 300,\n    timingFunction: \"linear\"\n  })\n\n  function transitionWhile(\n    func: Function,\n    duration: number = 300,\n    timingFunction: TimingFunction = \"linear\"\n  ) {\n    if (timerId) {\n      clearTimeout(timerId)\n      timerId = null\n    }\n    transitionOption.value = {\n      enabled: true,\n      duration,\n      timingFunction\n    }\n\n    nextTick(async () => {\n      const promise = func()\n      if (isPromise(promise)) {\n        await promise\n      }\n\n      if (timerId) {\n        clearTimeout(timerId)\n      }\n      timerId = window?.setTimeout(() => {\n        transitionOption.value.enabled = false\n        timerId = null\n      }, duration)\n    })\n  }\n\n  return { transitionWhile, transitionOption }\n}\n\n","import { ref, Ref, watchEffect } from \"vue\"\nimport { InputPaths, Path } from \"@/common/types\"\n\nexport function useTranslatePathsToObject<T>(input: Ref<InputPaths>) {\n  const objects = ref<Record<string, Path>>({})\n\n  const isInCompatibilityModeForPath = ref(false)\n  let nextId = 1\n  const idStore = new Map<Path, string>()\n\n  // translate for compatibility\n  watchEffect(() => {\n    if (input.value instanceof Array) {\n      const containKeys = new Set<string>([])\n      objects.value = Object.fromEntries(\n        input.value.map(path => {\n          let id = path.id\n          if (!id) {\n            if (!isInCompatibilityModeForPath.value) {\n              isInCompatibilityModeForPath.value = true\n              console.warn(\n                \"[v-network-graph] Please specify the `id` field for the `Path` object.\" +\n                  \" Currently, this works for compatibility,\" +\n                  \" but in the future, the id field will be required.\"\n              )\n            }\n            id = idStore.get(path)\n            if (!id) {\n              id = \"path-\" + nextId++\n              idStore.set(path, id)\n            }\n          }\n          containKeys.add(id)\n          return [id, path]\n        })\n      )\n      if (isInCompatibilityModeForPath.value) {\n        for (const [path, id] of Array.from(idStore.entries())) {\n          if (!containKeys.has(id)) {\n            idStore.delete(path)\n          }\n        }\n      }\n    } else {\n      objects.value = input.value\n    }\n  })\n\n  return { objects, isInCompatibilityModeForPath }\n}\n","import { watch, reactive, ref, Ref } from \"vue\"\nimport isEqual from \"lodash-es/isEqual\"\nimport { Reactive } from \"../common/common\"\n\nexport function bindProp<T, K extends string & keyof T>(\n  props: T,\n  name: K,\n  emit: (event: `update:${K}`, ...args: any[]) => void,\n  filter?: (arg: T[K]) => T[K]\n): Ref<T[K]> {\n  // Build two-way binding ties.\n\n  // Since it is not always passed in props (emit does not\n  // rewrite it), always keep a ref for self management.\n\n  if (filter) {\n    const prop = ref<T[K]>(filter(props[name])) as Ref<T[K]>\n    const update = (filtered: T[K]) => {\n      if (!isEqual(filtered, prop.value)) {\n        prop.value = filtered\n      }\n      if (!isEqual(filtered, props[name])) {\n        emit(`update:${name}` as const, filtered)\n      }\n    }\n    watch(() => filter(prop.value), update)\n    watch(() => props[name],v => update(filter(v)))\n    if (prop.value !== props[name]) {\n      emit(`update:${name}` as const, prop.value)\n    }\n    return prop\n  }\n\n  const prop = ref<T[K]>(props[name]) as Ref<T[K]>\n  watch(\n    () => props[name],\n    v => {\n      if (!isEqual(v, prop.value)) {\n        prop.value = v\n      }\n    }\n  )\n  watch(prop, v => {\n    if (!isEqual(v, props[name])) {\n      emit(`update:${name}` as const, v)\n    }\n  })\n  return prop\n}\n\ntype KeysOfType<Obj, Val> = {\n  [K in keyof Obj]-?: Obj[K] extends Val ? K : never\n}[keyof Obj]\n\nexport function bindPropKeySet<T, K extends string & KeysOfType<T, string[]>>(\n  props: T,\n  name: K,\n  sourceObject: Ref<{ [name: string]: any }>,\n  emit: (event: `update:${K}`, ...args: any[]) => void\n): Reactive<Set<string>> {\n  // Generate two-way bindings for a given prop.\n  // Assumes that the specified prop indicates the key of the object.\n  const bound = reactive<Set<string>>(new Set())\n  watch(\n    () => props[name],\n    () => {\n      // Since it is not recognized as a string[] by type checking,\n      // use any for now.\n      const prop: string[] = props[name] as any\n      const filtered = prop.filter(n => n in sourceObject.value)\n      if (!isEqual(filtered, Array.from(bound))) {\n        bound.clear()\n        filtered.forEach(bound.add, bound)\n      }\n    },\n    { deep: true, immediate: true }\n  )\n  watch(bound, () => {\n    const array = Array.from(bound)\n    if (!isEqual(props[name], array)) {\n      emit(`update:${name}` as const, array)\n    }\n  })\n  return Reactive(bound)\n}\n","import { Point } from \"@/common/types\"\n\nexport function translateFromDomToSvgCoordinates(\n  svg: SVGSVGElement,\n  viewport: SVGGElement,\n  coordinates: Point\n): Point {\n  const point = svg.createSVGPoint()\n  point.x = coordinates.x\n  point.y = coordinates.y\n  const svgPoint = point.matrixTransform(viewport.getCTM()?.inverse())\n  return { x: svgPoint.x, y: svgPoint.y }\n}\n\nexport function translateFromSvgToDomCoordinates(\n  svg: SVGSVGElement,\n  viewport: SVGGElement,\n  coordinates: Point\n): Point {\n  const point = svg.createSVGPoint()\n  point.x = coordinates.x\n  point.y = coordinates.y\n  const domPoint = point.matrixTransform(viewport.getCTM() as DOMMatrixInit)\n  return { x: domPoint.x, y: domPoint.y }\n}\n","<script setup lang=\"ts\">\nimport { PropType, ref, watchEffect } from \"vue\"\nimport { AnyShapeStyle } from \"@/common/configs\"\nimport { useZoomLevel } from \"@/composables/zoom\"\nimport { applyScaleToDasharray } from \"@/utils/visual\"\n\nconst props = defineProps({\n  baseX: {\n    type: Number,\n    default: 0,\n  },\n  baseY: {\n    type: Number,\n    default: 0,\n  },\n  config: {\n    type: Object as PropType<AnyShapeStyle>,\n    required: true,\n  },\n})\n\nconst { scale } = useZoomLevel()\n\nconst x = ref(props.baseX)\nconst y = ref(props.baseY)\nconst strokeWidth = ref(0)\nconst strokeColor = ref(\"#000000\")\nconst strokeDasharray = ref<string | number | undefined>(undefined)\nconst radius = ref(0)\nconst width = ref(0)\nconst height = ref(0)\nconst borderRadius = ref(0)\n\nwatchEffect(() => {\n  const s = scale.value\n  strokeWidth.value = props.config.strokeWidth * s\n  strokeColor.value = props.config.strokeColor ?? \"none\"\n  strokeDasharray.value = applyScaleToDasharray(props.config.strokeDasharray, s)\n\n  if (props.config.type === \"circle\") {\n    x.value = props.baseX\n    y.value = props.baseY\n    radius.value = props.config.radius * s\n  } else {\n    width.value = props.config.width * s\n    height.value = props.config.height * s\n    borderRadius.value = props.config.borderRadius * s\n    x.value = props.baseX - width.value / 2\n    y.value = props.baseY - height.value / 2\n  }\n})\n\ndefineExpose({\n  x,\n  y,\n  strokeWidth,\n  strokeColor,\n  strokeDasharray,\n  radius,\n  width,\n  height,\n  borderRadius,\n})\n</script>\n\n<template>\n  <circle\n    v-if=\"config.type === 'circle'\"\n    class=\"v-shape-circle\"\n    :cx=\"x\"\n    :cy=\"y\"\n    :r=\"radius\"\n    :fill=\"config.color\"\n    :stroke=\"strokeColor\"\n    :stroke-width=\"strokeWidth\"\n    :stroke-dasharray=\"strokeDasharray\"\n  />\n  <rect\n    v-else\n    class=\"v-shape-rect\"\n    :x=\"x\"\n    :y=\"y\"\n    :width=\"width\"\n    :height=\"height\"\n    :rx=\"borderRadius\"\n    :ry=\"borderRadius\"\n    :fill=\"config.color\"\n    :stroke=\"strokeColor\"\n    :stroke-width=\"strokeWidth\"\n    :stroke-dasharray=\"strokeDasharray\"\n  />\n</template>\n","<script setup lang=\"ts\">\nimport { computed, PropType, reactive, Ref, ref, useAttrs, watch } from \"vue\"\nimport { onMounted, onUnmounted } from \"vue\"\nimport { LabelStyle } from \"@/common/configs\"\nimport { useZoomLevel } from \"@/composables/zoom\"\n\ntype Rect = { x: number; y: number; width: number; height: number }\n\nfunction updateBackgroundPosition(\n  element: SVGTextElement,\n  pos: Rect,\n  transform: Ref<string | undefined>\n) {\n  const bbox = element.getBBox()\n  pos.x = bbox.x\n  pos.y = bbox.y\n  pos.width = bbox.width\n  pos.height = bbox.height\n  transform.value = element.getAttribute(\"transform\") ?? undefined\n}\n\nfunction enableMutationObserver(\n  element: SVGTextElement,\n  pos: Rect,\n  transform: Ref<string | undefined>\n) {\n  const observer = new MutationObserver(() => {\n    updateBackgroundPosition(element, pos, transform)\n  })\n  observer.observe(element, {\n    attributes: true,\n    attributeFilter: [\"x\", \"y\", \"transform\", \"font-size\"],\n  })\n  updateBackgroundPosition(element, pos, transform)\n  return observer\n}\n\nconst props = defineProps({\n  text: {\n    type: String,\n    required: true,\n  },\n  x: {\n    type: Number,\n    required: true,\n  },\n  y: {\n    type: Number,\n    required: true,\n  },\n  dominantBaseline: {\n    type: String,\n    required: false,\n    default: \"central\"\n  },\n  config: {\n    type: Object as PropType<LabelStyle>,\n    required: true,\n  },\n})\n\nconst attrs = useAttrs()\n\nconst { scale } = useZoomLevel()\n\nconst texts = computed(() => props.text?.toString().split(/\\r?\\n/) ?? \"\")\n\nconst fontSize = computed(() => {\n  return attrs['font-size'] as number ?? (props.config.fontSize * scale.value)\n})\n\nconst lineHeight = computed(() => fontSize.value * props.config.lineHeight)\n\nconst topDeltaY = computed(() => {\n  const dominantBaseline = props.dominantBaseline\n  if (dominantBaseline === \"hanging\") {\n    return 0\n  } else if (dominantBaseline === \"central\") {\n    return -(lineHeight.value * (texts.value.length - 1)) / 2\n  } else {\n    // \"auto\", \"text-top\"\n    return -lineHeight.value * (texts.value.length - 1)\n  }\n})\n\nconst element = ref<SVGTextElement>()\nconst transform = ref(\"\") // copy from <text>\nconst pos = reactive<Rect>({ x: 0, y: 0, width: 0, height: 0 })\nconst backgroundRectPos = computed(() => {\n  const config = props.config.background\n  if (!config) return pos\n  let paddingVertical, paddingHorizontal\n  if (config.padding instanceof Object) {\n    paddingVertical = config.padding.vertical\n    paddingHorizontal = config.padding.horizontal\n  } else {\n    paddingVertical = config.padding ?? 0\n    paddingHorizontal = config.padding ?? 0\n  }\n  const lineMargin = lineHeight.value - fontSize.value\n  return {\n    x: pos.x - paddingHorizontal * scale.value,\n    y: pos.y - paddingVertical * scale.value - (lineMargin / 2),\n    width: pos.width + paddingHorizontal * 2 * scale.value,\n    height: pos.height + paddingVertical * 2 * scale.value + lineMargin,\n  }\n})\n\nlet observer: MutationObserver | undefined\nconst updateObserver = () => {\n  if (props.config.background && props.config.background.visible) {\n    if (!observer && element.value) {\n      observer = enableMutationObserver(element.value, pos, transform)\n    }\n  } else {\n    observer?.disconnect()\n    observer = undefined\n  }\n}\n\nonMounted(() => updateObserver())\nwatch(\n  () => props.config.background && props.config.background.visible,\n  (v, prev) => {\n    if (v == prev) return\n    updateObserver()\n  }\n)\nonUnmounted(() => {\n  observer?.disconnect()\n  observer = undefined\n})\n\ndefineExpose({ fontSize, element, transform, backgroundRectPos, scale })\n</script>\n\n<template>\n  <rect\n    v-if=\"config.background && config.background.visible\"\n    class=\"v-text-background\"\n    v-bind=\"backgroundRectPos\"\n    :rx=\"(config.background?.borderRadius ?? 0) * scale\"\n    :ry=\"(config.background?.borderRadius ?? 0) * scale\"\n    :fill=\"config.background?.color ?? '#ffffff'\"\n    :transform=\"transform\"\n  />\n  <text\n    ref=\"element\"\n    class=\"v-text\"\n    v-bind=\"$attrs\"\n    :x=\"x\"\n    :y=\"y\"\n    :dominant-baseline=\"dominantBaseline\"\n    :font-family=\"$attrs['font-family'] ? `${$attrs['font-family']}` : config.fontFamily\"\n    :font-size=\"fontSize\"\n    :fill=\"$attrs.fill ? `${$attrs.fill}` : config.color\"\n  >\n    <template v-if=\"texts.length <= 1\">\n      {{ text }}\n    </template>\n    <template v-else>\n      <!--\n        In Safari, it seems that `<tspan>` does not inherit the\n        `dominant-baseline` attribute from its parent `<text>` element.\n        Therefore, set the dominant-baseline directly on `<tspan>`.\n        Chrome and Firefox do not have this issue.\n        refs. https://stackoverflow.com/questions/41985077/centering-an-svg-element-chrome-vs-safari/42023579#42023579\n      -->\n      <tspan\n        v-for=\"(t, i) in texts\"\n        :key=\"i\"\n        :x=\"x\"\n        :dy=\"i == 0 ? topDeltaY : lineHeight\"\n        :dominant-baseline=\"dominantBaseline\"\n      >{{ t }}</tspan>\n    </template>\n  </text>\n</template>\n","\nexport default (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n}\n","<script setup lang=\"ts\">\nimport { computed, PropType, ref, watchEffect } from \"vue\"\nimport { Position } from \"@/common/types\"\nimport { NodeLabelDirection } from \"@/common/configs\"\nimport { NodeState } from \"@/models/node\"\nimport { useNodeConfig } from \"@/composables/config\"\nimport { useMouseOperation } from \"@/composables/mouse\"\nimport { useZoomLevel } from \"@/composables/zoom\"\nimport VShape from \"@/components/base/VShape.vue\"\nimport VText from \"@/components/base/VLabelText.vue\"\n\nconst props = defineProps({\n  id: {\n    type: String,\n    required: true,\n  },\n  state: {\n    type: Object as PropType<NodeState>,\n    required: true,\n  },\n  pos: {\n    type: Object as PropType<Position>,\n    required: false,\n    default: undefined,\n  },\n})\n\nconst x = computed(() => props.pos?.x || 0)\nconst y = computed(() => props.pos?.y || 0)\n\nconst config = useNodeConfig()\nconst { scale } = useZoomLevel()\n\nconst {\n  handleNodePointerDownEvent,\n  handleNodePointerOverEvent,\n  handleNodePointerOutEvent,\n  handleNodeClickEvent,\n  handleNodeDoubleClickEvent,\n  handleNodeContextMenu,\n} = useMouseOperation()\n\nconst labelVisibility = computed(() => {\n  if (props.state.label.visible) {\n    return props.state.labelText ?? false\n  }\n  return false\n})\n\nconst labelMargin = computed(() => {\n  if (props.state.label.direction === NodeLabelDirection.CENTER) {\n    return 0\n  } else {\n    return props.state.label.margin * scale.value\n  }\n})\n\nconst labelShiftV = ref(0) // Amount of label shift (vertical)\nconst labelShiftH = ref(0) // Amount of label shift (horizontal)\nconst labelDiagonalShiftV = ref(0) // Amount of shift in diagonal direction (vertical)\nconst labelDiagonalShiftH = ref(0) // Amount of shift in diagonal direction (horizontal)\n\nwatchEffect(() => {\n  const s = scale.value\n  const shape = props.state.shape\n  if (shape.type == \"circle\") {\n    const radius = shape.radius * s\n    const m = radius + labelMargin.value\n    const diagonalMargin = Math.sqrt(m ** 2 / 2)\n    labelShiftV.value = radius + labelMargin.value\n    labelShiftH.value = radius + labelMargin.value\n    labelDiagonalShiftV.value = diagonalMargin\n    labelDiagonalShiftH.value = diagonalMargin\n  } else {\n    const borderRadius = shape.borderRadius * s\n    const width = shape.width * s\n    const height = shape.height * s\n    const m = borderRadius + labelMargin.value\n    const diagonalMargin = Math.sqrt(m ** 2 / 2)\n    labelShiftV.value = height / 2 + labelMargin.value\n    labelShiftH.value = width / 2 + labelMargin.value\n    labelDiagonalShiftV.value = height / 2 - borderRadius + diagonalMargin\n    labelDiagonalShiftH.value = width / 2 - borderRadius + diagonalMargin\n  }\n})\n\nconst textAnchor = computed(() => {\n  switch (props.state.label.direction) {\n    case NodeLabelDirection.CENTER:\n    case NodeLabelDirection.NORTH:\n    case NodeLabelDirection.SOUTH:\n      return \"middle\"\n    case NodeLabelDirection.EAST:\n    case NodeLabelDirection.NORTH_EAST:\n    case NodeLabelDirection.SOUTH_EAST:\n      return \"start\"\n    case NodeLabelDirection.WEST:\n    case NodeLabelDirection.NORTH_WEST:\n    case NodeLabelDirection.SOUTH_WEST:\n    default:\n      return \"end\"\n  }\n})\nconst dominantBaseline = computed(() => {\n  switch (props.state.label.direction) {\n    case NodeLabelDirection.NORTH:\n    case NodeLabelDirection.NORTH_EAST:\n    case NodeLabelDirection.NORTH_WEST:\n      return \"text-top\"\n    case NodeLabelDirection.SOUTH:\n    case NodeLabelDirection.SOUTH_EAST:\n    case NodeLabelDirection.SOUTH_WEST:\n      return \"hanging\"\n    case NodeLabelDirection.CENTER:\n    case NodeLabelDirection.EAST:\n    case NodeLabelDirection.WEST:\n    default:\n      return \"central\"\n  }\n})\nconst labelX = computed(() => {\n  switch (props.state.label.direction) {\n    case NodeLabelDirection.CENTER:\n    case NodeLabelDirection.NORTH:\n    case NodeLabelDirection.SOUTH:\n      return 0\n    case NodeLabelDirection.EAST:\n      return labelShiftH.value\n    case NodeLabelDirection.WEST:\n      return -labelShiftH.value\n    case NodeLabelDirection.NORTH_EAST:\n    case NodeLabelDirection.SOUTH_EAST:\n      return labelDiagonalShiftH.value\n    case NodeLabelDirection.NORTH_WEST:\n    case NodeLabelDirection.SOUTH_WEST:\n    default:\n      return -labelDiagonalShiftH.value\n  }\n})\nconst labelY = computed(() => {\n  switch (props.state.label.direction) {\n    case NodeLabelDirection.NORTH:\n      return -labelShiftV.value\n    case NodeLabelDirection.SOUTH:\n      return labelShiftV.value\n    case NodeLabelDirection.CENTER:\n    case NodeLabelDirection.EAST:\n    case NodeLabelDirection.WEST:\n      return 0\n    case NodeLabelDirection.NORTH_EAST:\n    case NodeLabelDirection.NORTH_WEST:\n      return -labelDiagonalShiftV.value\n    case NodeLabelDirection.SOUTH_EAST:\n    case NodeLabelDirection.SOUTH_WEST:\n    default:\n      return labelDiagonalShiftV.value\n  }\n})\n\ndefineExpose({\n  x,\n  y,\n  config,\n  labelVisibility,\n  handleNodePointerDownEvent,\n  handleNodePointerOverEvent,\n  handleNodePointerOutEvent,\n  handleNodeClickEvent,\n  handleNodeDoubleClickEvent,\n  handleNodeContextMenu,\n  textAnchor,\n  dominantBaseline,\n  labelX,\n  labelY,\n  scale,\n})\n</script>\n\n<template>\n  <g\n    :class=\"{ 'v-node': true, hover: state.hovered, selected: state.selected }\"\n    :transform=\"`translate(${x} ${y})`\"\n    @pointerdown.stop=\"handleNodePointerDownEvent(id, $event)\"\n    @pointerenter.passive=\"handleNodePointerOverEvent(id, $event)\"\n    @pointerleave.passive=\"handleNodePointerOutEvent(id, $event)\"\n    @click.stop=\"handleNodeClickEvent(id, $event)\"\n    @dblclick.stop=\"handleNodeDoubleClickEvent(id, $event)\"\n    @contextmenu=\"handleNodeContextMenu(id, $event)\"\n  >\n    <slot\n      name=\"override-node\"\n      :node-id=\"id\"\n      :scale=\"scale\"\n      :config=\"state.shape\"\n      :class=\"{ draggable: state.draggable, selectable: state.selectable }\"\n    >\n      <v-shape\n        :config=\"state.shape\"\n        :class=\"{ draggable: state.draggable, selectable: state.selectable }\"\n      />\n    </slot>\n    <slot\n      v-if=\"labelVisibility\"\n      name=\"override-node-label\"\n      :node-id=\"id\"\n      :scale=\"scale\"\n      :text=\"state.labelText\"\n      :x=\"labelX\"\n      :y=\"labelY\"\n      :config=\"state.label\"\n      :shape=\"state.shape\"\n      :text-anchor=\"textAnchor\"\n      :dominant-baseline=\"dominantBaseline\"\n    >\n      <v-text\n        :text=\"state.labelText\"\n        :x=\"labelX\"\n        :y=\"labelY\"\n        :config=\"state.label\"\n        :text-anchor=\"textAnchor\"\n        :dominant-baseline=\"dominantBaseline\"\n      />\n    </slot>\n  </g>\n</template>\n\n<style lang=\"scss\" scoped>\n$transition: 0.1s linear;\n\n:where(.v-shape-circle) {\n  pointer-events: none;\n  transition: fill $transition, stroke $transition, stroke-width $transition,\n  r $transition;\n}\n:where(.v-shape-rect) {\n  pointer-events: none;\n  transition: fill $transition, stroke $transition, stroke-width $transition,\n    x $transition, y $transition, width $transition, height $transition;\n}\n.v-node {\n  :deep(.draggable),\n  :deep(.selectable) {\n    pointer-events: all;\n    cursor: pointer;\n  }\n  :deep(.v-text) {\n    pointer-events: none;\n    user-select: none;\n    cursor: default;\n  }\n  :where(.v-text) {\n    transition: x $transition, y $transition;\n  }\n}\n\n</style>\n","<script setup lang=\"ts\">\nimport { computed, PropType, reactive, watchEffect } from \"vue\"\nimport { Position } from \"@/common/types\"\nimport { CircleShapeStyle, RectangleShapeStyle, ShapeStyle } from \"@/common/configs\"\nimport { NodeState } from \"@/models/node\"\nimport { useNodeConfig } from \"@/composables/config\"\nimport VShape from \"@/components/base/VShape.vue\"\n\nconst props = defineProps({\n  id: {\n    type: String,\n    required: true,\n  },\n  state: {\n    type: Object as PropType<NodeState>,\n    required: true,\n  },\n  pos: {\n    type: Object as PropType<Position>,\n    required: false,\n    default: undefined,\n  },\n})\n\nconst x = computed(() => props.pos?.x || 0)\nconst y = computed(() => props.pos?.y || 0)\n\nconst config = useNodeConfig()\nconst shapeConfig = reactive<ShapeStyle>({} as any)\n\nwatchEffect(() => {\n  const shapeStyle = props.state.shape\n  if (shapeStyle.type === \"circle\") {\n    const shape: CircleShapeStyle = {\n      type: \"circle\",\n      radius:\n        shapeStyle.radius +\n        (shapeStyle.strokeWidth ?? 0) / 2 +\n        config.focusring.padding +\n        config.focusring.width / 2,\n      color: \"none\",\n      strokeWidth: config.focusring.width,\n      strokeColor: config.focusring.color,\n      strokeDasharray: config.focusring.dasharray,\n    }\n    Object.assign(shapeConfig, shape)\n  } else {\n    const shape: RectangleShapeStyle = {\n      type: \"rect\",\n      width:\n        shapeStyle.width +\n        (shapeStyle.strokeWidth ?? 0) +\n        config.focusring.padding * 2 +\n        config.focusring.width,\n      height:\n        shapeStyle.height +\n        (shapeStyle.strokeWidth ?? 0) +\n        config.focusring.padding * 2 +\n        config.focusring.width,\n      borderRadius:\n        shapeStyle.borderRadius > 0 ? shapeStyle.borderRadius + config.focusring.padding : 0,\n      color: \"none\",\n      strokeWidth: config.focusring.width,\n      strokeColor: config.focusring.color,\n      strokeDasharray: config.focusring.dasharray,\n    }\n    Object.assign(shapeConfig, shape)\n  }\n})\n\ndefineExpose({ x, y, shapeConfig })\n</script>\n\n<template>\n  <v-shape\n    class=\"v-node-focus-ring\"\n    :base-x=\"x\"\n    :base-y=\"y\"\n    :config=\"shapeConfig\"\n  />\n</template>\n\n<style lang=\"scss\" scoped>\n$transition: 0.1s linear;\n\n.v-node-focus-ring {\n  pointer-events: none;\n}\n\n:where(.v-shape-circle) {\n  transition: r $transition;\n}\n:where(.v-shape-rect) {\n  transition: x $transition, y $transition, width $transition, height $transition;\n}\n:where(.dragging .v-shape-circleg),\n:where(.dragging .v-shape-rect) {\n  transition: none;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, PropType } from \"vue\"\nimport { Position } from \"@/common/types\";\nimport { StrokeStyle } from \"@/common/configs\"\nimport { useZoomLevel } from \"@/composables/zoom\"\nimport { applyScaleToDasharray, getDasharrayUnit } from \"@/utils/visual\"\n\nconst props = defineProps({\n  p1: {\n    type: Object as PropType<Position>,\n    required: true,\n  },\n  p2: {\n    type: Object as PropType<Position>,\n    required: true,\n  },\n  config: {\n    type: Object as PropType<StrokeStyle>,\n    required: true,\n  },\n})\n\nconst { scale } = useZoomLevel()\n\nconst strokeWidth = computed(() => {\n  return props.config.width * scale.value\n})\n\nconst strokeDasharray = computed(() => {\n  return applyScaleToDasharray(props.config.dasharray, scale.value)\n})\n\nconst animationSpeed = computed(() => {\n  const speed = props.config.animate\n    ? getDasharrayUnit(props.config.dasharray) * props.config.animationSpeed * scale.value\n    : false\n  return speed ? `--animation-speed:${speed}` : undefined\n})\n\ndefineExpose({ strokeWidth, strokeDasharray, animationSpeed })\n</script>\n\n<template>\n  <path\n    :class=\"{ 'v-line': true, animate: config.animate }\"\n    :d=\"`M ${p1.x} ${p1.y} L ${p2.x} ${p2.y}`\"\n    :stroke=\"config.color\"\n    :stroke-width=\"strokeWidth\"\n    :stroke-dasharray=\"strokeDasharray\"\n    :stroke-linecap=\"config.linecap\"\n    :style=\"animationSpeed\"\n  />\n</template>\n\n<style scoped>\n.v-line.animate {\n  --animation-speed: 100;\n  animation: dash 10s linear infinite;\n  stroke-dashoffset: var(--animation-speed);\n}\n@keyframes dash {\n  to {\n    stroke-dashoffset: 0;\n  }\n}\n</style>\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nexport default baseSlice;\n","import baseSlice from './_baseSlice.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport toInteger from './toInteger.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * Creates an array of elements split into groups the length of `size`.\n * If `array` can't be split evenly, the final chunk will be the remaining\n * elements.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to process.\n * @param {number} [size=1] The length of each chunk\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the new array of chunks.\n * @example\n *\n * _.chunk(['a', 'b', 'c', 'd'], 2);\n * // => [['a', 'b'], ['c', 'd']]\n *\n * _.chunk(['a', 'b', 'c', 'd'], 3);\n * // => [['a', 'b', 'c'], ['d']]\n */\nfunction chunk(array, size, guard) {\n  if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n    size = 1;\n  } else {\n    size = nativeMax(toInteger(size), 0);\n  }\n  var length = array == null ? 0 : array.length;\n  if (!length || size < 1) {\n    return [];\n  }\n  var index = 0,\n      resIndex = 0,\n      result = Array(nativeCeil(length / size));\n\n  while (index < length) {\n    result[resIndex++] = baseSlice(array, index, (index += size));\n  }\n  return result;\n}\n\nexport default chunk;\n","<script setup lang=\"ts\">\nimport { computed, PropType } from \"vue\"\nimport { StrokeStyle } from \"@/common/configs\"\nimport { EdgeState } from \"@/models/edge\"\nimport { useZoomLevel } from \"@/composables/zoom\"\nimport { applyScaleToDasharray, getDasharrayUnit } from \"@/utils/visual\"\nimport chunk from \"lodash-es/chunk\"\n\nconst props = defineProps({\n  state: {\n    type: Object as PropType<EdgeState>,\n    required: true,\n  },\n  config: {\n    type: Object as PropType<StrokeStyle>,\n    required: true,\n  },\n  markerStart: {\n    type: String,\n    required: false,\n    default: undefined\n  },\n  markerEnd: {\n    type: String,\n    required: false,\n    default: undefined\n  }\n})\n\nconst { scale } = useZoomLevel()\n\nconst pathD = computed(() => {\n  const p = props.state.position\n  const points = [ ...props.state.curve?.control ?? [], { x: p.p2.x, y: p.p2.y }]\n  const d: string[] = []\n  d.push(`M ${p.p1.x} ${p.p1.y}`)\n  chunk(points, 2).forEach(([p1, p2]) => d.push(`Q ${p1.x} ${p1.y} ${p2.x} ${p2.y}`))\n  return d.join(\" \")\n})\n\nconst strokeWidth = computed(() => {\n  return props.config.width * scale.value\n})\n\nconst strokeDasharray = computed(() => {\n  return applyScaleToDasharray(props.config.dasharray, scale.value)\n})\n\nconst animationSpeed = computed(() => {\n  const speed = props.config.animate\n    ? getDasharrayUnit(props.config.dasharray) * props.config.animationSpeed * scale.value\n    : false\n  return speed ? `--animation-speed:${speed}` : undefined\n})\n\ndefineExpose({ strokeWidth, strokeDasharray, animationSpeed })\n</script>\n\n<template>\n  <!-- <circle\n    v-if=\"state.curve\"\n    :cx=\"state.curve.circle.center.x\"\n    :cy=\"state.curve.circle.center.y\"\n    :r=\"state.curve.circle.radius\"\n    fill=\"#ff000080\"\n  />\n  <circle\n    v-for=\"cp in state.curve?.control\"\n    :key=\"JSON.stringify(cp)\"\n    :cx=\"cp.x\"\n    :cy=\"cp.y\"\n    :r=\"2\"\n    fill=\"#0000ff\"\n  /> -->\n  <path\n    :class=\"{ 'v-line': true, animate: config.animate }\"\n    :d=\"pathD\"\n    fill=\"none\"\n    :stroke=\"config.color\"\n    :stroke-width=\"strokeWidth\"\n    :stroke-dasharray=\"strokeDasharray\"\n    :stroke-linecap=\"config.linecap\"\n    :style=\"animationSpeed\"\n    :marker-start=\"markerStart\"\n    :marker-end=\"markerEnd\"\n  />\n</template>\n\n<style scoped>\n.v-line.animate {\n  --animation-speed: 100;\n  animation: dash 10s linear infinite;\n  stroke-dashoffset: var(--animation-speed);\n}\n@keyframes dash {\n  to {\n    stroke-dashoffset: 0;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { PropType } from \"vue\"\nimport { Position } from \"@/common/types\"\nimport { EdgeState } from \"@/models/edge\"\nimport { useEdgeConfig } from \"@/composables/config\"\nimport VLine from \"@/components/base/VLine.vue\"\nimport VEdgeCurved from \"./VEdgeCurved.vue\"\n\ndefineProps({\n  id: {\n    type: String,\n    required: true,\n  },\n  state: {\n    type: Object as PropType<EdgeState>,\n    required: true,\n  },\n  sourcePos: {\n    type: Object as PropType<Position>,\n    required: false,\n    default: undefined,\n  },\n  targetPos: {\n    type: Object as PropType<Position>,\n    required: false,\n    default: undefined,\n  },\n})\n\nconst config = useEdgeConfig()\n\ndefineExpose({ config })\n</script>\n\n<template>\n  <v-line\n    v-if=\"config.type == 'straight' || !state.curve\"\n    v-bind=\"state.position\"\n    :class=\"{ selectable: state.selectable, hover: state.hovered, selected: state.selected }\"\n    :config=\"state.line.stroke\"\n    :marker-start=\"state.sourceMarkerId ? `url('#${state.sourceMarkerId}')` : undefined\"\n    :marker-end=\"state.targetMarkerId ? `url('#${state.targetMarkerId}')` : undefined\"\n  />\n  <v-edge-curved\n    v-else\n    :class=\"{ selectable: state.selectable, hover: state.hovered, selected: state.selected }\"\n    :state=\"state\"\n    :config=\"state.line.stroke\"\n    :marker-start=\"state.sourceMarkerId ? `url('#${state.sourceMarkerId}')` : undefined\"\n    :marker-end=\"state.targetMarkerId ? `url('#${state.targetMarkerId}')` : undefined\"\n  />\n</template>\n\n<style lang=\"scss\" scoped>\n$transition: 0.1s linear;\n\n:where(.v-line) {\n  transition: stroke $transition, stroke-width $transition;\n  pointer-events: none;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, PropType, ref, watchEffect } from \"vue\"\nimport { Edges, NodePositions, LinePosition, Position } from \"@/common/types\"\nimport { Config } from \"@/common/configs\"\nimport { useEdgeConfig } from \"@/composables/config\"\nimport { useStates } from \"@/composables/state\"\nimport { useMouseOperation } from \"@/composables/mouse\"\nimport VLine from \"@/components/base/VLine.vue\"\nimport VShape from \"@/components/base/VShape.vue\"\nimport VText from \"@/components/base/VLabelText.vue\"\n\nconst props = defineProps({\n  edges: {\n    type: Object as PropType<Edges>,\n    required: true,\n  },\n  layouts: {\n    type: Object as PropType<NodePositions>,\n    required: true,\n  },\n})\n\nconst config = useEdgeConfig()\nconst {\n  handleEdgesPointerDownEvent,\n  handleEdgesPointerOverEvent,\n  handleEdgesPointerOutEvent,\n  handleEdgesClickEvent,\n  handleEdgesDoubleClickEvent,\n  handleEdgesContextMenu,\n} = useMouseOperation()\n\nconst { edgeStates } = useStates()\n\n// Since the specified edges are in the same pair,\n// get the first one and draw it.\nconst pos = ref<LinePosition>({ p1: { x: 0, y: 0 }, p2: { x: 0, y: 0 } })\nconst centerPos = ref<Position>({ x: 0, y: 0 })\n\nwatchEffect(() => {\n  const edgeId = Object.keys(props.edges).find(edgeId => edgeId in edgeStates)\n  if (edgeId) {\n    pos.value = edgeStates[edgeId].position\n    centerPos.value = {\n      x: (pos.value.p1.x + pos.value.p2.x) / 2,\n      y: (pos.value.p1.y + pos.value.p2.y) / 2,\n    }\n  }\n})\n\nconst edgeIds = computed(() => Object.keys(props.edges))\nconst labelConfig = computed(() => Config.values(config.summarized.label, props.edges))\nconst shapeConfig = computed(() => Config.values(config.summarized.shape, props.edges))\nconst strokeConfig = computed(() => Config.values(config.summarized.stroke, props.edges))\n\nconst hovered = computed(() => edgeIds.value.some(edge => edgeStates[edge].hovered))\nconst selectable = computed(() => edgeIds.value.some(edge => edgeStates[edge].selectable))\nconst selected = computed(() => edgeIds.value.some(edge => edgeStates[edge].selected))\n\ndefineExpose({\n  config,\n  pos,\n  centerPos,\n  handleEdgesPointerDownEvent,\n  handleEdgesPointerOverEvent,\n  handleEdgesPointerOutEvent,\n  handleEdgesClickEvent,\n  handleEdgesDoubleClickEvent,\n  handleEdgesContextMenu,\n  hovered,\n  selectable,\n  selected,\n})\n</script>\n\n<template>\n  <g\n    :class=\"{ 'v-line-summarized': true, hovered, selectable, selected }\"\n    @pointerdown.stop=\"handleEdgesPointerDownEvent(edgeIds, $event)\"\n    @pointerenter.passive=\"handleEdgesPointerOverEvent(edgeIds, $event)\"\n    @pointerleave.passive=\"handleEdgesPointerOutEvent(edgeIds, $event)\"\n    @click.stop=\"handleEdgesClickEvent(edgeIds, $event)\"\n    @dblclick.stop=\"handleEdgesDoubleClickEvent(edgeIds, $event)\"\n    @contextmenu=\"handleEdgesContextMenu(edgeIds, $event)\"\n  >\n    <v-line v-bind=\"pos\" :config=\"strokeConfig\" />\n    <v-shape :base-x=\"centerPos.x\" :base-y=\"centerPos.y\" :config=\"shapeConfig\" />\n    <v-text\n      :text=\"Object.keys(edges).length.toString()\"\n      :x=\"centerPos.x\"\n      :y=\"centerPos.y\"\n      :config=\"labelConfig\"\n      text-anchor=\"middle\"\n      dominant-baseline=\"central\"\n    />\n  </g>\n</template>\n\n<style lang=\"scss\" scoped>\n.v-line-summarized {\n  &.selectable {\n    cursor: pointer;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { useStates, isSummarizedEdges } from \"@/composables/state\"\nimport VEdge from \"./VEdge.vue\"\nimport VEdgeSummarized from \"./VEdgeSummarized.vue\"\n\nconst { edgeStates, edgeZOrderedList, edgeGroupStates, layouts } = useStates()\n\n// type FlattenEdge = {\n//     key: string\n//     summarize: true\n//     edges: Edges\n//     id?: undefined\n//     edge?: undefined\n// } | {\n//     key: string\n//     summarize: false\n//     edges?: undefined\n//     id: string\n//     edge: Edge\n// }\n\n// const flattenEdges = computed(() => {\n//   const results: FlattenEdge[] = []\n//   for (const [key, {summarize, edges}] of Object.entries(edgeGroupStates.edgeGroups)) {\n//     if (summarize) {\n//       results.push({ key, summarize, edges })\n//     } else {\n//       results.push(...Object.entries(edges).map(([id, edge]) => ({ key, summarize, id, edge })))\n//     }\n//   }\n//   return results\n// })\n\ndefineExpose({ edgeStates, edgeZOrderedList, edgeGroupStates, layouts })\n</script>\n\n<template>\n  <template v-for=\"entry in edgeZOrderedList\">\n    <template v-if=\"isSummarizedEdges(entry)\">\n      <v-edge-summarized\n        :key=\"entry.key\"\n        :edges=\"entry.group.edges\"\n        :layouts=\"layouts.nodes\"\n      />\n    </template>\n    <template v-else>\n      <v-edge\n        :key=\"entry.key\"\n        :id=\"entry.key\"\n        :state=\"edgeStates[entry.key]\"\n        :source-pos=\"layouts.nodes[entry.edge.source]\"\n        :target-pos=\"layouts.nodes[entry.edge.target]\"\n      />\n    </template>\n  </template>\n</template>\n","<script setup lang=\"ts\">\nimport { computed, PropType } from \"vue\"\nimport { Position } from \"@/common/types\"\nimport { EdgeState } from \"@/models/edge\"\nimport { useEdgeConfig } from \"@/composables/config\"\nimport { useMouseOperation } from \"@/composables/mouse\"\nimport { useZoomLevel } from \"@/composables/zoom\"\nimport chunk from \"lodash-es/chunk\"\n\nconst props = defineProps({\n  id: {\n    type: String,\n    required: true,\n  },\n  state: {\n    type: Object as PropType<EdgeState>,\n    required: true,\n  },\n  sourcePos: {\n    type: Object as PropType<Position>,\n    required: false,\n    default: undefined,\n  },\n  targetPos: {\n    type: Object as PropType<Position>,\n    required: false,\n    default: undefined,\n  },\n})\n\nconst { scale } = useZoomLevel()\n\nconst config = useEdgeConfig()\nconst {\n  handleEdgePointerDownEvent,\n  handleEdgePointerOverEvent,\n  handleEdgePointerOutEvent,\n  handleEdgeClickEvent,\n  handleEdgeDoubleClickEvent,\n  handleEdgeContextMenu,\n} = useMouseOperation()\n\nconst pathD = computed(() => {\n  const p = props.state.position\n  if (config.type === \"straight\" || !props.state.curve) {\n    return `M ${p.p1.x} ${p.p1.y} L ${p.p2.x} ${p.p2.y}`\n  } else {\n    const points = [ ...props.state.curve.control, { x: p.p2.x, y: p.p2.y }]\n    const d: string[] = []\n    d.push(`M ${p.p1.x} ${p.p1.y}`)\n    chunk(points, 2).forEach(([p1, p2]) => d.push(`Q ${p1.x} ${p1.y} ${p2.x} ${p2.y}`))\n    return d.join(\" \")\n  }\n})\n\nconst strokeWidth = computed(() => (props.state.line.stroke.width + 10) * scale.value)\n\ndefineExpose({\n  config,\n  handleEdgePointerDownEvent,\n  handleEdgePointerOverEvent,\n  handleEdgePointerOutEvent,\n  handleEdgeClickEvent,\n  handleEdgeDoubleClickEvent,\n  handleEdgeContextMenu,\n})\n</script>\n\n<template>\n  <path\n    :class=\"{ 'v-line-background': true, selectable: state.selectable }\"\n    :d=\"pathD\"\n    stroke=\"transparent\"\n    :stroke-width=\"strokeWidth\"\n    fill=\"none\"\n    @pointerdown.stop=\"handleEdgePointerDownEvent(id, $event)\"\n    @pointerenter.passive=\"handleEdgePointerOverEvent(id, $event)\"\n    @pointerleave.passive=\"handleEdgePointerOutEvent(id, $event)\"\n    @click.stop=\"handleEdgeClickEvent(id, $event)\"\n    @dblclick.stop=\"handleEdgeDoubleClickEvent(id, $event)\"\n    @contextmenu=\"handleEdgeContextMenu(id, $event)\"\n  />\n</template>\n\n<style lang=\"scss\" scoped>\n.v-line-background {\n  &.selectable {\n    cursor: pointer;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { useStates } from \"@/composables/state\"\nimport VEdgeBackground from \"./VEdgeBackground.vue\"\n\nconst { edgeStates, edgeGroupStates, layouts } = useStates()\n\ndefineExpose({ edgeStates, edgeGroupStates, layouts })\n</script>\n\n<template>\n  <template v-for=\"({ summarize, edges }) in edgeGroupStates.edgeGroups\">\n    <template v-if=\"!summarize\">\n      <template v-for=\"(edge, id) in edges\" :key=\"id\">\n        <v-edge-background\n          :id=\"id\"\n          :state=\"edgeStates[id]\"\n          :source-pos=\"layouts.nodes[edge.source]\"\n          :target-pos=\"layouts.nodes[edge.target]\"\n        />\n      </template>\n    </template>\n  </template>\n</template>\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\"\nimport { Position } from \"@/common/types\"\nimport { AnyShapeStyle, StrokeStyle } from \"@/common/configs\"\nimport { EdgeGroup } from \"@/models/edge\"\nimport { useStates } from \"@/composables/state\"\nimport { useEdgeConfig } from \"@/composables/config\"\nimport { useZoomLevel } from \"@/composables/zoom\"\nimport * as v2d from \"@/modules/calculation/2d\"\n\ninterface NodeShape {\n  pos: Position\n  shape: AnyShapeStyle\n}\n\nconst edgeConfig = useEdgeConfig()\nconst { nodeStates, edgeStates, edgeGroupStates, summarizedEdgeStates, layouts } = useStates()\nconst { scale } = useZoomLevel()\n\n// not summarized\nconst indivisualEdgeGroups = computed(() =>\n  Object.fromEntries(\n    Object.entries(edgeGroupStates.edgeGroups).filter(\n      ([_, group]) => !group.summarize && Object.keys(group.edges).length > 0\n    )\n  )\n)\n\nconst edgeGroups = computed(() => {\n  const indivisual: Record<string, EdgeGroup> = {}\n  const summarized: Record<string, EdgeGroup> = {}\n  Object.entries(edgeGroupStates.edgeGroups).forEach(([id, group]) => {\n    if (Object.keys(group.edges).length > 0) {\n      if (group.summarize) {\n        summarized[id] = group\n      } else {\n        indivisual[id] = group\n      }\n    }\n  })\n  return { indivisual, summarized }\n})\n\nconst nodeShape = computed(() => (node: string) => {\n  return {\n    pos: layouts.nodes[node] ?? { x: 0, y: 0 },\n    shape: nodeStates[node].shape,\n  }\n})\n\nconst labelAreaPosition = computed(\n  () => (edgeId: string, source: NodeShape, target: NodeShape, edgeStyle: StrokeStyle) => {\n    return v2d.calculateEdgeLabelArea(\n      edgeStates[edgeId].labelPosition,\n      edgeStyle,\n      edgeConfig.label.margin,\n      edgeConfig.label.padding,\n      scale.value\n    )\n  }\n)\n\nconst groupLabelAreaPosition = computed(() => (id: string, group: EdgeGroup) => {\n  const edgeId = Object.keys(group.edges)[0]\n  return v2d.calculateEdgeLabelArea(\n    edgeStates[edgeId].labelPosition,\n    summarizedEdgeStates[id]?.stroke ?? edgeStates[edgeId].line.stroke,\n    edgeConfig.label.margin,\n    edgeConfig.label.padding,\n    scale.value\n  )\n})\n\nconst representativeEdgeState = computed(() => (group: EdgeGroup) => {\n  return edgeStates[Object.keys(group.edges)[0]]\n})\n\ndefineExpose({\n  indivisualEdgeGroups,\n  edgeGroups,\n  nodeShape,\n  labelAreaPosition,\n  groupLabelAreaPosition,\n  representativeEdgeState,\n  edgeStates,\n  edgeConfig,\n  scale,\n})\n</script>\n\n<template>\n  <g class=\"v-edge-labels\">\n    <template v-for=\"(group, id) in edgeGroups.indivisual\" :key=\"id\">\n      <template v-for=\"(edge, edgeId) in group.edges\" :key=\"edgeId\">\n        <slot\n          name=\"edge-label\"\n          :edge-id=\"edgeId\"\n          :edge=\"edge\"\n          :config=\"edgeConfig.label\"\n          :area=\"\n            labelAreaPosition(\n              edgeId,\n              nodeShape(edge.source),\n              nodeShape(edge.target),\n              edgeStates[edgeId].line.stroke\n            )\n          \"\n          :hovered=\"edgeStates[edgeId].hovered\"\n          :selected=\"edgeStates[edgeId].selected\"\n          :scale=\"scale\"\n        />\n      </template>\n    </template>\n    <template v-for=\"(group, id) in edgeGroups.summarized\" :key=\"id\">\n      <slot\n        name=\"edges-label\"\n        :edges=\"group.edges\"\n        :config=\"edgeConfig.label\"\n        :area=\"groupLabelAreaPosition(id, group)\"\n        :hovered=\"representativeEdgeState(group).hovered\"\n        :selected=\"representativeEdgeState(group).selected\"\n        :scale=\"scale\"\n      />\n    </template>\n  </g>\n</template>\n\n<style lang=\"scss\" scoped>\n.v-edge-labels {\n  :deep(.v-text),\n  :deep(.v-text-background) {\n    pointer-events: none;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { onMounted, onUnmounted, ref } from \"vue\"\nimport { useContainers } from \"@/composables/container\"\n\n// By detecting and copying changes in the `transform` and `style`\n// attributes reflected by svg-pan-zoom, it follows changes in the\n// display area caused by panning and zooming.\n\nconst { viewport } = useContainers()\n\n// ref=\"background\"\nconst background = ref<SVGGElement>()\n\nconst updateAttributes = (attrs: string[], bgLayer: SVGGElement, vpLayer: SVGGElement) => {\n  attrs.forEach(attr => bgLayer.setAttribute(attr, vpLayer.getAttribute(attr) ?? \"\"))\n}\n\nconst observer = new MutationObserver(records => {\n  if (!background.value) return\n  const attrs = records.map(r => r.attributeName ?? \"\").filter(Boolean)\n  updateAttributes(attrs, background.value, viewport.value)\n})\n\nonMounted(() => {\n  const attrs = [\"transform\", \"style\"]\n  observer.observe(viewport.value, {\n    attributes: true,\n    attributeFilter: attrs\n  })\n  if (!background.value) return\n  updateAttributes(attrs, background.value, viewport.value)\n})\n\nonUnmounted(() => {\n  observer.disconnect()\n})\n\ndefineExpose({ background })\n</script>\n\n<template>\n  <g ref=\"background\" class=\"v-background-viewport\">\n    <slot />\n  </g>\n</template>\n","<script setup lang=\"ts\">\nimport { onMounted, ref, watchEffect } from \"vue\"\nimport { Point, Size } from \"@/common/types\"\nimport { useZoomLevel } from \"@/composables/zoom\"\nimport { useContainers } from \"@/composables/container\"\nimport { useEventEmitter } from \"@/composables/event-emitter\"\nimport { useViewConfig } from \"@/composables/config\"\n\n// [index, pos, start, end, attrs][]\ntype LineDefinitions = [number, number, number, number, Record<string, any>][]\n\nconst { container, svgPanZoom } = useContainers()\nconst { zoomLevel } = useZoomLevel()\nconst emitter = useEventEmitter()\nconst config = useViewConfig()\n\n// left-top point in SVG coordinates\nconst basePoint = ref<Point>({ x: 0, y: 0 })\n\n// container size in pixel\nconst viewport = ref<Size>({ width: 500, height: 500 })\n\nonMounted(() => {\n  const pan = svgPanZoom.value?.getPan()\n  if (pan) {\n    basePoint.value = {\n      x: -pan.x,\n      y: -pan.y,\n    }\n  }\n  const rect = container.value.getBoundingClientRect()\n  viewport.value = {\n    width: rect.width,\n    height: rect.height,\n  }\n})\n\nemitter.on(\"view:resize\", rect => {\n  viewport.value = { width: rect.width, height: rect.height }\n})\n\nemitter.on(\"view:pan\", pan => {\n  basePoint.value = { x: -pan.x, y: -pan.y }\n})\n\nemitter.on(\"view:zoom\", () => {\n  const pan = svgPanZoom.value?.getPan()\n  if (pan) {\n    basePoint.value = { x: -pan.x, y: -pan.y }\n  }\n})\n\nconst thickVerticals = ref<LineDefinitions>([])\nconst thickHorizontals = ref<LineDefinitions>([])\nconst normalVerticals = ref<LineDefinitions>([])\nconst normalHorizontals = ref<LineDefinitions>([])\n\n// make grid lines\nwatchEffect(() => {\n  const thickH: LineDefinitions = []\n  const thickV: LineDefinitions = []\n  const normalH: LineDefinitions = []\n  const normalV: LineDefinitions = []\n\n  const s = 1 / zoomLevel.value\n  const gi = config.grid.interval\n  const x = basePoint.value.x * s\n  const y = basePoint.value.y * s\n  const width = Math.floor(viewport.value.width / gi + 1) * gi\n  const height = Math.floor(viewport.value.height / gi + 1) * gi\n  const maxWidth = (basePoint.value.x + width) * s\n  const maxHeight = (basePoint.value.y + height) * s\n  const inc = config.grid.thickIncrements // interval to make the line thicker\n  const normalDasharray = config.grid.line.dasharray\n  const thickDasharray = config.grid.thick.dasharray\n\n  let thickAttrs = {\n    stroke: config.grid.thick.color,\n    \"stroke-width\": config.grid.thick.width,\n    \"stroke-dasharray\": thickDasharray,\n    \"stroke-dashoffset\": thickDasharray ? x / s : undefined\n  }\n\n  let normalAttrs = {\n    stroke: config.grid.line.color,\n    \"stroke-width\": config.grid.line.width,\n    \"stroke-dasharray\": normalDasharray,\n    \"stroke-dashoffset\": normalDasharray ? x / s : undefined\n  }\n\n  // horizontal lines\n  const w = (basePoint.value.x + width) * s\n  for (let i = y; i <= maxHeight; i += gi) {\n    const index = Math.floor(i / gi)\n    if (inc && index % inc === 0) {\n      thickH.push([index, index * gi, x, w, thickAttrs])\n    } else {\n      normalH.push([index, index * gi, x, w, normalAttrs])\n    }\n  }\n\n  thickAttrs = { ...thickAttrs }\n  thickAttrs[\"stroke-dashoffset\"] = thickDasharray ? y / s : undefined\n\n  normalAttrs = { ...normalAttrs }\n  normalAttrs[\"stroke-dashoffset\"] = normalDasharray ? y / s : undefined\n\n  // vertical lines\n  const h = (basePoint.value.y + height) * s\n  for (let i = x; i <= maxWidth; i += gi) {\n    const index = Math.floor(i / gi)\n    if (inc && index % inc === 0) {\n      thickV.push([index, index * gi, y, h, thickAttrs])\n    } else {\n      normalV.push([index, index * gi, y, h, normalAttrs])\n    }\n  }\n\n  thickHorizontals.value = thickH\n  thickVerticals.value = thickV\n  normalHorizontals.value = normalH\n  normalVerticals.value = normalV\n})\n\ndefineExpose({\n  thickVerticals,\n  thickHorizontals,\n  normalVerticals,\n  normalHorizontals,\n})\n</script>\n\n<template>\n  <g class=\"v-background-grid\" shape-rendering=\"crispEdges\">\n    <!-- normal -->\n    <path\n      v-for=\"([i, v, x, w, attrs]) in normalHorizontals\"\n      :key=\"`nv${i}`\"\n      :d=\"`M ${x} ${v} L ${w} ${v}`\"\n      v-bind=\"attrs\"\n      style=\"vector-effect: non-scaling-stroke;\"\n    />\n    <path\n      v-for=\"([i, v, y, h, attrs]) in normalVerticals\"\n      :key=\"`nh${i}`\"\n      :d=\"`M ${v} ${y} L ${v} ${h}`\"\n      v-bind=\"attrs\"\n      style=\"vector-effect: non-scaling-stroke;\"\n    />\n    <!-- thick -->\n    <path\n      v-for=\"([i, v, x, w, attrs]) in thickHorizontals\"\n      :key=\"`tv${i}`\"\n      :d=\"`M ${x} ${v} L ${w} ${v}`\"\n      v-bind=\"attrs\"\n      style=\"vector-effect: non-scaling-stroke;\"\n    />\n    <path\n      v-for=\"([i, v, y, h, attrs]) in thickVerticals\"\n      :key=\"`th${i}`\"\n      :d=\"`M ${v} ${y} L ${v} ${h}`\"\n      v-bind=\"attrs\"\n      style=\"vector-effect: non-scaling-stroke;\"\n    />\n  </g>\n</template>\n\n<style>\n.v-background-grid {\n  pointer-events: none;\n}\n</style>\n","\ntype Args<T> = [...(T | null)[], T]\n\nexport function findFirstNonNull<T>(...values: Args<T>): T {\n  return values.find(v => !!v) as T\n}\n","import { NodePositions, PositionOrCurve } from \"@/common/types\"\nimport { NodeStates } from \"@/models/node\"\nimport { EdgeStates, EdgeState } from \"@/models/edge\"\nimport { EdgeLine, EdgeObject, PathState } from \"@/models/path\"\nimport { AnyShapeStyle, PathEndType } from \"@/common/configs\"\nimport { findFirstNonNull } from \"@/utils/collection\"\nimport * as v2d from \"@/modules/calculation/2d\"\nimport * as PointUtils from \"@/modules/calculation/point\"\nimport { VectorLine } from \"@/modules/calculation/line\"\nimport * as LineUtils from \"@/modules/calculation/line\"\nimport V, { Vector2D } from \"@/modules/vector2d\"\n\nconst EPSILON = Number.EPSILON * 100 // 2.2204... x 10‍−‍14.\n\nexport function calculatePathPoints(\n  path: PathState,\n  nodeStates: NodeStates,\n  nodeLayouts: NodePositions,\n  edgeStates: EdgeStates,\n  scale: number,\n  curveInNode: boolean,\n  pathEndType: PathEndType,\n  margin: number\n): PositionOrCurve[] {\n  // The relationship between the source/target of a link and the connection\n  // by path can be different.\n  // Detect node at connection point and determine source/target for the path.\n  const edges = path.edges\n\n  // Edge ID list -> List of Edge locations\n  const directions = _detectDirectionsOfPathEdges(edges) // true: forward, false: reverse\n  const edgePos = edges.map((edge, i) => _getEdgeLine(edge, directions[i], edgeStates[edge.edgeId]))\n\n  // the results\n  const points: (Vector2D[] | Vector2D)[] = []\n\n  let isMarginOverRunStart = false\n  let isMarginOverRunEnd = false\n\n  // ----------------------------------------------------\n  // Determine the starting point.\n  // ----------------------------------------------------\n  {\n    const firstEdge = edgePos[0]\n    let nodeRadius = _getNodeRadius(nodeStates[firstEdge.source].shape) * scale\n    const lineMargin = margin + (pathEndType === \"edgeOfNode\" ? nodeRadius : 0)\n    const nextPoint =\n      lineMargin <= 0\n        ? firstEdge.line.source\n        : _calculateEdgeOfNode(firstEdge, lineMargin, nodeLayouts, true)\n    points.push(nextPoint)\n    nodeRadius = _getNodeRadius(nodeStates[firstEdge.target].shape) * scale\n    if (margin > 0) {\n      const distance = V.distance(firstEdge.line.source, firstEdge.line.target)\n      if (distance <= lineMargin + nodeRadius) {\n        isMarginOverRunStart = true\n      }\n    }\n  }\n\n  // ----------------------------------------------------\n  // Determine transit points.\n  // ----------------------------------------------------\n  const length = edges.length\n  for (let i = 1; i < length; i++) {\n    const prev = edgePos[i - 1]\n    const next = edgePos[i]\n\n    const nodeId = next.source\n    const nodePos = Vector2D.fromObject(nodeLayouts[nodeId] ?? { x: 0, y: 0 })\n\n    // The intersection point of two lines: [X]\n    const crossPoint = _getIntersectionOfLines(prev, next, nodePos)\n\n    // Place another small circle inside the node's circle and\n    // calculate transit points so that the path line is smooth.\n    //   Inner circle: [α] radius: `nodeCoreRadius`\n    //   Node circle : [β]  radius: `nodeRadius`\n    const nodeRadius = _getNodeRadius(nodeStates[nodeId].shape) * scale\n    const nodeCoreRadius = Math.max(nodeRadius * (2 / 3), nodeRadius - 4 * scale)\n    const prevCoreIp = _getIntersectionOfLineAndNode(prev, nodePos, nodeCoreRadius, true)\n    const nextCoreIp = _getIntersectionOfLineAndNode(next, nodePos, nodeCoreRadius, false)\n    const prevNodeIp = _getIntersectionOfLineAndNode(prev, nodePos, nodeRadius, true)\n    const nextNodeIp = _getIntersectionOfLineAndNode(next, nodePos, nodeRadius, false)\n\n    // ----------------------------------------------------\n    // Calculate transit points in the node.\n    // ----------------------------------------------------\n    let pos: Vector2D | Vector2D[]\n    if (crossPoint) {\n      const d = V.distance(crossPoint, nodePos)\n      if (d < nodeCoreRadius) {\n        // (1) [α] includes [X]:\n        //  * [X]: control point in bezier\n        //  * intersection with [α]: transit point\n        pos = [\n          findFirstNonNull(prevCoreIp, prevNodeIp, prev.line.target),\n          crossPoint,\n          findFirstNonNull(nextCoreIp, nextNodeIp, next.line.source),\n        ]\n      } else if (d <= nodeRadius) {\n        // (2) [β] includes [X]:\n        //  * [X]: control point in bezier\n        let p1: Vector2D, p2: Vector2D\n        if (prevNodeIp && prevCoreIp) {\n          // the prev line intersects [α] and [β]:\n          // Of [α]x[line], [β]x[line], use the one closer to [X] as the transit point.\n          p1 =\n            V.distance(crossPoint, prevCoreIp) < V.distance(crossPoint, prevNodeIp)\n              ? prevCoreIp\n              : prevNodeIp\n        } else {\n          // the prev line intersects only with [β]:\n          // use [β]x[line] as the transit point.\n          p1 = prevNodeIp || prev.line.target\n        }\n        if (nextNodeIp && nextCoreIp) {\n          // the next line intersects with [α] and [β]:\n          // Of [α]x[line], [β]x[line], use the one closer to [X] as the transit point.\n          p2 =\n            V.distance(crossPoint, nextCoreIp) < V.distance(crossPoint, nextNodeIp)\n              ? nextCoreIp\n              : nextNodeIp\n        } else {\n          // the next line intersects only with [β]:\n          // use [β]x[line] as the transit point.\n          p2 = nextNodeIp || next.line.source\n        }\n        pos = [p1, crossPoint, p2]\n      } else {\n        // (3) [X] is out of the node([β])\n        if (prevCoreIp && nextCoreIp) {\n          // both lines intersect with [α]:\n          // use the [α]x[line] as transit point, and\n          // center of the node as control point in bezier.\n          pos = [prevCoreIp, nodePos, nextCoreIp]\n        } else if (prevNodeIp && nextNodeIp) {\n          // both lines intersect with [β]:\n          // use the [β]x[line] as transit point, and\n          // center of the node as control point in bezier.\n          pos = [prevNodeIp, nodePos, nextNodeIp]\n        } else {\n          // either or both lines do not intersect the node:\n          // [X] as transit point in bezier, and not place control points.\n          // [α]x[line] or [β]x[line] or end of [line] as the transit points, and\n          // center of the node as control point in bezier.\n          pos = [\n            findFirstNonNull(prevCoreIp, prevNodeIp, prev.line.target),\n            nodePos,\n            findFirstNonNull(nextCoreIp, nextNodeIp, next.line.source),\n          ]\n        }\n      }\n    } else {\n      // There is no intersection of two lines:\n      // center of the node as control point in bezier.\n      if (prevCoreIp && nextCoreIp) {\n        // both lines intersect with [α]:\n        // [α]x[line] as transit point.\n        pos = [prevCoreIp, nodePos, nextCoreIp]\n      } else if (prevNodeIp && nextNodeIp) {\n        // both lines intersect with [β]:\n        // [β]x[line] as transit point.\n        pos = [prevNodeIp, nodePos, nextNodeIp]\n      } else {\n        // either or both lines do not intersect the node:\n        // the end of the line as transit point.\n        pos = [prev.line.target, nodePos, next.line.source]\n      }\n    }\n\n    // ----------------------------------------------------\n    // Specify points on the curve.\n    // ----------------------------------------------------\n    if (prev.curve) {\n      // The starting point has already been added to `points`.\n      const lastPoints = points[points.length - 1]\n      if (lastPoints) {\n        const lastPoint =\n          lastPoints instanceof Array ? lastPoints[lastPoints.length - 1] : lastPoints\n        let nextPoint\n        if (pos instanceof Array) {\n          // Curved lines always end at the center of the node.\n          // To avoid smoothness, use only a transit point.\n          nextPoint = curveInNode ? pos[0] : pos[1]\n        } else {\n          nextPoint = pos\n        }\n        const control = v2d.calculateBezierCurveControlPoint(\n          lastPoint,\n          prev.curve.circle.center,\n          nextPoint,\n          prev.curve.theta\n        )\n        if (pos instanceof Array && curveInNode) {\n          points.push([...control, ...pos])\n        } else {\n          points.push([...control, nextPoint])\n        }\n      }\n    } else {\n      if (curveInNode || !(pos instanceof Array)) {\n        points.push(pos)\n      } else {\n        if (next.curve) {\n          points.push(pos[1]) // use control point as transit point\n        } else {\n          points.push(pos[0], pos[2]) // without control point to avoid smoothness\n        }\n      }\n    }\n  }\n\n  // ----------------------------------------------------\n  // Determine the terminate point.\n  // ----------------------------------------------------\n  {\n    const lastEdge = edgePos[edgePos.length - 1]\n    let nodeRadius = _getNodeRadius(nodeStates[lastEdge.target].shape) * scale\n    const lineMargin = margin + (pathEndType === \"edgeOfNode\" ? nodeRadius : 0)\n    const nextPoint =\n      lineMargin <= 0\n        ? lastEdge.line.target\n        : _calculateEdgeOfNode(lastEdge, lineMargin, nodeLayouts, false)\n    nodeRadius = _getNodeRadius(nodeStates[lastEdge.source].shape) * scale\n    const curve = lastEdge.curve\n    if (curve) {\n      // curve\n      const pos = points[points.length - 1]\n      const lastPoint = pos instanceof Array ? pos[pos.length - 1] : pos\n      const control = v2d.calculateBezierCurveControlPoint(\n        lastPoint,\n        curve.circle.center,\n        nextPoint,\n        curve.theta\n      )\n      points.push([...control, nextPoint])\n    } else {\n      // straight\n      points.push(nextPoint)\n    }\n    if (margin > 0) {\n      const distance = V.distance(lastEdge.line.source, lastEdge.line.target)\n      if (distance <= lineMargin + nodeRadius) {\n        isMarginOverRunEnd = true\n      }\n    }\n  }\n\n  if (isMarginOverRunStart) {\n    points.shift()\n    if (points[0] instanceof Array) {\n      points.unshift(points[0][0])\n    }\n  }\n  if (isMarginOverRunEnd) {\n    points.pop()\n  }\n\n  return points\n}\n\nfunction _detectDirectionsOfPathEdges(edges: EdgeObject[]): boolean[] {\n  const length = edges.length\n\n  if (length <= 1) {\n    return [true]\n  }\n\n  const directions: boolean[] = [] // true: forward, false: reverse\n  let lastNode: string | null = null\n  for (let i = 0; i < length; i++) {\n    const source = edges[i].edge.source\n    const target = edges[i].edge.target\n    let isForward\n    if (i === 0) {\n      if (length > 2) {\n        // If the next edge is an edge between the same nodes,\n        // check for more next edges.\n        const edge0 = [source, target].sort()\n        const edge1 = [edges[1].edge.source, edges[1].edge.target].sort()\n        if (edge0[0] === edge1[0] && edge0[1] === edge1[1]) {\n          const next = [edges[2].edge.source, edges[2].edge.target]\n          if (next.includes(edges[1].edge.target)) {\n            // edge1 is forward\n            isForward = target === edges[1].edge.source\n          } else {\n            // edge1 is reverse\n            isForward = target === edges[1].edge.target\n          }\n        } else {\n          isForward = [edges[1].edge.source, edges[1].edge.target].includes(target)\n        }\n      } else {\n        isForward = [edges[1].edge.source, edges[1].edge.target].includes(target)\n      }\n    } else {\n      isForward = lastNode === source\n    }\n    directions.push(isForward)\n    lastNode = isForward ? target : source\n  }\n  return directions\n}\n\nfunction _calculateEdgeOfNode(\n  edge: EdgeLine,\n  nodeRadius: number,\n  nodeLayouts: NodePositions,\n  direction: boolean\n) {\n  const nodeId = direction ? edge.source : edge.target\n  const curve = edge.curve\n  if (curve) {\n    let moveRad = nodeRadius / curve.circle.radius\n    if (curve.theta > 0) {\n      moveRad *= -1\n    }\n    if (!direction) {\n      moveRad *= -1\n    }\n    return Vector2D.fromObject(\n      v2d.moveOnCircumference(\n        direction ? edge.line.source : edge.line.target,\n        curve.circle.center,\n        moveRad\n      )\n    )\n  } else {\n    let source: Vector2D, target: Vector2D\n    if (direction) {\n      source = edge.line.target\n      target = edge.line.source\n    } else {\n      source = edge.line.source\n      target = edge.line.target\n    }\n    // straight\n    const p = PointUtils.getIntersectionOfLineTargetAndCircle(\n      source,\n      target,\n      Vector2D.fromObject(nodeLayouts[nodeId]),\n      nodeRadius\n    )\n    return p === null ? source : p\n  }\n}\n\nfunction _getIntersectionOfLines(\n  prev: EdgeLine,\n  next: EdgeLine,\n  nodePos: Vector2D\n): Vector2D | null {\n  let crossPoint: Vector2D | null = null\n  if (prev.curve) {\n    if (next.curve) {\n      if (prev.line.target.isEqualTo(next.line.source)) {\n        return prev.line.target.clone()\n      }\n      // curve -- curve\n      crossPoint = PointUtils.getIntersectionOfCircles(\n        prev.curve.circle.center,\n        prev.curve.circle.radius,\n        next.curve.circle.center,\n        next.curve.circle.radius,\n        prev.curve.center\n      )\n    } else {\n      // curve -- straight\n      crossPoint = PointUtils.getIntersectionOfLineTargetAndCircle2(\n        next.line.target,\n        next.line.source,\n        prev.curve.circle.center,\n        prev.curve.circle.radius,\n        nodePos\n      )\n    }\n  } else {\n    if (next.curve) {\n      // straight -- curve\n      crossPoint = PointUtils.getIntersectionOfLineTargetAndCircle(\n        prev.line.source,\n        prev.line.target,\n        next.curve.circle.center,\n        next.curve.circle.radius\n      )\n    } else {\n      // straight -- straight\n      const prevSlope = _getSlope(prev.line)\n      const nextSlope = _getSlope(next.line)\n      const isParallel =\n        (!isFinite(prevSlope) && !isFinite(nextSlope)) || Math.abs(prevSlope - nextSlope) < EPSILON\n      if (isParallel) {\n        crossPoint = null // not exist intersection point\n      } else {\n        crossPoint = PointUtils.getIntersectionPointOfLines(prev.line, next.line)\n      }\n    }\n  }\n  return crossPoint\n}\n\nfunction _getIntersectionOfLineAndNode(\n  edge: EdgeLine,\n  nodeCenter: Vector2D,\n  nodeRadius: number,\n  targetSide: boolean\n): Vector2D | null {\n  if (edge.curve) {\n    return PointUtils.getIntersectionOfCircles(\n      nodeCenter,\n      nodeRadius,\n      edge.curve.circle.center,\n      edge.curve.circle.radius,\n      Vector2D.fromObject(edge.curve.center)\n    )\n  } else {\n    return PointUtils.getIntersectionOfLineTargetAndCircle(\n      targetSide ? edge.line.source : edge.line.target,\n      targetSide ? edge.line.target : edge.line.source,\n      nodeCenter,\n      nodeRadius\n    )\n  }\n}\n\nfunction _getEdgeLine(edge: EdgeObject, direction: boolean, state: EdgeState): EdgeLine {\n  let position = state.origin\n  let source = edge.edge.source\n  let target = edge.edge.target\n  let curve = state.curve\n  if (!direction) {\n    position = LineUtils.inverseLine(position)\n    source = edge.edge.target\n    target = edge.edge.source\n    if (curve) {\n      curve = { ...curve, theta: -curve.theta }\n    }\n  }\n  const line = VectorLine.fromLinePosition(position)\n  const result: EdgeLine = {\n    edgeId: edge.edgeId,\n    source,\n    target,\n    line,\n    curve,\n  }\n  return result\n}\n\nfunction _getNodeRadius(shape: AnyShapeStyle) {\n  if (shape.type == \"circle\") {\n    return shape.radius\n  } else {\n    return Math.min(shape.width, shape.height) / 2\n  }\n}\n\nfunction _getSlope(pos: VectorLine) {\n  return (pos.target.y - pos.source.y) / (pos.target.x - pos.source.x)\n}\n","<script setup lang=\"ts\">\nimport { computed, PropType } from \"vue\"\nimport { PositionOrCurve } from \"@/common/types\"\nimport { Config } from \"@/common/configs\"\nimport { PathState } from \"@/models/path\"\nimport { usePathConfig } from \"@/composables/config\"\nimport { useZoomLevel } from \"@/composables/zoom\"\nimport { applyScaleToDasharray, getDasharrayUnit } from \"@/utils/visual\"\nimport chunk from \"lodash-es/chunk\"\n\nconst props = defineProps({\n  points: {\n    type: Array as PropType<PositionOrCurve[]>,\n    required: true,\n  },\n  path: {\n    type: Object as PropType<PathState>,\n    required: true,\n  }\n})\n\nconst { scale } = useZoomLevel()\nconst pathConfig = usePathConfig()\n\nconst d = computed(() => {\n  let move = true\n  return props.points.map(p => {\n    if (p === null) {\n      move = true\n    } else if (p instanceof Array) {\n      p = [...p]\n      const list = []\n      if (p.length % 2 === 1) {\n        const x = p[0]\n        p = p.slice(1)\n        list.push(`L ${x.x} ${x.y}`)\n      }\n      chunk(p, 2).map(([p1, p2]) => list.push(`Q ${p1.x} ${p1.y} ${p2.x} ${p2.y}`))\n      return list.join(\" \")\n    } else {\n      const m = move\n      move = false\n      return `${m ? \"M \" : \"L \"}${p.x} ${p.y}`\n    }\n  }).join(\" \")\n})\n\nconst config = computed(() => {\n  const state = props.path\n  if (state.selected) {\n    return Config.values(pathConfig.selected, state.path)\n  } else if (state.hovered && pathConfig.hover) {\n    return Config.values(pathConfig.hover, state.path)\n  } else {\n    return Config.values(pathConfig.normal, state.path)\n  }\n})\n\nconst strokeDasharray = computed(() => {\n  return applyScaleToDasharray(config.value.dasharray, scale.value)\n})\n\nconst animationSpeed = computed(() => {\n  const speed = config.value.animate\n    ? getDasharrayUnit(config.value.dasharray) * config.value.animationSpeed * scale.value\n    : false\n  return speed ? `--animation-speed:${speed}` : undefined\n})\n\ndefineExpose({ d, scale, config, strokeDasharray, animationSpeed })\n</script>\n\n<template>\n  <path\n    :class=\"{ 'v-path-line': true, animate: config.animate }\"\n    :d=\"d\"\n    fill=\"none\"\n    :stroke=\"config.color\"\n    :stroke-width=\"config.width * scale\"\n    :stroke-dasharray=\"strokeDasharray\"\n    :stroke-linecap=\"config.linecap\"\n    :stroke-linejoin=\"config.linejoin\"\n    :style=\"animationSpeed\"\n  />\n</template>\n\n<style scoped>\n.v-path-line.animate {\n  --animation-speed: 100;\n  animation: dash 10s linear infinite;\n  stroke-dashoffset: var(--animation-speed);\n}\n@keyframes dash {\n  to {\n    stroke-dashoffset: 0;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\"\nimport { PositionOrCurve } from \"@/common/types\"\nimport { Config } from \"@/common/configs\"\nimport { PathState } from \"@/models/path\"\nimport { useStates } from \"@/composables/state\"\nimport { usePathConfig } from \"@/composables/config\"\nimport { useZoomLevel } from \"@/composables/zoom\"\nimport { calculatePathPoints } from \"@/modules/calculation/path\"\nimport { useMouseOperation } from \"@/composables/mouse\"\nimport VPathLine from \"./VPathLine.vue\"\n\nconst { pathZOrderedList, nodeStates, edgeStates, layouts } = useStates()\nconst { scale } = useZoomLevel()\nconst pathConfig = usePathConfig()\n\nconst {\n  handlePathPointerDownEvent,\n  handlePathPointerOverEvent,\n  handlePathPointerOutEvent,\n  handlePathClickEvent,\n  handlePathDoubleClickEvent,\n  handlePathContextMenu,\n} = useMouseOperation()\n\nconst calcPathPoints = computed(() => (path: PathState): PositionOrCurve[] => {\n  if (path.edges.length === 0) return []\n  const margin = Config.value(pathConfig.margin, path.path) * scale.value\n  return calculatePathPoints(\n    path,\n    nodeStates,\n    layouts.nodes,\n    edgeStates,\n    scale.value,\n    pathConfig.curveInNode,\n    pathConfig.end,\n    margin\n  )\n})\n\ndefineExpose({\n  pathConfig,\n  pathZOrderedList,\n  calcPathPoints,\n  handlePathPointerDownEvent,\n  handlePathPointerOverEvent,\n  handlePathPointerOutEvent,\n  handlePathClickEvent,\n  handlePathDoubleClickEvent,\n  handlePathContextMenu,\n})\n</script>\n\n<template>\n  <transition-group\n    :name=\"pathConfig.transition\"\n    :css=\"!!pathConfig.transition\"\n    tag=\"g\"\n    class=\"v-paths\"\n  >\n    <v-path-line\n      v-for=\"path in pathZOrderedList\"\n      :key=\"path.id\"\n      :points=\"calcPathPoints(path)\"\n      :class=\"{ clickable: path.clickable, hoverable: path.hoverable }\"\n      :path=\"path\"\n      @pointerdown=\"handlePathPointerDownEvent(path.id, $event)\"\n      @pointerenter.passive=\"handlePathPointerOverEvent(path.id, $event)\"\n      @pointerleave.passive=\"handlePathPointerOutEvent(path.id, $event)\"\n      @click.stop=\"handlePathClickEvent(path.id, $event)\"\n      @dblclick.stop=\"handlePathDoubleClickEvent(path.id, $event)\"\n      @contextmenu=\"handlePathContextMenu(path.id, $event)\"\n    />\n  </transition-group>\n</template>\n\n<style lang=\"scss\" scoped>\n$transition: 0.1s linear;\n\n.v-path-line {\n  pointer-events: none;\n  transition: stroke $transition, stroke-width $transition;\n\n  &.clickable {\n    pointer-events: stroke;\n    cursor: pointer;\n  }\n  &.hoverable {\n    pointer-events: stroke;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\n  import { computed, PropType } from \"vue\"\n  import { MarkerUnits } from \"@/common/configs\"\n\nconst props = defineProps({\n  width: {\n    type: Number,\n    required: true,\n  },\n  height: {\n    type: Number,\n    required: true,\n  },\n  refX: {\n    type: Number,\n    required: true,\n  },\n  color: {\n    type: String,\n    required: true,\n  },\n  isSource: {\n    type: Boolean,\n    required: true,\n  },\n  units: {\n    type: String as PropType<MarkerUnits>,\n    required: true,\n  }\n})\n\nconst arrowPoints = computed(() => {\n  const w = props.width\n  const h = props.height\n  if (props.isSource) {\n    return `${w} ${h}, 0 ${h / 2}, ${w} 0`\n  } else {\n    return `0 0, ${w} ${h / 2}, 0 ${h}`\n  }\n})\n\n</script>\n\n<template>\n  <polygon :points=\"arrowPoints\" :fill=\"color\" />\n</template>\n","<script setup lang=\"ts\">\nimport { computed, PropType } from \"vue\"\nimport { MarkerUnits } from \"@/common/configs\"\n\nconst props = defineProps({\n  width: {\n    type: Number,\n    required: true,\n  },\n  height: {\n    type: Number,\n    required: true,\n  },\n  refX: {\n    type: Number,\n    required: true,\n  },\n  color: {\n    type: String,\n    required: true,\n  },\n  isSource: {\n    type: Boolean,\n    required: true,\n  },\n  units: {\n    type: String as PropType<MarkerUnits>,\n    required: true,\n  }\n})\n\nconst angleStroke = computed(() => {\n  return props.units === \"strokeWidth\" ? 1 : Math.min(props.width, props.height) / 5\n})\n\nconst anglePoints = computed(() => {\n  const m = angleStroke.value / 2\n  const w = props.width\n  const h = props.height\n  if (props.isSource) {\n    return `${w - m} ${h - m}, ${m} ${h / 2}, ${w - m} ${m}`\n  } else {\n    return `${m} ${m}, ${w - m} ${h / 2}, ${m} ${h - m}`\n  }\n})\n</script>\n\n<template>\n  <polyline\n    :points=\"anglePoints\"\n    fill=\"none\"\n    :stroke-width=\"angleStroke\"\n    :stroke=\"color\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n  />\n</template>\n","<script setup lang=\"ts\">\nimport { computed, PropType } from \"vue\"\nimport { EdgeHeadType } from \"@/common/configs\"\nimport { HeadMarker } from \"@/composables/marker\"\nimport VMarkerHeadArrow from \"./VMarkerHeadArrow.vue\"\nimport VMarkerHeadAngle from \"./VMarkerHeadAngle.vue\"\nimport VMarkerHeadCircle from \"./VMarkerHeadCircle.vue\"\n\ntype MarkerType = Exclude<EdgeHeadType, \"none\" | \"custom\">\n\nconst types: Record<MarkerType, any> = {\n  arrow: VMarkerHeadArrow,\n  angle: VMarkerHeadAngle,\n  circle: VMarkerHeadCircle\n}\n\nconst props = defineProps({\n  id: {\n    type: String,\n    required: true,\n  },\n  marker: {\n    type: Object as PropType<HeadMarker>,\n    required: true,\n  },\n  scale: {\n    type: Number,\n    required: true,\n  },\n})\n\nconst width = computed(\n  () => props.marker.width * (props.marker.units === \"strokeWidth\" ? 1 : props.scale)\n)\n\nconst height = computed(\n  () => props.marker.height * (props.marker.units === \"strokeWidth\" ? 1 : props.scale)\n)\n\nconst refX = computed(() => {\n  const margin = props.marker.margin * (props.marker.units === \"strokeWidth\" ? 1 : props.scale)\n  return props.marker.isSource ? width.value + margin : -margin\n})\n\n</script>\n\n<template>\n  <marker\n    v-if=\"marker.type !== 'none' && marker.type !== 'custom'\"\n    :id=\"id\"\n    :markerWidth=\"width\"\n    :markerHeight=\"height\"\n    :refX=\"refX\"\n    :refY=\"height / 2\"\n    orient=\"auto\"\n    :markerUnits=\"marker.units\"\n    class=\"v-marker\"\n  >\n    <component\n      :is=\"types[marker.type]\"\n      :width=\"width\"\n      :height=\"height\"\n      :refX=\"refX\"\n      :color=\"marker.color\"\n      :is-source=\"marker.isSource\"\n      :units=\"marker.units\"\n    />\n  </marker>\n</template>\n","<template>\n  <div ref=\"container\" class=\"v-network-graph\">\n    <svg\n      ref=\"svg\"\n      class=\"v-canvas\"\n      :class=\"{ show, dragging, touches }\"\n      width=\"500\"\n      height=\"500\"\n      viewBox=\"0 0 500 500\"\n    >\n      <!-- outside of viewport -->\n      <slot\n        v-for=\"layerName in layerDefs['root']\"\n        :key=\"layerName\"\n        :name=\"layerName\"\n        :scale=\"scale\"\n      />\n\n      <defs v-if=\"Object.keys(markers).length > 0\">\n        <v-marker-head\n          v-for=\"(marker, id) in markers\"\n          :id=\"id\"\n          :key=\"id\"\n          :marker=\"marker\"\n          :scale=\"scale\"\n        />\n      </defs>\n\n      <!-- background-viewport:\n           area outside the scope of SVG text retrieval but targeted by pan/zoom. -->\n      <v-background-viewport v-if=\"isShowBackgroundViewport\">\n        <g v-for=\"layerName in layerDefs['background']\" :key=\"layerName\" class=\"v-layer\">\n          <slot :name=\"layerName\" :scale=\"scale\" />\n        </g>\n\n        <!-- grid -->\n        <v-background-grid v-if=\"isShowGrid\" />\n\n        <g v-for=\"layerName in layerDefs['grid']\" :key=\"layerName\" class=\"v-layer\">\n          <slot :name=\"layerName\" :scale=\"scale\" />\n        </g>\n      </v-background-viewport>\n\n      <!-- viewport: pan/zoom target and within the range of SVG text retrieval. -->\n      <g\n        ref=\"viewport\"\n        class=\"v-viewport\"\n        :class=\"{ 'v-transition': transitionOption.enabled }\"\n        :style=\"transitionStyles\"\n      >\n        <g v-for=\"layerName in layerDefs['base']\" :key=\"layerName\" class=\"v-layer\">\n          <slot :name=\"layerName\" :scale=\"scale\" />\n        </g>\n\n        <!-- edges -->\n        <g class=\"v-layer-edges\">\n          <v-edge-backgrounds />\n          <v-edge-groups />\n        </g>\n\n        <g v-for=\"layerName in layerDefs['edges']\" :key=\"layerName\" class=\"v-layer\">\n          <slot :name=\"layerName\" :scale=\"scale\" />\n        </g>\n\n        <!-- edge labels -->\n        <v-edge-labels v-if=\"overrideEdgeLabels\">\n          <template #edge-label=\"slotProps\">\n            <slot name=\"edge-label\" v-bind=\"slotProps\" />\n          </template>\n        </v-edge-labels>\n\n        <!-- summarized edges labels -->\n        <v-edge-labels v-if=\"overrideEdgesLabels\">\n          <template #edges-label=\"slotProps\">\n            <slot name=\"edges-label\" v-bind=\"slotProps\" />\n          </template>\n        </v-edge-labels>\n\n        <!-- node selections (focus ring) -->\n        <g v-if=\"visibleNodeFocusRing\" class=\"v-layer-nodes-selections\">\n          <v-node-focus-ring\n            v-for=\"nodeId in currentSelectedNodes\"\n            :id=\"nodeId\"\n            :key=\"nodeId\"\n            :state=\"nodeStates[nodeId]\"\n            :pos=\"currentLayouts.nodes[nodeId]\"\n          />\n        </g>\n\n        <g v-for=\"layerName in layerDefs['focusring']\" :key=\"layerName\" class=\"v-layer\">\n          <slot :name=\"layerName\" :scale=\"scale\" />\n        </g>\n\n        <!-- nodes -->\n        <transition-group\n          :name=\"allConfigs.node.transition\"\n          :css=\"!!allConfigs.node.transition\"\n          tag=\"g\"\n          class=\"v-layer-nodes\"\n        >\n          <v-node\n            v-for=\"state in nodeZOrderedList\"\n            :id=\"state.id\"\n            :key=\"state.id\"\n            :state=\"state\"\n            :pos=\"currentLayouts.nodes[state.id]\"\n          >\n            <!-- override the node -->\n            <template v-if=\"overrideNodes\" #override-node=\"slotProps\">\n              <slot name=\"override-node\" v-bind=\"slotProps\" />\n            </template>\n            <!-- override the node label -->\n            <template v-if=\"overrideNodeLabels\" #override-node-label=\"slotProps\">\n              <slot name=\"override-node-label\" v-bind=\"slotProps\" />\n            </template>\n          </v-node>\n        </transition-group>\n\n        <g v-for=\"layerName in layerDefs['nodes']\" :key=\"layerName\" class=\"v-layer\">\n          <slot :name=\"layerName\" :scale=\"scale\" />\n        </g>\n\n        <v-paths v-if=\"visiblePaths\" />\n\n        <g v-for=\"layerName in layerDefs['paths']\" :key=\"layerName\" class=\"v-layer\">\n          <slot :name=\"layerName\" :scale=\"scale\" />\n        </g>\n      </g>\n    </svg>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { CSSProperties, defineComponent, PropType, readonly, ref, toRef } from \"vue\"\nimport { computed, nextTick, watch } from \"vue\"\nimport { EventHandlers, Nodes, Edges, InputPaths, Layouts, UserLayouts } from \"@/common/types\"\nimport { Layers, LayerPosition, LayerPositions, Point, Sizes } from \"@/common/types\"\nimport { Reactive, nonNull } from \"@/common/common\"\nimport { UserConfigs, ViewConfig } from \"@/common/configs\"\nimport { provideContainers } from \"@/composables/container\"\nimport { provideConfigs } from \"@/composables/config\"\nimport { provideStates, makeStateInput } from \"@/composables/state\"\nimport { provideMouseOperation } from \"@/composables/mouse\"\nimport { provideEventEmitter } from \"@/composables/event-emitter\"\nimport { makeMarkerState } from \"@/composables/marker\"\nimport { useSvgPanZoom } from \"@/composables/svg-pan-zoom\"\nimport { provideZoomLevel } from \"@/composables/zoom\"\nimport { useTransitionWhile } from \"@/composables/transition\"\nimport { useTranslatePathsToObject } from \"@/composables/object\"\nimport { bindProp, bindPropKeySet } from \"@/utils/props\"\nimport { translateFromSvgToDomCoordinates, translateFromDomToSvgCoordinates } from \"@/utils/svg\"\nimport VNode from \"./node/VNode.vue\"\nimport VNodeFocusRing from \"./node/VNodeFocusRing.vue\"\nimport VEdgeGroups from \"./edge/VEdgeGroups.vue\"\nimport VEdgeBackgrounds from \"./edge/VEdgeBackgrounds.vue\"\nimport VEdgeLabels from \"./edge/VEdgeLabels.vue\"\nimport VBackgroundViewport from \"./background/VBackgroundViewport.vue\"\nimport VBackgroundGrid from \"./background/VBackgroundGrid.vue\"\nimport VPaths from \"./path/VPaths.vue\"\nimport VMarkerHead from \"./marker/VMarkerHead.vue\"\nimport { SvgPanZoomInstance, Box } from \"@/modules/svg-pan-zoom-ex\"\n\nconst SYSTEM_SLOTS = [\"override-node\", \"override-node-label\", \"edge-label\", \"edges-label\"]\n\nenum State {\n  INITIAL = 0,\n  LOADED = 1,\n  UNLOADED = 2,\n}\n\nexport default defineComponent({\n  components: {\n    VNode,\n    VNodeFocusRing,\n    VEdgeGroups,\n    VEdgeBackgrounds,\n    VEdgeLabels,\n    VBackgroundViewport,\n    VBackgroundGrid,\n    VPaths,\n    VMarkerHead,\n  },\n  props: {\n    nodes: {\n      type: Object as PropType<Nodes>,\n      default: () => ({}),\n    },\n    edges: {\n      type: Object as PropType<Edges>,\n      default: () => ({}),\n    },\n    paths: {\n      type: [Object, Array] as PropType<InputPaths>,\n      default: () => ({}),\n    },\n    layouts: {\n      type: Object as PropType<UserLayouts>,\n      default: () => ({}),\n    },\n    zoomLevel: {\n      type: Number,\n      default: 1,\n    },\n    selectedNodes: {\n      type: Array as PropType<string[]>,\n      default: () => [],\n    },\n    selectedEdges: {\n      type: Array as PropType<string[]>,\n      default: () => [],\n    },\n    selectedPaths: {\n      type: Array as PropType<string[]>,\n      default: () => [],\n    },\n    configs: {\n      type: Object as PropType<UserConfigs>,\n      default: () => ({}),\n    },\n    layers: {\n      type: Object as PropType<Layers>,\n      default: () => ({}),\n    },\n    eventHandlers: {\n      // Since a large number of events will be issued, to avoid\n      // contaminating the event log of the development tools,\n      // events are designed to be notified to a handler function\n      // specified by the user.\n      type: Object as PropType<EventHandlers>,\n      default: () => ({}),\n    },\n  },\n  emits: [\n    \"update:zoomLevel\",\n    \"update:selectedNodes\",\n    \"update:selectedEdges\",\n    \"update:selectedPaths\",\n    \"update:layouts\",\n  ],\n  setup(props, { emit, slots }) {\n    const nodesRef = toRef(props, \"nodes\")\n    const edgesRef = toRef(props, \"edges\")\n    const { objects: pathsRef, isInCompatibilityModeForPath } = useTranslatePathsToObject(\n      toRef(props, \"paths\")\n    )\n\n    // Event Bus\n    const emitter = provideEventEmitter()\n    Object.entries(props.eventHandlers).forEach(([type, event]) => {\n      emitter.on(type as any, event as any)\n    })\n\n    // Style settings\n    const configs = provideConfigs(toRef(props, \"configs\"))\n\n    // Additional layers\n    const layerDefs = computed(() => {\n      const definedSlots = new Set(Object.keys(slots))\n      SYSTEM_SLOTS.forEach(s => definedSlots.delete(s))\n\n      const layers = Object.fromEntries(LayerPositions.map(n => [n, [] as string[]]))\n      Object.assign(\n        layers,\n        Object.entries(props.layers).reduce((accum, [name, type]) => {\n          definedSlots.delete(name)\n          if (type in accum) {\n            accum[type].push(name)\n          } else {\n            accum[type] = [name]\n          }\n          return accum\n        }, {} as Record<LayerPosition, string[]>)\n      )\n      // The default slot and any slots not defined in the layers into root.\n      layers[\"root\"].push(...definedSlots)\n      return layers as Record<LayerPosition, string[]>\n    })\n\n    // Grid layer\n    const isShowGrid = computed(() => configs.view.grid.visible)\n    const isShowBackgroundViewport = computed(() => {\n      const layers = layerDefs.value\n      return isShowGrid.value || layers[\"background\"].length > 0 || layers[\"grid\"].length > 0\n    })\n\n    // overrides\n    const overrideNodes = computed(() => \"override-node\" in slots)\n    const overrideNodeLabels = computed(() => \"override-node-label\" in slots)\n    const overrideEdgeLabels = computed(() => \"edge-label\" in slots)\n    const overrideEdgesLabels = computed(() => \"edges-label\" in slots)\n\n    // -----------------------------------------------------------------------\n    // SVG\n    // -----------------------------------------------------------------------\n    const container = ref<HTMLDivElement>()\n    const svg = ref<SVGElement & SVGSVGElement>()\n    const viewport = ref<SVGGElement>()\n    const state = ref<State>(State.INITIAL)\n    const show = computed(() => state.value !== State.INITIAL)\n\n    const zoomLevel = bindProp(props, \"zoomLevel\", emit, v => {\n      v = Math.max(v, configs.view.minZoomLevel)\n      v = Math.min(v, configs.view.maxZoomLevel)\n      return v\n    })\n\n    // SVG pan / zoom\n    const { svgPanZoom, onSvgPanZoomMounted, onSvgPanZoomUnmounted } = useSvgPanZoom(svg, {\n      viewportSelector: \".v-viewport\",\n      minZoom: configs.view.minZoomLevel, // temporary\n      maxZoom: configs.view.maxZoomLevel, // temporary\n      dblClickZoomEnabled: isDoubleClickZoomEnabled(configs.view),\n      mouseWheelZoomEnabled: isMouseWheelZoomEnabled(configs.view),\n      fit: true,\n      center: true,\n      zoomEnabled: configs.view.zoomEnabled,\n      preventMouseEventsDefault: false,\n      onZoom: _ => {\n        if (state.value === State.UNLOADED) return\n        const z = svgPanZoom.value?.getRealZoom() ?? 1\n        if (Math.abs(zoomLevel.value - z) >= 1.0e-6) {\n          zoomLevel.value = z\n          emitter.emit(\"view:zoom\", z)\n        }\n      },\n      panEnabled: configs.view.panEnabled,\n      onPan: p => {\n        if (state.value === State.UNLOADED) return\n        emitter.emit(\"view:pan\", p)\n      },\n    })\n\n    provideContainers({ container, svg, viewport, svgPanZoom })\n\n    // Observe container resizing\n    const rectSize = { width: 0, height: 0 }\n    const resizeObserver = globalThis.ResizeObserver\n      ? new ResizeObserver(() => {\n          svgPanZoom.value?.resize()\n          if (!configs.view.autoPanOnResize) return\n          // Pan to keep the view area centered\n          const r = container.value?.getBoundingClientRect()\n          if (r) {\n            const x = -(rectSize.width - r.width) / 2\n            const y = -(rectSize.height - r.height) / 2\n            svgPanZoom.value?.panBy({ x, y })\n            const { width, height } = r\n            if (rectSize.width !== width || rectSize.height !== height) {\n              Object.assign(rectSize, { width, height })\n              emitter.emit(\"view:resize\", { x: r.x, y: r.y, width, height })\n            }\n          }\n        })\n      : undefined\n    onSvgPanZoomMounted(() => {\n      const c = nonNull(container.value, \"svg-pan-zoom container\")\n      resizeObserver?.observe(c)\n      configs.view.onSvgPanZoomInitialized?.(nonNull(svgPanZoom.value, \"svg-pan-zoom instance\"))\n      const r = c.getBoundingClientRect()\n      const { width, height } = r\n      Object.assign(rectSize, { width, height })\n      viewport.value?.addEventListener(\"touchstart\", stopEventPropagation, { passive: false })\n    })\n    onSvgPanZoomUnmounted(() => {\n      resizeObserver?.disconnect()\n      viewport.value?.removeEventListener(\"touchstart\", stopEventPropagation)\n    })\n\n    const applyAbsoluteZoomLevel = (absoluteZoomLevel: number) => {\n      svgPanZoom.value?.applyAbsoluteZoomLevel(\n        absoluteZoomLevel,\n        configs.view.minZoomLevel,\n        configs.view.maxZoomLevel\n      )\n    }\n\n    watch(\n      () => configs.view.panEnabled,\n      v => {\n        svgPanZoom.value?.setPanEnabled(v)\n      }\n    )\n    watch(\n      () => [\n        configs.view.zoomEnabled,\n        isDoubleClickZoomEnabled(configs.view),\n        isMouseWheelZoomEnabled(configs.view),\n      ],\n      v => {\n        applyZoomEnabled(\n          svgPanZoom.value!,\n          configs.view.zoomEnabled,\n          configs.view.doubleClickZoomEnabled,\n          configs.view.mouseWheelZoomEnabled\n        )\n      }\n    )\n\n    watch(zoomLevel, v => applyAbsoluteZoomLevel(v))\n    watch(\n      () => [configs.view.minZoomLevel, configs.view.maxZoomLevel],\n      _ => {\n        applyAbsoluteZoomLevel(zoomLevel.value)\n      }\n    )\n\n    // Provide zoom level / scaling parameter\n    const { scale } = provideZoomLevel(zoomLevel, configs.view)\n\n    onSvgPanZoomMounted(() => {\n      // apply initial zoom level\n      const initialZoomLevel = props.zoomLevel\n      applyAbsoluteZoomLevel(initialZoomLevel)\n    })\n\n    // To resolve the problem that the center position and\n    // magnification rate may not be recognized.\n    const updateBorderBox = (callback: () => void) => {\n      if (Object.keys(props.nodes).length > 0) {\n        svgPanZoom.value?.updateBBox()\n        nextTick(callback)\n      } else {\n        callback()\n      }\n    }\n\n    // Scales the content to fit in the SVG area.\n    const fitToContents = () => {\n      updateBorderBox(() => {\n        if (svgPanZoom.value) {\n          svgPanZoom.value.fitToContents()\n          emitter.emit(\"view:fit\", undefined)\n        }\n      })\n    }\n\n    // Place content in the center of the SVG area.\n    const panToCenter = () => {\n      updateBorderBox(() => {\n        svgPanZoom.value?.center()\n      })\n    }\n\n    // Get viewport box\n    const getViewBox = () =>\n      svgPanZoom.value?.getViewBox() ?? {\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0,\n      }\n\n    // Get viewport box\n    const setViewBox = (box: Box) => svgPanZoom.value?.setViewBox(box)\n\n    // -----------------------------------------------------------------------\n    // States of selected nodes/edges\n    // -----------------------------------------------------------------------\n    const currentSelectedNodes = bindPropKeySet(props, \"selectedNodes\", nodesRef, emit)\n    watch(currentSelectedNodes, nodes => emitter.emit(\"node:select\", Array.from(nodes)))\n\n    const currentSelectedEdges = bindPropKeySet(props, \"selectedEdges\", edgesRef, emit)\n    watch(currentSelectedEdges, edges => emitter.emit(\"edge:select\", Array.from(edges)))\n\n    const currentSelectedPaths = bindPropKeySet(props, \"selectedPaths\", pathsRef, emit)\n    watch(currentSelectedPaths, paths => emitter.emit(\"path:select\", Array.from(paths)))\n\n    const hoveredNodes = Reactive(new Set<string>())\n    const hoveredEdges = Reactive(new Set<string>())\n    const hoveredPaths = Reactive(new Set<string>())\n    const currentLayouts = Reactive<Layouts>({ nodes: {} })\n\n    // two-way binding\n    watch(\n      () => props.layouts,\n      () => Object.assign(currentLayouts, props.layouts),\n      { deep: true, immediate: true }\n    )\n    watch(currentLayouts, () => emit(\"update:layouts\", currentLayouts), { deep: true })\n\n    const visibleNodeFocusRing = computed(() => {\n      return configs.node.focusring.visible\n    })\n\n    // -----------------------------------------------------------------------\n    // SVG Markers\n    // -----------------------------------------------------------------------\n    const markerState = makeMarkerState()\n\n    // -----------------------------------------------------------------------\n    // Mouse processing\n    // -----------------------------------------------------------------------\n\n    // mouse pointer change on dragging\n    const dragging = ref<boolean>(false)\n    emitter.on(\"node:dragstart\", _ => (dragging.value = true))\n    emitter.on(\"node:dragend\", _ => (dragging.value = false))\n    emitter.on(\"view:mode\", mode => {\n      // avoid pan/zoom when using nodes and edges with multi-touch\n      if (configs.view.panEnabled) {\n        if (mode === \"default\") {\n          svgPanZoom.value?.enablePan()\n        } else {\n          svgPanZoom.value?.disablePan()\n        }\n      }\n      if (configs.view.zoomEnabled) {\n        if (mode === \"default\") {\n          svgPanZoom.value?.enableZoom()\n        } else {\n          svgPanZoom.value?.disableZoom()\n        }\n      }\n    })\n\n    const touches = computed(() => {\n      return configs.view.panEnabled || configs.view.zoomEnabled || configs.node.draggable\n    })\n\n    const { nodeStates, nodeZOrderedList, edgeStates, pathStates } = provideStates(\n      makeStateInput(nodesRef, currentSelectedNodes, hoveredNodes),\n      makeStateInput(edgesRef, currentSelectedEdges, hoveredEdges),\n      makeStateInput(pathsRef, currentSelectedPaths, hoveredPaths),\n      readonly(configs),\n      currentLayouts,\n      markerState,\n      scale\n    )\n\n    const isSvgWheelZoomEnabled = computed(() => isMouseWheelZoomEnabled(configs.view))\n\n    // mouse and touch support\n    provideMouseOperation(\n      svg,\n      readonly(currentLayouts.nodes),\n      readonly(zoomLevel),\n      nodeStates,\n      edgeStates,\n      pathStates,\n      currentSelectedNodes,\n      currentSelectedEdges,\n      currentSelectedPaths,\n      hoveredNodes,\n      hoveredEdges,\n      hoveredPaths,\n      isInCompatibilityModeForPath,\n      isSvgWheelZoomEnabled,\n      emitter\n    )\n\n    // -----------------------------------------------------------------------\n    // Paths\n    // -----------------------------------------------------------------------\n    const visiblePaths = computed(() => configs.path.visible)\n\n    // -----------------------------------------------------------------------\n    // Node layout handler\n    // -----------------------------------------------------------------------\n\n    const activateParams = () => ({\n      layouts: Reactive(currentLayouts.nodes),\n      nodes: nodesRef,\n      edges: edgesRef,\n      configs: readonly(configs),\n      scale: readonly(scale),\n      emitter,\n      svgPanZoom: nonNull(svgPanZoom.value),\n    })\n    watch(\n      () => configs.view.layoutHandler,\n      (newHandler, oldHandler) => {\n        oldHandler.deactivate()\n        newHandler.activate(activateParams())\n      }\n    )\n\n    // -----------------------------------------------------------------------\n    // Transition of element positions\n    // -----------------------------------------------------------------------\n\n    // #transitionWhile() method\n    const { transitionWhile, transitionOption } = useTransitionWhile()\n    const transitionStyles = computed(() => {\n      const o = transitionOption.value\n      return (\n        o.enabled\n          ? {\n              \"--transition-duration\": o.duration + \"ms\",\n              \"--transition-function\": o.timingFunction,\n            }\n          : {}\n      ) as CSSProperties\n    })\n\n    // -----------------------------------------------------------------------\n    // Events\n    // -----------------------------------------------------------------------\n\n    onSvgPanZoomMounted(() => {\n      updateBorderBox(() => {\n        // pan to center\n        const svg = nonNull(svgPanZoom.value, \"svg-pan-zoom\")\n\n        // activate layout handler.\n        // (calc the positions of nodes whose positions are not specified)\n        configs.view.layoutHandler.activate(activateParams())\n\n        nextTick(() => {\n          const autoPanAndZoom = configs.view.autoPanAndZoomOnLoad\n          if (configs.view.fit || autoPanAndZoom !== false) {\n            const nodesEmpty = Object.keys(props.nodes).length == 0\n            if (nodesEmpty || autoPanAndZoom === \"center-zero\") {\n              // Pan (0, 0) to the center.\n              const sizes = svg.getSizes()\n              svg.pan({\n                x: sizes.width / 2,\n                y: sizes.height / 2,\n              })\n            } else if (autoPanAndZoom === \"fit-content\" || configs.view.fit) {\n              fitToContents()\n            } else if (autoPanAndZoom === \"center-content\") {\n              panToCenter()\n            }\n          }\n\n          emitter.emit(\"view:load\")\n\n          // start displaying the svg\n          state.value = State.LOADED\n        })\n      })\n    })\n\n    onSvgPanZoomUnmounted(() => {\n      state.value = State.UNLOADED\n      emitter.emit(\"view:unload\")\n      configs.view.layoutHandler.deactivate()\n    })\n\n    return {\n      // html ref\n      container,\n      svg,\n      viewport,\n      show,\n\n      // instance\n      svgPanZoom,\n\n      // properties\n      allConfigs: configs,\n      layerDefs,\n      isShowGrid,\n      isShowBackgroundViewport,\n      overrideNodes,\n      overrideNodeLabels,\n      overrideEdgeLabels,\n      overrideEdgesLabels,\n      scale,\n      nodeStates,\n      nodeZOrderedList,\n      currentSelectedNodes,\n      markers: markerState.markers,\n      dragging,\n      touches,\n      currentLayouts,\n      visibleNodeFocusRing,\n      visiblePaths,\n      transitionOption,\n      transitionStyles,\n\n      // methods\n      fitToContents,\n      panToCenter,\n      getViewBox,\n      setViewBox,\n      transitionWhile,\n    }\n  },\n  methods: {\n    /**\n     * Zoom in\n     */\n    zoomIn() {\n      this.svgPanZoom?.zoomIn()\n    },\n    /**\n     * Zoom out\n     */\n    zoomOut() {\n      this.svgPanZoom?.zoomOut()\n    },\n    /**\n     * Pan to a rendered position\n     * @return {Point} point to pan\n     */\n    panTo(point: Point) {\n      this.svgPanZoom?.pan(point)\n    },\n    /**\n     * Relatively pan the graph by a specified rendered position vector\n     * @return {Point} relative point to pan\n     */\n    panBy(point: Point) {\n      this.svgPanZoom?.panBy(point)\n    },\n    /**\n     * Get pan vector\n     * @return {Point} pan vector\n     */\n    getPan(): Point {\n      return nonNull(this.svgPanZoom).getPan()\n    },\n    /**\n     * Get all calculate svg dimensions\n     */\n    getSizes(): Sizes {\n      const sizes = nonNull(this.svgPanZoom).getSizes()\n      return {\n        width: sizes.width,\n        height: sizes.height,\n        viewBox: sizes.viewBox,\n      }\n    },\n    /**\n     * Translate from DOM to SVG coordinates\n     * @return {Point} coordinates in the SVG\n     */\n    translateFromDomToSvgCoordinates(coordinates: Point): Point {\n      return translateFromDomToSvgCoordinates(\n        nonNull(this.svg, \"svg\"),\n        nonNull(this.viewport, \"viewport\"),\n        coordinates\n      )\n    },\n    /**\n     * Translate from SVG to DOM coordinates\n     * @return {Point} coordinates in the DOM\n     */\n    translateFromSvgToDomCoordinates(coordinates: Point): Point {\n      return translateFromSvgToDomCoordinates(\n        nonNull(this.svg, \"svg\"),\n        nonNull(this.viewport, \"viewport\"),\n        coordinates\n      )\n    },\n    /**\n     * Get graph as SVG text.\n     * @return {string} SVG text\n     */\n    getAsSvg(): string {\n      const element = nonNull(this.svg, \"svg\")\n      const viewport = nonNull(this.viewport, \"svg viewport\")\n\n      const target = element.cloneNode(true) as SVGElement\n\n      const box = viewport.getBBox()\n      const z = 1 / this.scale\n      const svg = {\n        x: Math.floor((box.x - 10) * z),\n        y: Math.floor((box.y - 10) * z),\n        width: Math.ceil((box.width + 20) * z),\n        height: Math.ceil((box.height + 20) * z),\n      }\n      target.setAttribute(\"width\", svg.width.toString())\n      target.setAttribute(\"height\", svg.height.toString())\n\n      const v = target.querySelector(\".v-viewport\") as SVGGElement\n      v.setAttribute(\"transform\", `translate(${-svg.x} ${-svg.y}), scale(${z})`)\n      v.removeAttribute(\"style\")\n\n      target.setAttribute(\"viewBox\", `0 0 ${svg.width} ${svg.height}`)\n\n      let data = target.outerHTML\n\n      // cleanup\n      data = data.replaceAll(/ data-v-[0-9a-z]+=\"\"/g, \"\")\n      data = data.replaceAll(/<!--[\\s\\S]*?-->/gm, \"\")\n      return data\n    },\n  },\n})\n\nfunction applyZoomEnabled(\n  svgPanZoom: SvgPanZoomInstance,\n  enable: boolean,\n  enableDblClick: boolean,\n  enableMouseWheel: boolean\n): void {\n  svgPanZoom.setZoomEnabled(enable)\n  if (enable && enableDblClick) {\n    svgPanZoom.enableDblClickZoom()\n  } else {\n    svgPanZoom.disableDblClickZoom()\n  }\n  if (enable && enableMouseWheel) {\n    svgPanZoom.enableMouseWheelZoom()\n  } else {\n    svgPanZoom.disableMouseWheelZoom()\n  }\n}\n\nfunction isDoubleClickZoomEnabled(view: ViewConfig): boolean {\n  return view.zoomEnabled && view.doubleClickZoomEnabled\n}\n\nfunction isMouseWheelZoomEnabled(view: ViewConfig): boolean {\n  return view.zoomEnabled && view.mouseWheelZoomEnabled\n}\n\nfunction stopEventPropagation(event: Event) {\n  event.stopPropagation()\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.v-network-graph {\n  padding: 0;\n  position: relative;\n  user-select: none;\n}\n:where(.v-network-graph) {\n  width: 100%;\n  height: 100%;\n}\n.v-canvas {\n  -webkit-tap-highlight-color: transparent;\n  width: 100%;\n  height: 100%;\n  // Respond to disorder until the svgPanZoom library is activated\n  opacity: 0;\n  &.show {\n    opacity: 1;\n    transition: opacity 0.5s linear;\n  }\n}\n\n.v-canvas.dragging {\n  :deep(*) {\n    cursor: grabbing !important;\n  }\n  :deep(.v-line) {\n    transition: d 0s;\n  }\n}\n\n.v-canvas.touches {\n  // prevent to perform browser's default action\n  touch-action: none;\n}\n\n// transition options for #transitionWhile()\n.v-canvas {\n  --transition-duration: 300ms;\n  --transition-function: linear;\n  .v-viewport.v-transition {\n    ::v-deep(.v-node) {\n      transition: transform var(--transition-duration) var(--transition-function);\n    }\n    ::v-deep(.v-layer-edges) path {\n      transition: d var(--transition-duration) var(--transition-function);\n    }\n    ::v-deep(.v-path-line) {\n      transition: d var(--transition-duration) var(--transition-function);\n    }\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, PropType, Ref, ref, watchEffect } from \"vue\"\nimport { EdgeLabelStyle } from \"@/common/configs\"\nimport { Edge, EdgeLabelArea } from \"@/common/types\"\nimport { VectorLine } from \"@/modules/calculation/line\"\nimport VText from \"@/components/base/VLabelText.vue\"\n\nconst props = defineProps({\n  area: {\n    type: Object as PropType<EdgeLabelArea>,\n    required: true,\n  },\n  config: {\n    type: Object as PropType<EdgeLabelStyle>,\n    required: true,\n  },\n  text: {\n    type: String,\n    required: false,\n    default: \"\",\n  },\n  align: {\n    type: String as PropType<\"center\" | \"source\" | \"target\">,\n    required: false,\n    default: \"center\",\n  },\n  verticalAlign: {\n    type: String as PropType<\"center\" | \"above\" | \"below\">,\n    required: false,\n    default: \"center\",\n  },\n  // The followings are the definitions to avoid passing unwanted\n  // items to <text> when they are specified in v-bind.\n  edge: {\n    type: Object as PropType<Edge>,\n    required: false,\n    default: undefined\n  },\n  hovered: {\n    type: Boolean,\n    required: false,\n    default: false\n  },\n  selected: {\n    type: Boolean,\n    required: false,\n    default: false\n  },\n  scale: {\n    type: Number,\n    required: false,\n    default: undefined\n  }\n})\n\nconst x = ref(0)\nconst y = ref(0)\nconst textAnchor: Ref<\"middle\" | \"start\" | \"end\"> = ref(\"middle\")\nconst dominantBaseline: Ref<\"text-top\" | \"hanging\" | \"central\"> = ref(\"central\")\nconst angle = ref(0)\n\nwatchEffect(() => {\n  const s = props.area.source\n  const t = props.area.target\n  if (props.align === \"source\") {\n    if (s.above.x == t.above.x) {\n      textAnchor.value = s.above.y > t.above.y ? \"start\" : \"end\"\n    } else {\n      textAnchor.value = s.above.x < t.above.x ? \"start\" : \"end\"\n    }\n    if (props.verticalAlign === \"above\") {\n      x.value = s.above.x\n      y.value = s.above.y\n      dominantBaseline.value = \"text-top\"\n    } else if (props.verticalAlign === \"below\") {\n      x.value = s.below.x\n      y.value = s.below.y\n      dominantBaseline.value = \"hanging\"\n    } else {\n      // center\n      x.value = (s.above.x + s.below.x) / 2\n      y.value = (s.above.y + s.below.y) / 2\n      dominantBaseline.value = \"central\"\n    }\n  } else if (props.align === \"target\") {\n    if (s.above.x == t.above.x) {\n      textAnchor.value = s.above.y < t.above.y ? \"start\" : \"end\"\n    } else {\n      textAnchor.value = s.above.x > t.above.x ? \"start\" : \"end\"\n    }\n    if (props.verticalAlign === \"above\") {\n      x.value = t.above.x\n      y.value = t.above.y\n      dominantBaseline.value = \"text-top\"\n    } else if (props.verticalAlign === \"below\") {\n      x.value = t.below.x\n      y.value = t.below.y\n      dominantBaseline.value = \"hanging\"\n    } else {\n      // center\n      x.value = (t.above.x + t.below.x) / 2\n      y.value = (t.above.y + t.below.y) / 2\n      dominantBaseline.value = \"central\"\n    }\n  } else {\n    // center\n    textAnchor.value = \"middle\"\n    if (props.verticalAlign === \"above\") {\n      x.value = (s.above.x + t.above.x) / 2\n      y.value = (s.above.y + t.above.y) / 2\n      dominantBaseline.value = \"text-top\"\n    } else if (props.verticalAlign === \"below\") {\n      x.value = (s.below.x + t.below.x) / 2\n      y.value = (s.below.y + t.below.y) / 2\n      dominantBaseline.value = \"hanging\"\n    } else {\n      // center\n      x.value = (s.above.x + t.below.x) / 2\n      y.value = (s.above.y + t.below.y) / 2\n      dominantBaseline.value = \"central\"\n    }\n  }\n  let degree = VectorLine.fromPositions(s.above, t.above).v.angleDegree()\n  if (degree < -90 || degree >= 90) {\n    degree = degree + 180\n    if (degree > 180) {\n      degree -= 360\n    }\n  }\n  angle.value = degree\n})\n\n// If there is no background config and text overlaps the line,\n// automatically set the background.\nconst updatedConfig = computed(() => {\n  if (dominantBaseline.value === \"central\" && !props.config.background) {\n    return {\n      ...props.config,\n      background: {\n        visible: true,\n        color: \"#ffffff\",\n        padding: {\n          vertical: 1,\n          horizontal: 4,\n        },\n        borderRadius: 2\n      }\n    }\n  } else {\n    return props.config\n  }\n})\n\ndefineExpose({ x, y, textAnchor, dominantBaseline, angle, updatedConfig })\n</script>\n\n<template>\n  <v-text\n    class=\"v-edge-label\"\n    :text=\"text\"\n    :x=\"x\"\n    :y=\"y\"\n    :config=\"updatedConfig\"\n    :text-anchor=\"textAnchor\"\n    :dominant-baseline=\"dominantBaseline\"\n    :transform=\"`rotate(${angle} ${x} ${y})`\"\n  />\n  <!-- <g>\n    <circle\n      :cx=\"area.source.above.x\"\n      :cy=\"area.source.above.y\"\n      r=\"3\"\n      fill=\"red\"\n    />\n    <circle\n      :cx=\"area.target.above.x\"\n      :cy=\"area.target.above.y\"\n      r=\"3\"\n      fill=\"green\"\n    />\n    <circle\n      :cx=\"area.source.below.x\"\n      :cy=\"area.source.below.y\"\n      r=\"3\"\n      fill=\"blue\"\n    />\n    <circle\n      :cx=\"area.target.below.x\"\n      :cy=\"area.target.below.y\"\n      r=\"3\"\n      fill=\"orange\"\n    />\n  </g> -->\n</template>\n","import { Ref } from \"vue\"\nimport { Position } from \"@/common/types\"\nimport { SimpleLayout } from \"./simple\"\n\nconst DEFAULT_GRID = 10\n\nexport type GridLayoutParameters = {\n  grid?: number\n}\n\nexport class GridLayout extends SimpleLayout {\n  constructor(private options: GridLayoutParameters = {}) {\n    super()\n  }\n\n  protected setNodePosition(nodeLayout: Ref<Position>, pos: Position) {\n    const grid = this.options.grid || DEFAULT_GRID\n    nodeLayout.value.x = Math.floor(pos.x / grid) * grid\n    nodeLayout.value.y = Math.floor(pos.y / grid) * grid\n  }\n}\n","import { App, Plugin } from \"vue\"\n\n// Import vue components\nimport * as components from \"./components/index\"\n\n// install function executed by Vue.use()\nconst install: Exclude<Plugin[\"install\"], undefined> = function (app: App) {\n  Object.entries(components).forEach(([componentName, component]) => {\n    app.component(componentName, component)\n  })\n}\n\n// Create module definition for Vue.use()\nexport default install\n\nexport type VNetworkGraphInstance = InstanceType<typeof components.VNetworkGraph>\nexport type Instance = InstanceType<typeof components.VNetworkGraph>\n\n// To allow individual component use, export components\n// each can be registered via Vue.component()\nexport * from \"./components/index\"\n\nexport { getFullConfigs } from \"./common/config-defaults\"\n\nexport { SimpleLayout } from \"./layouts/simple\"\nexport { GridLayout } from \"./layouts/grid\"\n// export { ForceLayout } from \"./layouts/force\"\nexport type { LayoutHandler } from \"./layouts/handler\"\n\nexport * from \"./common/types\"\nexport * from \"./common/configs\"\nexport { Vector2D } from \"./modules/vector2d\"\n\n// Export for more advanced visualization. However, be aware of the\n// possibility of destructive specification changes in the future.\nexport { useStates } from \"./composables/state\"\n\nexport type { Box } from \"./modules/svg-pan-zoom-ex\"\n\n// // iife/cjs usage extends esm default export - so import it all\n// import plugin, * as components from '.';\n\n// // Attach named exports directly to plugin. IIFE/CJS will\n// // only expose one global var, with component exports exposed as properties of\n// // that global var (eg. plugin.component)\n// type NamedExports = Exclude<typeof components, 'default'>;\n// type ExtendedPlugin = typeof plugin & NamedExports;\n// Object.entries(components).forEach(([componentName, component]) => {\n//   if (componentName !== 'default') {\n//     const key = componentName as Exclude<keyof NamedExports, 'default'>;\n//     const val = component as Exclude<ExtendedPlugin, typeof plugin>;\n//     (plugin as ExtendedPlugin)[key] = val;\n//   }\n// });\n\n// export default plugin;"],"names":["freeGlobal","Symbol","root","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","symbolTag","INFINITY","symbolProto","isArray","round","funcTag","coreJsData","funcProto","funcToString","Map","nativeCreate","HASH_UNDEFINED","defineProperty","freeExports","freeModule","moduleExports","Buffer","Uint8Array","baseCreate","getPrototype","argsTag","propertyIsEnumerable","MAX_SAFE_INTEGER","objectTag","arrayTag","boolTag","dateTag","errorTag","mapTag","numberTag","regexpTag","setTag","stringTag","weakMapTag","arrayBufferTag","dataViewTag","nodeUtil","isArguments","isBuffer","isTypedArray","baseFor","nativeMax","baseSetToString","setToString","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","nativeKeys","getSymbols","Promise","Set","DataView","WeakMap","getTag","V","PointUtils.getIntersectionOfLineTargetAndCircle","PointUtils.getNearestPoint","LineUtils.toLineVector","LineUtils.calculatePerpendicularLine","PointUtils.getIntersectionPointOfLines","EdgeGroup.makeEdgeGroupStates","EdgeGroup.calculateEdgeShiftedPosition","v2d.calculateDistancesFromCenterOfNodeToEndOfNode","LineUtils.applyMargin","LineUtils.toLinePosition","LineUtils.getCenterOfLinePosition","v2d.calculateCircleCenterAndRadiusBy3Points","v2d.calculateRelativeAngleRadian","v2d.moveOnCircumference","v2d.reverseAngleRadian","LineUtils.toVectorsFromLinePosition","v2d.calculateBezierCurveControlPoint","global","Utils","require$$0","this","SvgUtils","require$$1","ShadowViewport","require$$2","require$$3","require$$4","svgPanZoom","v2d.calculateEdgeLabelArea","PointUtils.getIntersectionOfCircles","PointUtils.getIntersectionOfLineTargetAndCircle2","LineUtils.inverseLine","VMarkerHeadArrow","VMarkerHeadAngle","VMarkerHeadCircle","_sfc_main","VEdgeGroups","VEdgeBackgrounds","VBackgroundViewport","VBackgroundGrid","VMarkerHead","_createElementBlock","_normalizeClass","_Fragment","_renderSlot","_createBlock","_createElementVNode","_normalizeStyle","_createVNode","_withCtx","_TransitionGroup"],"mappings":"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"}